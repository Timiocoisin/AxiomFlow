### AxiomFlow API - Environment Variables Example
### Copy to `.env` (same directory as `pyproject.toml`) and adjust values.

# ---- App ----
APP_NAME="AxiomFlow API"
ENVIRONMENT="development"

# CORS 允许域，JSON 格式数组
CORS_ALLOW_ORIGINS='["http://localhost:5173","http://127.0.0.1:5173"]'

# ---- Database ----
# MySQL 连接
DATABASE_URL="mysql+pymysql://root:password@localhost:3306/axiomflow?charset=utf8mb4"

# ---- Celery（仅 MySQL，不依赖 Redis） ----
# Broker 使用 SQLAlchemy 传输
CELERY_BROKER_URL="sqla+mysql+pymysql://root:password@localhost:3306/axiomflow?charset=utf8mb4"
# 结果存储使用 MySQL
CELERY_RESULT_BACKEND="db+mysql+pymysql://root:password@localhost:3306/axiomflow?charset=utf8mb4"
CELERY_TASK_ALWAYS_EAGER="false"

# ---- Translation runtime ----
# 单进程最大并发翻译数（API/Celery worker）
TRANSLATION_MAX_CONCURRENT="5"

# ---- Observability ----
# 是否启用 /v1/metrics（Prometheus 指标；若未安装 prometheus_client 会输出简化指标）
METRICS_ENABLED="true"
# 是否输出 JSON 结构化日志（便于 ELK/Loki 收集）
LOG_JSON="false"
# 任务失败告警 webhook（可选：飞书/钉钉/自建 webhook URL）
ALERT_WEBHOOK_URL=""
# 是否启用周期性 obs-health 检查（需要 celery beat）
OBS_HEALTH_CHECK_ENABLED="true"
# 周期性检查间隔（秒）
OBS_HEALTH_CHECK_INTERVAL_S="60"
# 告警抖动过滤：连续 N 次 degraded 才告警
OBS_HEALTH_DEBOUNCE_COUNT="3"
# 告警冷却时间（秒）
OBS_HEALTH_ALERT_COOLDOWN_S="600"
# 是否在恢复到 ok 时发送 recovery 通知
OBS_HEALTH_RECOVERY_ALERT="true"
# 批处理自适应调优目标：期望平均响应时间（秒）
BATCH_TARGET_AVG_LATENCY_S="1.2"
# 批处理自适应调优目标：允许错误率（0~1）
BATCH_TARGET_ERROR_RATE="0.05"
# 批处理大小上限（避免 provider 端限流/不稳定）
BATCH_MAX_SIZE="32"
# 健康检查阈值
# PDF 解析缓存命中率最低要求（0~1）
CACHE_HIT_MIN_RATIO="0.5"
# 智能批处理允许的错误率（0~1）
BATCH_ERROR_MAX_RATIO="0.1"
# Celery 任务允许的失败率（0~1）
CELERY_FAIL_MAX_RATIO="0.05"

# ---- Cache ----
# 通用缓存根目录（可选）。示例: "D:/axiomflow-cache"
CACHE_DIR=""
# 是否启用 PDF 解析缓存
PDF_CACHE_ENABLED="true"
# 若留空且设置了 CACHE_DIR，则使用 {CACHE_DIR}/pdf_parse
PDF_PARSE_CACHE_DIR=""

# ---- PDF export / font ----
# 导出 PDF 的回退字体路径
AXIOMFLOW_PDF_FONT=""

# ---- Providers (optional) ----
# 如需本地 Ollama，可在此设定（若你扩展 provider 读取逻辑或通过 settings API）
OLLAMA_API_BASE="http://127.0.0.1:11434"
OLLAMA_MODEL="gemma2"

# ---- OAuth Authentication ----
# Google OAuth 登录配置
# 单个 Client ID（推荐用于单一环境）
GOOGLE_CLIENT_ID="your-google-client-id.apps.googleusercontent.com"
# 或多个 Client ID（用逗号分隔，用于多环境/多域名）
# GOOGLE_CLIENT_IDS="id1.apps.googleusercontent.com,id2.apps.googleusercontent.com"

# GitHub OAuth 登录配置
# 在 https://github.com/settings/developers 创建 OAuth App 获取
GITHUB_CLIENT_ID="your-github-client-id"
GITHUB_CLIENT_SECRET="your-github-client-secret"
# GitHub OAuth 回调地址（可选，不设置则自动从 request.base_url 生成）
# 示例: "http://localhost:8000/v1/auth/github/callback"
GITHUB_REDIRECT_URI=""

# 前端地址（用于 OAuth 回调后重定向到前端）
FRONTEND_BASE_URL="http://localhost:5173"