/* =========================================================
 * Browser Compatibility
 * - Fallbacks for modern CSS features
 * - Performance optimizations for older devices
 * ========================================================= */

/* Backdrop-filter fallback and mobile reduction (performance) */
@supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))) {
  .app-header,
  .nav-link-item,
  .user-avatar-button,
  .user-menu,
  .glass-card,
  .nav-language-menu,
  .nav-language-button {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    /* Fallback: use solid background when backdrop-filter is not supported */
    background: var(--color-surface-1, rgba(255, 255, 255, 0.95)) !important;
  }
}

/* Mobile performance optimization: reduce backdrop-filter blur */
@media (max-width: 640px) {
  .app-header,
  .user-menu,
  .glass-card {
    backdrop-filter: blur(var(--blur-sm, 8px)) saturate(var(--sat-md, 160%));
    -webkit-backdrop-filter: blur(var(--blur-sm, 8px)) saturate(var(--sat-md, 160%));
  }
}

/* Reduce animations on low-end devices (prefers-reduced-motion) */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Color-mix fallback for older browsers */
@supports not (color-mix(in srgb, red, blue)) {
  :where(
    a,
    button,
    input,
    textarea,
    select,
    summary,
    [role="button"],
    [tabindex]:not([tabindex="-1"])
  ):focus-visible {
    outline: 3px solid rgba(99, 102, 241, 0.55);
  }
}

/* CSS Grid fallback for very old browsers */
@supports not (display: grid) {
  .card-grid {
    display: flex;
    flex-wrap: wrap;
  }
}

