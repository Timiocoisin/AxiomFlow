var yw=Object.defineProperty;var Zv=n=>{throw TypeError(n)};var bw=(n,t,e)=>t in n?yw(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var kt=(n,t,e)=>bw(n,typeof t!="symbol"?t+"":t,e),ap=(n,t,e)=>t.has(n)||Zv("Cannot "+e);var c=(n,t,e)=>(ap(n,t,"read from private field"),e?e.call(n):t.get(n)),A=(n,t,e)=>t.has(n)?Zv("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),y=(n,t,e,s)=>(ap(n,t,"write to private field"),s?s.call(n,e):t.set(n,e),e),x=(n,t,e)=>(ap(n,t,"access private method"),e);var Ts=(n,t,e,s)=>({set _(i){y(n,t,i,e)},get _(){return c(n,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function dv(n){const t=Object.create(null);for(const e of n.split(","))t[e]=1;return e=>e in t}const me={},hl=[],Ri=()=>{},L0=()=>!1,Lf=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),hv=n=>n.startsWith("onUpdate:"),He=Object.assign,fv=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},ww=Object.prototype.hasOwnProperty,ne=(n,t)=>ww.call(n,t),Lt=Array.isArray,fl=n=>Kd(n)==="[object Map]",Tc=n=>Kd(n)==="[object Set]",Qv=n=>Kd(n)==="[object Date]",Bt=n=>typeof n=="function",Me=n=>typeof n=="string",qn=n=>typeof n=="symbol",ge=n=>n!==null&&typeof n=="object",O0=n=>(ge(n)||Bt(n))&&Bt(n.then)&&Bt(n.catch),D0=Object.prototype.toString,Kd=n=>D0.call(n),Aw=n=>Kd(n).slice(8,-1),N0=n=>Kd(n)==="[object Object]",Of=n=>Me(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,tu=dv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Df=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},xw=/-\w/g,Mn=Df(n=>n.replace(xw,t=>t.slice(1).toUpperCase())),Sw=/\B([A-Z])/g,wo=Df(n=>n.replace(Sw,"-$1").toLowerCase()),Nf=Df(n=>n.charAt(0).toUpperCase()+n.slice(1)),lp=Df(n=>n?`on${Nf(n)}`:""),fo=(n,t)=>!Object.is(n,t),fh=(n,...t)=>{for(let e=0;e<n.length;e++)n[e](...t)},F0=(n,t,e,s=!1)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,writable:s,value:e})},Ff=n=>{const t=parseFloat(n);return isNaN(t)?n:t},Ew=n=>{const t=Me(n)?Number(n):NaN;return isNaN(t)?n:t};let qv;const $f=()=>qv||(qv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ss(n){if(Lt(n)){const t={};for(let e=0;e<n.length;e++){const s=n[e],i=Me(s)?Tw(s):Ss(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(Me(n)||ge(n))return n}const Cw=/;(?![^(]*\))/g,_w=/:([^]+)/,kw=/\/\*[^]*?\*\//g;function Tw(n){const t={};return n.replace(kw,"").split(Cw).forEach(e=>{if(e){const s=e.split(_w);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function jt(n){let t="";if(Me(n))t=n;else if(Lt(n))for(let e=0;e<n.length;e++){const s=jt(n[e]);s&&(t+=s+" ")}else if(ge(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}const Pw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Rw=dv(Pw);function $0(n){return!!n||n===""}function Iw(n,t){if(n.length!==t.length)return!1;let e=!0;for(let s=0;e&&s<n.length;s++)e=Ha(n[s],t[s]);return e}function Ha(n,t){if(n===t)return!0;let e=Qv(n),s=Qv(t);if(e||s)return e&&s?n.getTime()===t.getTime():!1;if(e=qn(n),s=qn(t),e||s)return n===t;if(e=Lt(n),s=Lt(t),e||s)return e&&s?Iw(n,t):!1;if(e=ge(n),s=ge(t),e||s){if(!e||!s)return!1;const i=Object.keys(n).length,r=Object.keys(t).length;if(i!==r)return!1;for(const o in n){const a=n.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!Ha(n[o],t[o]))return!1}}return String(n)===String(t)}function pv(n,t){return n.findIndex(e=>Ha(e,t))}const B0=n=>!!(n&&n.__v_isRef===!0),at=n=>Me(n)?n:n==null?"":Lt(n)||ge(n)&&(n.toString===D0||!Bt(n.toString))?B0(n)?at(n.value):JSON.stringify(n,j0,2):String(n),j0=(n,t)=>B0(t)?j0(n,t.value):fl(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,i],r)=>(e[cp(s,r)+" =>"]=i,e),{})}:Tc(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>cp(e))}:qn(t)?cp(t):ge(t)&&!Lt(t)&&!N0(t)?String(t):t,cp=(n,t="")=>{var e;return qn(n)?`Symbol(${(e=n.description)!=null?e:t})`:n};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let As;class H0{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=As,!t&&As&&(this.index=(As.scopes||(As.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=As;try{return As=this,t()}finally{As=e}}}on(){++this._on===1&&(this.prevScope=As,As=this)}off(){this._on>0&&--this._on===0&&(As=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(this.effects.length=0,e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function U0(n){return new H0(n)}function V0(){return As}function Mw(n,t=!1){As&&As.cleanups.push(n)}let we;const up=new WeakSet;class G0{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,As&&As.active&&As.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,up.has(this)&&(up.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||W0(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,tm(this),K0(this);const t=we,e=Qn;we=this,Qn=!0;try{return this.fn()}finally{X0(this),we=t,Qn=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)mv(t);this.deps=this.depsTail=void 0,tm(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?up.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Lp(this)&&this.run()}get dirty(){return Lp(this)}}let z0=0,eu,su;function W0(n,t=!1){if(n.flags|=8,t){n.next=su,su=n;return}n.next=eu,eu=n}function gv(){z0++}function vv(){if(--z0>0)return;if(su){let t=su;for(su=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let n;for(;eu;){let t=eu;for(eu=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){n||(n=s)}t=e}}if(n)throw n}function K0(n){for(let t=n.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function X0(n){let t,e=n.depsTail,s=e;for(;s;){const i=s.prevDep;s.version===-1?(s===e&&(e=i),mv(s),Lw(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}n.deps=t,n.depsTail=e}function Lp(n){for(let t=n.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Y0(t.dep.computed)||t.dep.version!==t.version))return!0;return!!n._dirty}function Y0(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===du)||(n.globalVersion=du,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!Lp(n))))return;n.flags|=2;const t=n.dep,e=we,s=Qn;we=n,Qn=!0;try{K0(n);const i=n.fn(n._value);(t.version===0||fo(i,n._value))&&(n.flags|=128,n._value=i,t.version++)}catch(i){throw t.version++,i}finally{we=e,Qn=s,X0(n),n.flags&=-3}}function mv(n,t=!1){const{dep:e,prevSub:s,nextSub:i}=n;if(s&&(s.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=s,n.nextSub=void 0),e.subs===n&&(e.subs=s,!s&&e.computed)){e.computed.flags&=-5;for(let r=e.computed.deps;r;r=r.nextDep)mv(r,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function Lw(n){const{prevDep:t,nextDep:e}=n;t&&(t.nextDep=e,n.prevDep=void 0),e&&(e.prevDep=t,n.nextDep=void 0)}let Qn=!0;const J0=[];function wr(){J0.push(Qn),Qn=!1}function Ar(){const n=J0.pop();Qn=n===void 0?!0:n}function tm(n){const{cleanup:t}=n;if(n.cleanup=void 0,t){const e=we;we=void 0;try{t()}finally{we=e}}}let du=0;class Ow{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class yv{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!we||!Qn||we===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==we)e=this.activeLink=new Ow(we,this),we.deps?(e.prevDep=we.depsTail,we.depsTail.nextDep=e,we.depsTail=e):we.deps=we.depsTail=e,Z0(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const s=e.nextDep;s.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=s),e.prevDep=we.depsTail,e.nextDep=void 0,we.depsTail.nextDep=e,we.depsTail=e,we.deps===e&&(we.deps=s)}return e}trigger(t){this.version++,du++,this.notify(t)}notify(t){gv();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{vv()}}}function Z0(n){if(n.dep.sc++,n.sub.flags&4){const t=n.dep.computed;if(t&&!n.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Z0(s)}const e=n.dep.subs;e!==n&&(n.prevSub=e,e&&(e.nextSub=n)),n.dep.subs=n}}const Yh=new WeakMap,Ba=Symbol(""),Op=Symbol(""),hu=Symbol("");function Es(n,t,e){if(Qn&&we){let s=Yh.get(n);s||Yh.set(n,s=new Map);let i=s.get(e);i||(s.set(e,i=new yv),i.map=s,i.key=e),i.track()}}function fr(n,t,e,s,i,r){const o=Yh.get(n);if(!o){du++;return}const a=l=>{l&&l.trigger()};if(gv(),t==="clear")o.forEach(a);else{const l=Lt(n),u=l&&Of(e);if(l&&e==="length"){const d=Number(s);o.forEach((h,f)=>{(f==="length"||f===hu||!qn(f)&&f>=d)&&a(h)})}else switch((e!==void 0||o.has(void 0))&&a(o.get(e)),u&&a(o.get(hu)),t){case"add":l?u&&a(o.get("length")):(a(o.get(Ba)),fl(n)&&a(o.get(Op)));break;case"delete":l||(a(o.get(Ba)),fl(n)&&a(o.get(Op)));break;case"set":fl(n)&&a(o.get(Ba));break}}vv()}function Dw(n,t){const e=Yh.get(n);return e&&e.get(t)}function Za(n){const t=Zt(n);return t===n?t:(Es(t,"iterate",hu),gn(n)?t:t.map(ti))}function Bf(n){return Es(n=Zt(n),"iterate",hu),n}function Ir(n,t){return xr(n)?Sc(mr(n)?ti(t):t):ti(t)}const Nw={__proto__:null,[Symbol.iterator](){return dp(this,Symbol.iterator,n=>Ir(this,n))},concat(...n){return Za(this).concat(...n.map(t=>Lt(t)?Za(t):t))},entries(){return dp(this,"entries",n=>(n[1]=Ir(this,n[1]),n))},every(n,t){return Li(this,"every",n,t,void 0,arguments)},filter(n,t){return Li(this,"filter",n,t,e=>e.map(s=>Ir(this,s)),arguments)},find(n,t){return Li(this,"find",n,t,e=>Ir(this,e),arguments)},findIndex(n,t){return Li(this,"findIndex",n,t,void 0,arguments)},findLast(n,t){return Li(this,"findLast",n,t,e=>Ir(this,e),arguments)},findLastIndex(n,t){return Li(this,"findLastIndex",n,t,void 0,arguments)},forEach(n,t){return Li(this,"forEach",n,t,void 0,arguments)},includes(...n){return hp(this,"includes",n)},indexOf(...n){return hp(this,"indexOf",n)},join(n){return Za(this).join(n)},lastIndexOf(...n){return hp(this,"lastIndexOf",n)},map(n,t){return Li(this,"map",n,t,void 0,arguments)},pop(){return Pc(this,"pop")},push(...n){return Pc(this,"push",n)},reduce(n,...t){return em(this,"reduce",n,t)},reduceRight(n,...t){return em(this,"reduceRight",n,t)},shift(){return Pc(this,"shift")},some(n,t){return Li(this,"some",n,t,void 0,arguments)},splice(...n){return Pc(this,"splice",n)},toReversed(){return Za(this).toReversed()},toSorted(n){return Za(this).toSorted(n)},toSpliced(...n){return Za(this).toSpliced(...n)},unshift(...n){return Pc(this,"unshift",n)},values(){return dp(this,"values",n=>Ir(this,n))}};function dp(n,t,e){const s=Bf(n),i=s[t]();return s!==n&&!gn(n)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.done||(r.value=e(r.value)),r}),i}const Fw=Array.prototype;function Li(n,t,e,s,i,r){const o=Bf(n),a=o!==n&&!gn(n),l=o[t];if(l!==Fw[t]){const h=l.apply(n,r);return a?ti(h):h}let u=e;o!==n&&(a?u=function(h,f){return e.call(this,Ir(n,h),f,n)}:e.length>2&&(u=function(h,f){return e.call(this,h,f,n)}));const d=l.call(o,u,s);return a&&i?i(d):d}function em(n,t,e,s){const i=Bf(n);let r=e;return i!==n&&(gn(n)?e.length>3&&(r=function(o,a,l){return e.call(this,o,a,l,n)}):r=function(o,a,l){return e.call(this,o,Ir(n,a),l,n)}),i[t](r,...s)}function hp(n,t,e){const s=Zt(n);Es(s,"iterate",hu);const i=s[t](...e);return(i===-1||i===!1)&&jf(e[0])?(e[0]=Zt(e[0]),s[t](...e)):i}function Pc(n,t,e=[]){wr(),gv();const s=Zt(n)[t].apply(n,e);return vv(),Ar(),s}const $w=dv("__proto__,__v_isRef,__isVue"),Q0=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(qn));function Bw(n){qn(n)||(n=String(n));const t=Zt(this);return Es(t,"has",n),t.hasOwnProperty(n)}class q0{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,s){if(e==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!i;if(e==="__v_isReadonly")return i;if(e==="__v_isShallow")return r;if(e==="__v_raw")return s===(i?r?Yw:n1:r?s1:e1).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=Lt(t);if(!i){let l;if(o&&(l=Nw[e]))return l;if(e==="hasOwnProperty")return Bw}const a=Reflect.get(t,e,Ie(t)?t:s);if((qn(e)?Q0.has(e):$w(e))||(i||Es(t,"get",e),r))return a;if(Ie(a)){const l=o&&Of(e)?a:a.value;return i&&ge(l)?Np(l):l}return ge(a)?i?Np(a):Xd(a):a}}class t1 extends q0{constructor(t=!1){super(!1,t)}set(t,e,s,i){let r=t[e];const o=Lt(t)&&Of(e);if(!this._isShallow){const u=xr(r);if(!gn(s)&&!xr(s)&&(r=Zt(r),s=Zt(s)),!o&&Ie(r)&&!Ie(s))return u||(r.value=s),!0}const a=o?Number(e)<t.length:ne(t,e),l=Reflect.set(t,e,s,Ie(t)?t:i);return t===Zt(i)&&(a?fo(s,r)&&fr(t,"set",e,s):fr(t,"add",e,s)),l}deleteProperty(t,e){const s=ne(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&s&&fr(t,"delete",e,void 0),i}has(t,e){const s=Reflect.has(t,e);return(!qn(e)||!Q0.has(e))&&Es(t,"has",e),s}ownKeys(t){return Es(t,"iterate",Lt(t)?"length":Ba),Reflect.ownKeys(t)}}class jw extends q0{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const Hw=new t1,Uw=new jw,Vw=new t1(!0);const Dp=n=>n,sh=n=>Reflect.getPrototypeOf(n);function Gw(n,t,e){return function(...s){const i=this.__v_raw,r=Zt(i),o=fl(r),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,u=i[n](...s),d=e?Dp:t?Sc:ti;return!t&&Es(r,"iterate",l?Op:Ba),He(Object.create(u),{next(){const{value:h,done:f}=u.next();return f?{value:h,done:f}:{value:a?[d(h[0]),d(h[1])]:d(h),done:f}}})}}function nh(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function zw(n,t){const e={get(i){const r=this.__v_raw,o=Zt(r),a=Zt(i);n||(fo(i,a)&&Es(o,"get",i),Es(o,"get",a));const{has:l}=sh(o),u=t?Dp:n?Sc:ti;if(l.call(o,i))return u(r.get(i));if(l.call(o,a))return u(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!n&&Es(Zt(i),"iterate",Ba),i.size},has(i){const r=this.__v_raw,o=Zt(r),a=Zt(i);return n||(fo(i,a)&&Es(o,"has",i),Es(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=Zt(a),u=t?Dp:n?Sc:ti;return!n&&Es(l,"iterate",Ba),a.forEach((d,h)=>i.call(r,u(d),u(h),o))}};return He(e,n?{add:nh("add"),set:nh("set"),delete:nh("delete"),clear:nh("clear")}:{add(i){!t&&!gn(i)&&!xr(i)&&(i=Zt(i));const r=Zt(this);return sh(r).has.call(r,i)||(r.add(i),fr(r,"add",i,i)),this},set(i,r){!t&&!gn(r)&&!xr(r)&&(r=Zt(r));const o=Zt(this),{has:a,get:l}=sh(o);let u=a.call(o,i);u||(i=Zt(i),u=a.call(o,i));const d=l.call(o,i);return o.set(i,r),u?fo(r,d)&&fr(o,"set",i,r):fr(o,"add",i,r),this},delete(i){const r=Zt(this),{has:o,get:a}=sh(r);let l=o.call(r,i);l||(i=Zt(i),l=o.call(r,i)),a&&a.call(r,i);const u=r.delete(i);return l&&fr(r,"delete",i,void 0),u},clear(){const i=Zt(this),r=i.size!==0,o=i.clear();return r&&fr(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=Gw(i,n,t)}),e}function bv(n,t){const e=zw(n,t);return(s,i,r)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?s:Reflect.get(ne(e,i)&&i in s?e:s,i,r)}const Ww={get:bv(!1,!1)},Kw={get:bv(!1,!0)},Xw={get:bv(!0,!1)};const e1=new WeakMap,s1=new WeakMap,n1=new WeakMap,Yw=new WeakMap;function Jw(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Zw(n){return n.__v_skip||!Object.isExtensible(n)?0:Jw(Aw(n))}function Xd(n){return xr(n)?n:wv(n,!1,Hw,Ww,e1)}function i1(n){return wv(n,!1,Vw,Kw,s1)}function Np(n){return wv(n,!0,Uw,Xw,n1)}function wv(n,t,e,s,i){if(!ge(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const r=Zw(n);if(r===0)return n;const o=i.get(n);if(o)return o;const a=new Proxy(n,r===2?s:e);return i.set(n,a),a}function mr(n){return xr(n)?mr(n.__v_raw):!!(n&&n.__v_isReactive)}function xr(n){return!!(n&&n.__v_isReadonly)}function gn(n){return!!(n&&n.__v_isShallow)}function jf(n){return n?!!n.__v_raw:!1}function Zt(n){const t=n&&n.__v_raw;return t?Zt(t):n}function Av(n){return!ne(n,"__v_skip")&&Object.isExtensible(n)&&F0(n,"__v_skip",!0),n}const ti=n=>ge(n)?Xd(n):n,Sc=n=>ge(n)?Np(n):n;function Ie(n){return n?n.__v_isRef===!0:!1}function et(n){return r1(n,!1)}function Qw(n){return r1(n,!0)}function r1(n,t){return Ie(n)?n:new qw(n,t)}class qw{constructor(t,e){this.dep=new yv,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:Zt(t),this._value=e?t:ti(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,s=this.__v_isShallow||gn(t)||xr(t);t=s?t:Zt(t),fo(t,e)&&(this._rawValue=t,this._value=s?t:ti(t),this.dep.trigger())}}function ue(n){return Ie(n)?n.value:n}const tA={get:(n,t,e)=>t==="__v_raw"?n:ue(Reflect.get(n,t,e)),set:(n,t,e,s)=>{const i=n[t];return Ie(i)&&!Ie(e)?(i.value=e,!0):Reflect.set(n,t,e,s)}};function o1(n){return mr(n)?n:new Proxy(n,tA)}function eA(n){const t=Lt(n)?new Array(n.length):{};for(const e in n)t[e]=nA(n,e);return t}class sA{constructor(t,e,s){this._object=t,this._key=e,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0,this._raw=Zt(t);let i=!0,r=t;if(!Lt(t)||!Of(String(e)))do i=!jf(r)||gn(r);while(i&&(r=r.__v_raw));this._shallow=i}get value(){let t=this._object[this._key];return this._shallow&&(t=ue(t)),this._value=t===void 0?this._defaultValue:t}set value(t){if(this._shallow&&Ie(this._raw[this._key])){const e=this._object[this._key];if(Ie(e)){e.value=t;return}}this._object[this._key]=t}get dep(){return Dw(this._raw,this._key)}}function nA(n,t,e){return new sA(n,t,e)}class iA{constructor(t,e,s){this.fn=t,this.setter=e,this._value=void 0,this.dep=new yv(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=du-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&we!==this)return W0(this,!0),!0}get value(){const t=this.dep.track();return Y0(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function rA(n,t,e=!1){let s,i;return Bt(n)?s=n:(s=n.get,i=n.set),new iA(s,i,e)}const ih={},Jh=new WeakMap;let ko;function oA(n,t=!1,e=ko){if(e){let s=Jh.get(e);s||Jh.set(e,s=[]),s.push(n)}}function aA(n,t,e=me){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=e,u=T=>i?T:gn(T)||i===!1||i===0?pr(T,1):pr(T);let d,h,f,p,g=!1,m=!1;if(Ie(n)?(h=()=>n.value,g=gn(n)):mr(n)?(h=()=>u(n),g=!0):Lt(n)?(m=!0,g=n.some(T=>mr(T)||gn(T)),h=()=>n.map(T=>{if(Ie(T))return T.value;if(mr(T))return u(T);if(Bt(T))return l?l(T,2):T()})):Bt(n)?t?h=l?()=>l(n,2):n:h=()=>{if(f){wr();try{f()}finally{Ar()}}const T=ko;ko=d;try{return l?l(n,3,[p]):n(p)}finally{ko=T}}:h=Ri,t&&i){const T=h,_=i===!0?1/0:i;h=()=>pr(T(),_)}const w=V0(),b=()=>{d.stop(),w&&w.active&&fv(w.effects,d)};if(r&&t){const T=t;t=(..._)=>{T(..._),b()}}let S=m?new Array(n.length).fill(ih):ih;const C=T=>{if(!(!(d.flags&1)||!d.dirty&&!T))if(t){const _=d.run();if(i||g||(m?_.some((R,M)=>fo(R,S[M])):fo(_,S))){f&&f();const R=ko;ko=d;try{const M=[_,S===ih?void 0:m&&S[0]===ih?[]:S,p];S=_,l?l(t,3,M):t(...M)}finally{ko=R}}}else d.run()};return a&&a(C),d=new G0(h),d.scheduler=o?()=>o(C,!1):C,p=T=>oA(T,!1,d),f=d.onStop=()=>{const T=Jh.get(d);if(T){if(l)l(T,4);else for(const _ of T)_();Jh.delete(d)}},t?s?C(!0):S=d.run():o?o(C.bind(null,!0),!0):d.run(),b.pause=d.pause.bind(d),b.resume=d.resume.bind(d),b.stop=b,b}function pr(n,t=1/0,e){if(t<=0||!ge(n)||n.__v_skip||(e=e||new Map,(e.get(n)||0)>=t))return n;if(e.set(n,t),t--,Ie(n))pr(n.value,t,e);else if(Lt(n))for(let s=0;s<n.length;s++)pr(n[s],t,e);else if(Tc(n)||fl(n))n.forEach(s=>{pr(s,t,e)});else if(N0(n)){for(const s in n)pr(n[s],t,e);for(const s of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,s)&&pr(n[s],t,e)}return n}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Yd(n,t,e,s){try{return s?n(...s):n()}catch(i){Hf(i,t,e)}}function ei(n,t,e,s){if(Bt(n)){const i=Yd(n,t,e,s);return i&&O0(i)&&i.catch(r=>{Hf(r,t,e)}),i}if(Lt(n)){const i=[];for(let r=0;r<n.length;r++)i.push(ei(n[r],t,e,s));return i}}function Hf(n,t,e,s=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||me;if(t){let a=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${e}`;for(;a;){const d=a.ec;if(d){for(let h=0;h<d.length;h++)if(d[h](n,l,u)===!1)return}a=a.parent}if(r){wr(),Yd(r,null,10,[n,l,u]),Ar();return}}lA(n,e,i,s,o)}function lA(n,t,e,s=!0,i=!1){if(i)throw n;console.error(n)}const Bs=[];let ui=-1;const pl=[];let Mr=null,el=0;const a1=Promise.resolve();let Zh=null;function Jd(n){const t=Zh||a1;return n?t.then(this?n.bind(this):n):t}function cA(n){let t=ui+1,e=Bs.length;for(;t<e;){const s=t+e>>>1,i=Bs[s],r=fu(i);r<n||r===n&&i.flags&2?t=s+1:e=s}return t}function xv(n){if(!(n.flags&1)){const t=fu(n),e=Bs[Bs.length-1];!e||!(n.flags&2)&&t>=fu(e)?Bs.push(n):Bs.splice(cA(t),0,n),n.flags|=1,l1()}}function l1(){Zh||(Zh=a1.then(u1))}function uA(n){Lt(n)?pl.push(...n):Mr&&n.id===-1?Mr.splice(el+1,0,n):n.flags&1||(pl.push(n),n.flags|=1),l1()}function sm(n,t,e=ui+1){for(;e<Bs.length;e++){const s=Bs[e];if(s&&s.flags&2){if(n&&s.id!==n.uid)continue;Bs.splice(e,1),e--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function c1(n){if(pl.length){const t=[...new Set(pl)].sort((e,s)=>fu(e)-fu(s));if(pl.length=0,Mr){Mr.push(...t);return}for(Mr=t,el=0;el<Mr.length;el++){const e=Mr[el];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Mr=null,el=0}}const fu=n=>n.id==null?n.flags&2?-1:1/0:n.id;function u1(n){try{for(ui=0;ui<Bs.length;ui++){const t=Bs[ui];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Yd(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;ui<Bs.length;ui++){const t=Bs[ui];t&&(t.flags&=-2)}ui=-1,Bs.length=0,c1(),Zh=null,(Bs.length||pl.length)&&u1()}}let ds=null,d1=null;function Qh(n){const t=ds;return ds=n,d1=n&&n.type.__scopeId||null,t}function ce(n,t=ds,e){if(!t||n._n)return n;const s=(...i)=>{s._d&&ef(-1);const r=Qh(t);let o;try{o=n(...i)}finally{Qh(r),s._d&&ef(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Re(n,t){if(ds===null)return n;const e=Kf(ds),s=n.dirs||(n.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,l=me]=t[i];r&&(Bt(r)&&(r={mounted:r,updated:r}),r.deep&&pr(o),s.push({dir:r,instance:e,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function Eo(n,t,e,s){const i=n.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(wr(),ei(l,e,8,[n.el,a,n,t]),Ar())}}function ph(n,t){if(_s){let e=_s.provides;const s=_s.parent&&_s.parent.provides;s===e&&(e=_s.provides=Object.create(s)),e[n]=t}}function Pn(n,t,e=!1){const s=Wf();if(s||ja){let i=ja?ja._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return e&&Bt(t)?t.call(s&&s.proxy):t}}function dA(){return!!(Wf()||ja)}const hA=Symbol.for("v-scx"),fA=()=>Pn(hA);function hs(n,t,e){return h1(n,t,e)}function h1(n,t,e=me){const{immediate:s,deep:i,flush:r,once:o}=e,a=He({},e),l=t&&s||!t&&r!=="post";let u;if(mu){if(r==="sync"){const p=fA();u=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=Ri,p.resume=Ri,p.pause=Ri,p}}const d=_s;a.call=(p,g,m)=>ei(p,d,g,m);let h=!1;r==="post"?a.scheduler=p=>{Ns(p,d&&d.suspense)}:r!=="sync"&&(h=!0,a.scheduler=(p,g)=>{g?p():xv(p)}),a.augmentJob=p=>{t&&(p.flags|=4),h&&(p.flags|=2,d&&(p.id=d.uid,p.i=d))};const f=aA(n,t,a);return mu&&(u?u.push(f):l&&f()),f}function pA(n,t,e){const s=this.proxy,i=Me(n)?n.includes(".")?f1(s,n):()=>s[n]:n.bind(s,s);let r;Bt(t)?r=t:(r=t.handler,e=t);const o=Zd(this),a=h1(i,r.bind(s),e);return o(),a}function f1(n,t){const e=t.split(".");return()=>{let s=n;for(let i=0;i<e.length&&s;i++)s=s[e[i]];return s}}const p1=Symbol("_vte"),g1=n=>n.__isTeleport,nu=n=>n&&(n.disabled||n.disabled===""),nm=n=>n&&(n.defer||n.defer===""),im=n=>typeof SVGElement<"u"&&n instanceof SVGElement,rm=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,Fp=(n,t)=>{const e=n&&n.to;return Me(e)?t?t(e):null:e},v1={name:"Teleport",__isTeleport:!0,process(n,t,e,s,i,r,o,a,l,u){const{mc:d,pc:h,pbc:f,o:{insert:p,querySelector:g,createText:m,createComment:w}}=u,b=nu(t.props);let{shapeFlag:S,children:C,dynamicChildren:T}=t;if(n==null){const _=t.el=m(""),R=t.anchor=m("");p(_,e,s),p(R,e,s);const M=(I,G)=>{S&16&&d(C,I,G,i,r,o,a,l)},N=()=>{const I=t.target=Fp(t.props,g),G=m1(I,t,m,p);I&&(o!=="svg"&&im(I)?o="svg":o!=="mathml"&&rm(I)&&(o="mathml"),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(I),b||(M(I,G),gh(t,!1)))};b&&(M(e,R),gh(t,!0)),nm(t.props)?(t.el.__isMounted=!1,Ns(()=>{N(),delete t.el.__isMounted},r)):N()}else{if(nm(t.props)&&n.el.__isMounted===!1){Ns(()=>{v1.process(n,t,e,s,i,r,o,a,l,u)},r);return}t.el=n.el,t.targetStart=n.targetStart;const _=t.anchor=n.anchor,R=t.target=n.target,M=t.targetAnchor=n.targetAnchor,N=nu(n.props),I=N?e:R,G=N?_:M;if(o==="svg"||im(R)?o="svg":(o==="mathml"||rm(R))&&(o="mathml"),T?(f(n.dynamicChildren,T,I,i,r,o,a),kv(n,t,!0)):l||h(n,t,I,G,i,r,o,a,!1),b)N?t.props&&n.props&&t.props.to!==n.props.to&&(t.props.to=n.props.to):rh(t,e,_,u,1);else if((t.props&&t.props.to)!==(n.props&&n.props.to)){const X=t.target=Fp(t.props,g);X&&rh(t,X,null,u,0)}else N&&rh(t,R,M,u,1);gh(t,b)}},remove(n,t,e,{um:s,o:{remove:i}},r){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:d,target:h,props:f}=n;if(h&&(i(u),i(d)),r&&i(l),o&16){const p=r||!nu(f);for(let g=0;g<a.length;g++){const m=a[g];s(m,t,e,p,!!m.dynamicChildren)}}},move:rh,hydrate:gA};function rh(n,t,e,{o:{insert:s},m:i},r=2){r===0&&s(n.targetAnchor,t,e);const{el:o,anchor:a,shapeFlag:l,children:u,props:d}=n,h=r===2;if(h&&s(o,t,e),(!h||nu(d))&&l&16)for(let f=0;f<u.length;f++)i(u[f],t,e,2);h&&s(a,t,e)}function gA(n,t,e,s,i,r,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:d}},h){function f(m,w,b,S){w.anchor=h(o(m),w,a(m),e,s,i,r),w.targetStart=b,w.targetAnchor=S}const p=t.target=Fp(t.props,l),g=nu(t.props);if(p){const m=p._lpa||p.firstChild;if(t.shapeFlag&16)if(g)f(n,t,m,m&&o(m));else{t.anchor=o(n);let w=m;for(;w;){if(w&&w.nodeType===8){if(w.data==="teleport start anchor")t.targetStart=w;else if(w.data==="teleport anchor"){t.targetAnchor=w,p._lpa=t.targetAnchor&&o(t.targetAnchor);break}}w=o(w)}t.targetAnchor||m1(p,t,d,u),h(m&&o(m),t,p,e,s,i,r)}gh(t,g)}else g&&t.shapeFlag&16&&f(n,t,n,o(n));return t.anchor&&o(t.anchor)}const Ti=v1;function gh(n,t){const e=n.ctx;if(e&&e.ut){let s,i;for(t?(s=n.el,i=n.anchor):(s=n.targetStart,i=n.targetAnchor);s&&s!==i;)s.nodeType===1&&s.setAttribute("data-v-owner",e.uid),s=s.nextSibling;e.ut()}}function m1(n,t,e,s){const i=t.targetStart=e(""),r=t.targetAnchor=e("");return i[p1]=r,n&&(s(i,n),s(r,n)),r}const Hi=Symbol("_leaveCb"),oh=Symbol("_enterCb");function y1(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Js(()=>{n.isMounted=!0}),Ev(()=>{n.isUnmounting=!0}),n}const mn=[Function,Array],b1={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:mn,onEnter:mn,onAfterEnter:mn,onEnterCancelled:mn,onBeforeLeave:mn,onLeave:mn,onAfterLeave:mn,onLeaveCancelled:mn,onBeforeAppear:mn,onAppear:mn,onAfterAppear:mn,onAppearCancelled:mn},w1=n=>{const t=n.subTree;return t.component?w1(t.component):t},vA={name:"BaseTransition",props:b1,setup(n,{slots:t}){const e=Wf(),s=y1();return()=>{const i=t.default&&Sv(t.default(),!0);if(!i||!i.length)return;const r=A1(i),o=Zt(n),{mode:a}=o;if(s.isLeaving)return fp(r);const l=om(r);if(!l)return fp(r);let u=pu(l,o,s,e,h=>u=h);l.type!==Cs&&Ua(l,u);let d=e.subTree&&om(e.subTree);if(d&&d.type!==Cs&&!Io(d,l)&&w1(e).type!==Cs){let h=pu(d,o,s,e);if(Ua(d,h),a==="out-in"&&l.type!==Cs)return s.isLeaving=!0,h.afterLeave=()=>{s.isLeaving=!1,e.job.flags&8||e.update(),delete h.afterLeave,d=void 0},fp(r);a==="in-out"&&l.type!==Cs?h.delayLeave=(f,p,g)=>{const m=x1(s,d);m[String(d.key)]=d,f[Hi]=()=>{p(),f[Hi]=void 0,delete u.delayedLeave,d=void 0},u.delayedLeave=()=>{g(),delete u.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return r}}};function A1(n){let t=n[0];if(n.length>1){for(const e of n)if(e.type!==Cs){t=e;break}}return t}const mA=vA;function x1(n,t){const{leavingVNodes:e}=n;let s=e.get(t.type);return s||(s=Object.create(null),e.set(t.type,s)),s}function pu(n,t,e,s,i){const{appear:r,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:d,onEnterCancelled:h,onBeforeLeave:f,onLeave:p,onAfterLeave:g,onLeaveCancelled:m,onBeforeAppear:w,onAppear:b,onAfterAppear:S,onAppearCancelled:C}=t,T=String(n.key),_=x1(e,n),R=(I,G)=>{I&&ei(I,s,9,G)},M=(I,G)=>{const X=G[1];R(I,G),Lt(I)?I.every(z=>z.length<=1)&&X():I.length<=1&&X()},N={mode:o,persisted:a,beforeEnter(I){let G=l;if(!e.isMounted)if(r)G=w||l;else return;I[Hi]&&I[Hi](!0);const X=_[T];X&&Io(n,X)&&X.el[Hi]&&X.el[Hi](),R(G,[I])},enter(I){let G=u,X=d,z=h;if(!e.isMounted)if(r)G=b||u,X=S||d,z=C||h;else return;let ot=!1;const q=I[oh]=nt=>{ot||(ot=!0,nt?R(z,[I]):R(X,[I]),N.delayedLeave&&N.delayedLeave(),I[oh]=void 0)};G?M(G,[I,q]):q()},leave(I,G){const X=String(n.key);if(I[oh]&&I[oh](!0),e.isUnmounting)return G();R(f,[I]);let z=!1;const ot=I[Hi]=q=>{z||(z=!0,G(),q?R(m,[I]):R(g,[I]),I[Hi]=void 0,_[X]===n&&delete _[X])};_[X]=n,p?M(p,[I,ot]):ot()},clone(I){const G=pu(I,t,e,s,i);return i&&i(G),G}};return N}function fp(n){if(Uf(n))return n=go(n),n.children=null,n}function om(n){if(!Uf(n))return g1(n.type)&&n.children?A1(n.children):n;if(n.component)return n.component.subTree;const{shapeFlag:t,children:e}=n;if(e){if(t&16)return e[0];if(t&32&&Bt(e.default))return e.default()}}function Ua(n,t){n.shapeFlag&6&&n.component?(n.transition=t,Ua(n.component.subTree,t)):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}function Sv(n,t=!1,e){let s=[],i=0;for(let r=0;r<n.length;r++){let o=n[r];const a=e==null?o.key:String(e)+String(o.key!=null?o.key:r);o.type===fe?(o.patchFlag&128&&i++,s=s.concat(Sv(o.children,t,a))):(t||o.type!==Cs)&&s.push(a!=null?go(o,{key:a}):o)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}function fs(n,t){return Bt(n)?He({name:n.name},t,{setup:n}):n}function S1(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}const qh=new WeakMap;function iu(n,t,e,s,i=!1){if(Lt(n)){n.forEach((g,m)=>iu(g,t&&(Lt(t)?t[m]:t),e,s,i));return}if(gl(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&iu(n,t,e,s.component.subTree);return}const r=s.shapeFlag&4?Kf(s.component):s.el,o=i?null:r,{i:a,r:l}=n,u=t&&t.r,d=a.refs===me?a.refs={}:a.refs,h=a.setupState,f=Zt(h),p=h===me?L0:g=>ne(f,g);if(u!=null&&u!==l){if(am(t),Me(u))d[u]=null,p(u)&&(h[u]=null);else if(Ie(u)){u.value=null;const g=t;g.k&&(d[g.k]=null)}}if(Bt(l))Yd(l,a,12,[o,d]);else{const g=Me(l),m=Ie(l);if(g||m){const w=()=>{if(n.f){const b=g?p(l)?h[l]:d[l]:l.value;if(i)Lt(b)&&fv(b,r);else if(Lt(b))b.includes(r)||b.push(r);else if(g)d[l]=[r],p(l)&&(h[l]=d[l]);else{const S=[r];l.value=S,n.k&&(d[n.k]=S)}}else g?(d[l]=o,p(l)&&(h[l]=o)):m&&(l.value=o,n.k&&(d[n.k]=o))};if(o){const b=()=>{w(),qh.delete(n)};b.id=-1,qh.set(n,b),Ns(b,e)}else am(n),w()}}}function am(n){const t=qh.get(n);t&&(t.flags|=8,qh.delete(n))}$f().requestIdleCallback;$f().cancelIdleCallback;const gl=n=>!!n.type.__asyncLoader,Uf=n=>n.type.__isKeepAlive;function yA(n,t){E1(n,"a",t)}function bA(n,t){E1(n,"da",t)}function E1(n,t,e=_s){const s=n.__wdc||(n.__wdc=()=>{let i=e;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(Vf(t,s,e),e){let i=e.parent;for(;i&&i.parent;)Uf(i.parent.vnode)&&wA(s,t,e,i),i=i.parent}}function wA(n,t,e,s){const i=Vf(t,n,s,!0);Ka(()=>{fv(s[t],i)},e)}function Vf(n,t,e=_s,s=!1){if(e){const i=e[n]||(e[n]=[]),r=t.__weh||(t.__weh=(...o)=>{wr();const a=Zd(e),l=ei(t,e,n,o);return a(),Ar(),l});return s?i.unshift(r):i.push(r),r}}const Cr=n=>(t,e=_s)=>{(!mu||n==="sp")&&Vf(n,(...s)=>t(...s),e)},AA=Cr("bm"),Js=Cr("m"),xA=Cr("bu"),C1=Cr("u"),Ev=Cr("bum"),Ka=Cr("um"),SA=Cr("sp"),EA=Cr("rtg"),CA=Cr("rtc");function _A(n,t=_s){Vf("ec",n,t)}const kA="components";function lm(n,t){return PA(kA,n,!0,t)||n}const TA=Symbol.for("v-ndc");function PA(n,t,e=!0,s=!1){const i=ds||_s;if(i){const r=i.type;{const a=f2(r,!1);if(a&&(a===t||a===Mn(t)||a===Nf(Mn(t))))return r}const o=cm(i[n]||r[n],t)||cm(i.appContext[n],t);return!o&&s?r:o}}function cm(n,t){return n&&(n[t]||n[Mn(t)]||n[Nf(Mn(t))])}function dn(n,t,e,s){let i;const r=e,o=Lt(n);if(o||Me(n)){const a=o&&mr(n);let l=!1,u=!1;a&&(l=!gn(n),u=xr(n),n=Bf(n)),i=new Array(n.length);for(let d=0,h=n.length;d<h;d++)i[d]=t(l?u?Sc(ti(n[d])):ti(n[d]):n[d],d,void 0,r)}else if(typeof n=="number"){i=new Array(n);for(let a=0;a<n;a++)i[a]=t(a+1,a,void 0,r)}else if(ge(n))if(n[Symbol.iterator])i=Array.from(n,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(n);i=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const d=a[l];i[l]=t(n[d],d,l,r)}}else i=[];return i}function _1(n,t,e={},s,i){if(ds.ce||ds.parent&&gl(ds.parent)&&ds.parent.ce){const u=Object.keys(e).length>0;return O(),Ye(fe,null,[Nt("slot",e,s)],u?-2:64)}let r=n[t];r&&r._c&&(r._d=!1),O();const o=r&&k1(r(e)),a=e.key||o&&o.key,l=Ye(fe,{key:(a&&!qn(a)?a:`_${t}`)+(!o&&s?"_fb":"")},o||[],o&&n._===1?64:-2);return r&&r._c&&(r._d=!0),l}function k1(n){return n.some(t=>vu(t)?!(t.type===Cs||t.type===fe&&!k1(t.children)):!0)?n:null}const $p=n=>n?z1(n)?Kf(n):$p(n.parent):null,ru=He(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>$p(n.parent),$root:n=>$p(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>P1(n),$forceUpdate:n=>n.f||(n.f=()=>{xv(n.update)}),$nextTick:n=>n.n||(n.n=Jd.bind(n.proxy)),$watch:n=>pA.bind(n)}),pp=(n,t)=>n!==me&&!n.__isScriptSetup&&ne(n,t),RA={get({_:n},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=n;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return s[t];case 2:return i[t];case 4:return e[t];case 3:return r[t]}else{if(pp(s,t))return o[t]=1,s[t];if(i!==me&&ne(i,t))return o[t]=2,i[t];if(ne(r,t))return o[t]=3,r[t];if(e!==me&&ne(e,t))return o[t]=4,e[t];Bp&&(o[t]=0)}}const u=ru[t];let d,h;if(u)return t==="$attrs"&&Es(n.attrs,"get",""),u(n);if((d=a.__cssModules)&&(d=d[t]))return d;if(e!==me&&ne(e,t))return o[t]=4,e[t];if(h=l.config.globalProperties,ne(h,t))return h[t]},set({_:n},t,e){const{data:s,setupState:i,ctx:r}=n;return pp(i,t)?(i[t]=e,!0):s!==me&&ne(s,t)?(s[t]=e,!0):ne(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(r[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:s,appContext:i,props:r,type:o}},a){let l;return!!(e[a]||n!==me&&a[0]!=="$"&&ne(n,a)||pp(t,a)||ne(r,a)||ne(s,a)||ne(ru,a)||ne(i.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:ne(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}};function um(n){return Lt(n)?n.reduce((t,e)=>(t[e]=null,t),{}):n}let Bp=!0;function IA(n){const t=P1(n),e=n.proxy,s=n.ctx;Bp=!1,t.beforeCreate&&dm(t.beforeCreate,n,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:u,created:d,beforeMount:h,mounted:f,beforeUpdate:p,updated:g,activated:m,deactivated:w,beforeDestroy:b,beforeUnmount:S,destroyed:C,unmounted:T,render:_,renderTracked:R,renderTriggered:M,errorCaptured:N,serverPrefetch:I,expose:G,inheritAttrs:X,components:z,directives:ot,filters:q}=t;if(u&&MA(u,s,null),o)for(const K in o){const tt=o[K];Bt(tt)&&(s[K]=tt.bind(e))}if(i){const K=i.call(e,e);ge(K)&&(n.data=Xd(K))}if(Bp=!0,r)for(const K in r){const tt=r[K],Ct=Bt(tt)?tt.bind(e,e):Bt(tt.get)?tt.get.bind(e,e):Ri,vt=!Bt(tt)&&Bt(tt.set)?tt.set.bind(e):Ri,Mt=Wt({get:Ct,set:vt});Object.defineProperty(s,K,{enumerable:!0,configurable:!0,get:()=>Mt.value,set:Rt=>Mt.value=Rt})}if(a)for(const K in a)T1(a[K],s,e,K);if(l){const K=Bt(l)?l.call(e):l;Reflect.ownKeys(K).forEach(tt=>{ph(tt,K[tt])})}d&&dm(d,n,"c");function U(K,tt){Lt(tt)?tt.forEach(Ct=>K(Ct.bind(e))):tt&&K(tt.bind(e))}if(U(AA,h),U(Js,f),U(xA,p),U(C1,g),U(yA,m),U(bA,w),U(_A,N),U(CA,R),U(EA,M),U(Ev,S),U(Ka,T),U(SA,I),Lt(G))if(G.length){const K=n.exposed||(n.exposed={});G.forEach(tt=>{Object.defineProperty(K,tt,{get:()=>e[tt],set:Ct=>e[tt]=Ct,enumerable:!0})})}else n.exposed||(n.exposed={});_&&n.render===Ri&&(n.render=_),X!=null&&(n.inheritAttrs=X),z&&(n.components=z),ot&&(n.directives=ot),I&&S1(n)}function MA(n,t,e=Ri){Lt(n)&&(n=jp(n));for(const s in n){const i=n[s];let r;ge(i)?"default"in i?r=Pn(i.from||s,i.default,!0):r=Pn(i.from||s):r=Pn(i),Ie(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function dm(n,t,e){ei(Lt(n)?n.map(s=>s.bind(t.proxy)):n.bind(t.proxy),t,e)}function T1(n,t,e,s){let i=s.includes(".")?f1(e,s):()=>e[s];if(Me(n)){const r=t[n];Bt(r)&&hs(i,r)}else if(Bt(n))hs(i,n.bind(e));else if(ge(n))if(Lt(n))n.forEach(r=>T1(r,t,e,s));else{const r=Bt(n.handler)?n.handler.bind(e):t[n.handler];Bt(r)&&hs(i,r,n)}}function P1(n){const t=n.type,{mixins:e,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,a=r.get(t);let l;return a?l=a:!i.length&&!e&&!s?l=t:(l={},i.length&&i.forEach(u=>tf(l,u,o,!0)),tf(l,t,o)),ge(t)&&r.set(t,l),l}function tf(n,t,e,s=!1){const{mixins:i,extends:r}=t;r&&tf(n,r,e,!0),i&&i.forEach(o=>tf(n,o,e,!0));for(const o in t)if(!(s&&o==="expose")){const a=LA[o]||e&&e[o];n[o]=a?a(n[o],t[o]):t[o]}return n}const LA={data:hm,props:fm,emits:fm,methods:Fc,computed:Fc,beforeCreate:Ps,created:Ps,beforeMount:Ps,mounted:Ps,beforeUpdate:Ps,updated:Ps,beforeDestroy:Ps,beforeUnmount:Ps,destroyed:Ps,unmounted:Ps,activated:Ps,deactivated:Ps,errorCaptured:Ps,serverPrefetch:Ps,components:Fc,directives:Fc,watch:DA,provide:hm,inject:OA};function hm(n,t){return t?n?function(){return He(Bt(n)?n.call(this,this):n,Bt(t)?t.call(this,this):t)}:t:n}function OA(n,t){return Fc(jp(n),jp(t))}function jp(n){if(Lt(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function Ps(n,t){return n?[...new Set([].concat(n,t))]:t}function Fc(n,t){return n?He(Object.create(null),n,t):t}function fm(n,t){return n?Lt(n)&&Lt(t)?[...new Set([...n,...t])]:He(Object.create(null),um(n),um(t??{})):t}function DA(n,t){if(!n)return t;if(!t)return n;const e=He(Object.create(null),n);for(const s in t)e[s]=Ps(n[s],t[s]);return e}function R1(){return{app:null,config:{isNativeTag:L0,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let NA=0;function FA(n,t){return function(s,i=null){Bt(s)||(s=He({},s)),i!=null&&!ge(i)&&(i=null);const r=R1(),o=new WeakSet,a=[];let l=!1;const u=r.app={_uid:NA++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:g2,get config(){return r.config},set config(d){},use(d,...h){return o.has(d)||(d&&Bt(d.install)?(o.add(d),d.install(u,...h)):Bt(d)&&(o.add(d),d(u,...h))),u},mixin(d){return r.mixins.includes(d)||r.mixins.push(d),u},component(d,h){return h?(r.components[d]=h,u):r.components[d]},directive(d,h){return h?(r.directives[d]=h,u):r.directives[d]},mount(d,h,f){if(!l){const p=u._ceVNode||Nt(s,i);return p.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),n(p,d,f),l=!0,u._container=d,d.__vue_app__=u,Kf(p.component)}},onUnmount(d){a.push(d)},unmount(){l&&(ei(a,u._instance,16),n(null,u._container),delete u._container.__vue_app__)},provide(d,h){return r.provides[d]=h,u},runWithContext(d){const h=ja;ja=u;try{return d()}finally{ja=h}}};return u}}let ja=null;const $A=(n,t)=>t==="modelValue"||t==="model-value"?n.modelModifiers:n[`${t}Modifiers`]||n[`${Mn(t)}Modifiers`]||n[`${wo(t)}Modifiers`];function BA(n,t,...e){if(n.isUnmounted)return;const s=n.vnode.props||me;let i=e;const r=t.startsWith("update:"),o=r&&$A(s,t.slice(7));o&&(o.trim&&(i=e.map(d=>Me(d)?d.trim():d)),o.number&&(i=e.map(Ff)));let a,l=s[a=lp(t)]||s[a=lp(Mn(t))];!l&&r&&(l=s[a=lp(wo(t))]),l&&ei(l,n,6,i);const u=s[a+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,ei(u,n,6,i)}}const jA=new WeakMap;function I1(n,t,e=!1){const s=e?jA:t.emitsCache,i=s.get(n);if(i!==void 0)return i;const r=n.emits;let o={},a=!1;if(!Bt(n)){const l=u=>{const d=I1(u,t,!0);d&&(a=!0,He(o,d))};!e&&t.mixins.length&&t.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!r&&!a?(ge(n)&&s.set(n,null),null):(Lt(r)?r.forEach(l=>o[l]=null):He(o,r),ge(n)&&s.set(n,o),o)}function Gf(n,t){return!n||!Lf(t)?!1:(t=t.slice(2).replace(/Once$/,""),ne(n,t[0].toLowerCase()+t.slice(1))||ne(n,wo(t))||ne(n,t))}function pm(n){const{type:t,vnode:e,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:u,renderCache:d,props:h,data:f,setupState:p,ctx:g,inheritAttrs:m}=n,w=Qh(n);let b,S;try{if(e.shapeFlag&4){const T=i||s,_=T;b=Pi(u.call(_,T,d,h,p,f,g)),S=a}else{const T=t;b=Pi(T.length>1?T(h,{attrs:a,slots:o,emit:l}):T(h,null)),S=t.props?a:HA(a)}}catch(T){ou.length=0,Hf(T,n,1),b=Nt(Cs)}let C=b;if(S&&m!==!1){const T=Object.keys(S),{shapeFlag:_}=C;T.length&&_&7&&(r&&T.some(hv)&&(S=UA(S,r)),C=go(C,S,!1,!0))}return e.dirs&&(C=go(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(e.dirs):e.dirs),e.transition&&Ua(C,e.transition),b=C,Qh(w),b}const HA=n=>{let t;for(const e in n)(e==="class"||e==="style"||Lf(e))&&((t||(t={}))[e]=n[e]);return t},UA=(n,t)=>{const e={};for(const s in n)(!hv(s)||!(s.slice(9)in t))&&(e[s]=n[s]);return e};function VA(n,t,e){const{props:s,children:i,component:r}=n,{props:o,children:a,patchFlag:l}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return s?gm(s,o,u):!!o;if(l&8){const d=t.dynamicProps;for(let h=0;h<d.length;h++){const f=d[h];if(o[f]!==s[f]&&!Gf(u,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?gm(s,o,u):!0:!!o;return!1}function gm(n,t,e){const s=Object.keys(t);if(s.length!==Object.keys(n).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==n[r]&&!Gf(e,r))return!0}return!1}function GA({vnode:n,parent:t},e){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===n&&(s.el=n.el),s===n)(n=t.vnode).el=e,t=t.parent;else break}}const M1={},L1=()=>Object.create(M1),O1=n=>Object.getPrototypeOf(n)===M1;function zA(n,t,e,s=!1){const i={},r=L1();n.propsDefaults=Object.create(null),D1(n,t,i,r);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);e?n.props=s?i:i1(i):n.type.props?n.props=i:n.props=r,n.attrs=r}function WA(n,t,e,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=n,a=Zt(i),[l]=n.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const d=n.vnode.dynamicProps;for(let h=0;h<d.length;h++){let f=d[h];if(Gf(n.emitsOptions,f))continue;const p=t[f];if(l)if(ne(r,f))p!==r[f]&&(r[f]=p,u=!0);else{const g=Mn(f);i[g]=Hp(l,a,g,p,n,!1)}else p!==r[f]&&(r[f]=p,u=!0)}}}else{D1(n,t,i,r)&&(u=!0);let d;for(const h in a)(!t||!ne(t,h)&&((d=wo(h))===h||!ne(t,d)))&&(l?e&&(e[h]!==void 0||e[d]!==void 0)&&(i[h]=Hp(l,a,h,void 0,n,!0)):delete i[h]);if(r!==a)for(const h in r)(!t||!ne(t,h))&&(delete r[h],u=!0)}u&&fr(n.attrs,"set","")}function D1(n,t,e,s){const[i,r]=n.propsOptions;let o=!1,a;if(t)for(let l in t){if(tu(l))continue;const u=t[l];let d;i&&ne(i,d=Mn(l))?!r||!r.includes(d)?e[d]=u:(a||(a={}))[d]=u:Gf(n.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,o=!0)}if(r){const l=Zt(e),u=a||me;for(let d=0;d<r.length;d++){const h=r[d];e[h]=Hp(i,l,h,u[h],n,!ne(u,h))}}return o}function Hp(n,t,e,s,i,r){const o=n[e];if(o!=null){const a=ne(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Bt(l)){const{propsDefaults:u}=i;if(e in u)s=u[e];else{const d=Zd(i);s=u[e]=l.call(null,t),d()}}else s=l;i.ce&&i.ce._setProp(e,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===wo(e))&&(s=!0))}return s}const KA=new WeakMap;function N1(n,t,e=!1){const s=e?KA:t.propsCache,i=s.get(n);if(i)return i;const r=n.props,o={},a=[];let l=!1;if(!Bt(n)){const d=h=>{l=!0;const[f,p]=N1(h,t,!0);He(o,f),p&&a.push(...p)};!e&&t.mixins.length&&t.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}if(!r&&!l)return ge(n)&&s.set(n,hl),hl;if(Lt(r))for(let d=0;d<r.length;d++){const h=Mn(r[d]);vm(h)&&(o[h]=me)}else if(r)for(const d in r){const h=Mn(d);if(vm(h)){const f=r[d],p=o[h]=Lt(f)||Bt(f)?{type:f}:He({},f),g=p.type;let m=!1,w=!0;if(Lt(g))for(let b=0;b<g.length;++b){const S=g[b],C=Bt(S)&&S.name;if(C==="Boolean"){m=!0;break}else C==="String"&&(w=!1)}else m=Bt(g)&&g.name==="Boolean";p[0]=m,p[1]=w,(m||ne(p,"default"))&&a.push(h)}}const u=[o,a];return ge(n)&&s.set(n,u),u}function vm(n){return n[0]!=="$"&&!tu(n)}const Cv=n=>n==="_"||n==="_ctx"||n==="$stable",_v=n=>Lt(n)?n.map(Pi):[Pi(n)],XA=(n,t,e)=>{if(t._n)return t;const s=ce((...i)=>_v(t(...i)),e);return s._c=!1,s},F1=(n,t,e)=>{const s=n._ctx;for(const i in n){if(Cv(i))continue;const r=n[i];if(Bt(r))t[i]=XA(i,r,s);else if(r!=null){const o=_v(r);t[i]=()=>o}}},$1=(n,t)=>{const e=_v(t);n.slots.default=()=>e},B1=(n,t,e)=>{for(const s in t)(e||!Cv(s))&&(n[s]=t[s])},YA=(n,t,e)=>{const s=n.slots=L1();if(n.vnode.shapeFlag&32){const i=t._;i?(B1(s,t,e),e&&F0(s,"_",i,!0)):F1(t,s)}else t&&$1(n,t)},JA=(n,t,e)=>{const{vnode:s,slots:i}=n;let r=!0,o=me;if(s.shapeFlag&32){const a=t._;a?e&&a===1?r=!1:B1(i,t,e):(r=!t.$stable,F1(t,i)),o=t}else t&&($1(n,t),o={default:1});if(r)for(const a in i)!Cv(a)&&o[a]==null&&delete i[a]},Ns=e2;function ZA(n){return QA(n)}function QA(n,t){const e=$f();e.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:u,setElementText:d,parentNode:h,nextSibling:f,setScopeId:p=Ri,insertStaticContent:g}=n,m=(k,P,B,Y=null,J=null,Z=null,pt=void 0,ut=null,ht=!!P.dynamicChildren)=>{if(k===P)return;k&&!Io(k,P)&&(Y=L(k),Rt(k,J,Z,!0),k=null),P.patchFlag===-2&&(ht=!1,P.dynamicChildren=null);const{type:rt,ref:_t,shapeFlag:j}=P;switch(rt){case zf:w(k,P,B,Y);break;case Cs:b(k,P,B,Y);break;case vh:k==null&&S(P,B,Y,pt);break;case fe:z(k,P,B,Y,J,Z,pt,ut,ht);break;default:j&1?_(k,P,B,Y,J,Z,pt,ut,ht):j&6?ot(k,P,B,Y,J,Z,pt,ut,ht):(j&64||j&128)&&rt.process(k,P,B,Y,J,Z,pt,ut,ht,dt)}_t!=null&&J?iu(_t,k&&k.ref,Z,P||k,!P):_t==null&&k&&k.ref!=null&&iu(k.ref,null,Z,k,!0)},w=(k,P,B,Y)=>{if(k==null)s(P.el=a(P.children),B,Y);else{const J=P.el=k.el;P.children!==k.children&&u(J,P.children)}},b=(k,P,B,Y)=>{k==null?s(P.el=l(P.children||""),B,Y):P.el=k.el},S=(k,P,B,Y)=>{[k.el,k.anchor]=g(k.children,P,B,Y,k.el,k.anchor)},C=({el:k,anchor:P},B,Y)=>{let J;for(;k&&k!==P;)J=f(k),s(k,B,Y),k=J;s(P,B,Y)},T=({el:k,anchor:P})=>{let B;for(;k&&k!==P;)B=f(k),i(k),k=B;i(P)},_=(k,P,B,Y,J,Z,pt,ut,ht)=>{if(P.type==="svg"?pt="svg":P.type==="math"&&(pt="mathml"),k==null)R(P,B,Y,J,Z,pt,ut,ht);else{const rt=k.el&&k.el._isVueCE?k.el:null;try{rt&&rt._beginPatch(),I(k,P,J,Z,pt,ut,ht)}finally{rt&&rt._endPatch()}}},R=(k,P,B,Y,J,Z,pt,ut)=>{let ht,rt;const{props:_t,shapeFlag:j,transition:H,dirs:$}=k;if(ht=k.el=o(k.type,Z,_t&&_t.is,_t),j&8?d(ht,k.children):j&16&&N(k.children,ht,null,Y,J,gp(k,Z),pt,ut),$&&Eo(k,null,Y,"created"),M(ht,k,k.scopeId,pt,Y),_t){for(const V in _t)V!=="value"&&!tu(V)&&r(ht,V,null,_t[V],Z,Y);"value"in _t&&r(ht,"value",null,_t.value,Z),(rt=_t.onVnodeBeforeMount)&&ri(rt,Y,k)}$&&Eo(k,null,Y,"beforeMount");const st=qA(J,H);st&&H.beforeEnter(ht),s(ht,P,B),((rt=_t&&_t.onVnodeMounted)||st||$)&&Ns(()=>{rt&&ri(rt,Y,k),st&&H.enter(ht),$&&Eo(k,null,Y,"mounted")},J)},M=(k,P,B,Y,J)=>{if(B&&p(k,B),Y)for(let Z=0;Z<Y.length;Z++)p(k,Y[Z]);if(J){let Z=J.subTree;if(P===Z||U1(Z.type)&&(Z.ssContent===P||Z.ssFallback===P)){const pt=J.vnode;M(k,pt,pt.scopeId,pt.slotScopeIds,J.parent)}}},N=(k,P,B,Y,J,Z,pt,ut,ht=0)=>{for(let rt=ht;rt<k.length;rt++){const _t=k[rt]=ut?Lr(k[rt]):Pi(k[rt]);m(null,_t,P,B,Y,J,Z,pt,ut)}},I=(k,P,B,Y,J,Z,pt)=>{const ut=P.el=k.el;let{patchFlag:ht,dynamicChildren:rt,dirs:_t}=P;ht|=k.patchFlag&16;const j=k.props||me,H=P.props||me;let $;if(B&&Co(B,!1),($=H.onVnodeBeforeUpdate)&&ri($,B,P,k),_t&&Eo(P,k,B,"beforeUpdate"),B&&Co(B,!0),(j.innerHTML&&H.innerHTML==null||j.textContent&&H.textContent==null)&&d(ut,""),rt?G(k.dynamicChildren,rt,ut,B,Y,gp(P,J),Z):pt||tt(k,P,ut,null,B,Y,gp(P,J),Z,!1),ht>0){if(ht&16)X(ut,j,H,B,J);else if(ht&2&&j.class!==H.class&&r(ut,"class",null,H.class,J),ht&4&&r(ut,"style",j.style,H.style,J),ht&8){const st=P.dynamicProps;for(let V=0;V<st.length;V++){const E=st[V],yt=j[E],wt=H[E];(wt!==yt||E==="value")&&r(ut,E,yt,wt,J,B)}}ht&1&&k.children!==P.children&&d(ut,P.children)}else!pt&&rt==null&&X(ut,j,H,B,J);(($=H.onVnodeUpdated)||_t)&&Ns(()=>{$&&ri($,B,P,k),_t&&Eo(P,k,B,"updated")},Y)},G=(k,P,B,Y,J,Z,pt)=>{for(let ut=0;ut<P.length;ut++){const ht=k[ut],rt=P[ut],_t=ht.el&&(ht.type===fe||!Io(ht,rt)||ht.shapeFlag&198)?h(ht.el):B;m(ht,rt,_t,null,Y,J,Z,pt,!0)}},X=(k,P,B,Y,J)=>{if(P!==B){if(P!==me)for(const Z in P)!tu(Z)&&!(Z in B)&&r(k,Z,P[Z],null,J,Y);for(const Z in B){if(tu(Z))continue;const pt=B[Z],ut=P[Z];pt!==ut&&Z!=="value"&&r(k,Z,ut,pt,J,Y)}"value"in B&&r(k,"value",P.value,B.value,J)}},z=(k,P,B,Y,J,Z,pt,ut,ht)=>{const rt=P.el=k?k.el:a(""),_t=P.anchor=k?k.anchor:a("");let{patchFlag:j,dynamicChildren:H,slotScopeIds:$}=P;$&&(ut=ut?ut.concat($):$),k==null?(s(rt,B,Y),s(_t,B,Y),N(P.children||[],B,_t,J,Z,pt,ut,ht)):j>0&&j&64&&H&&k.dynamicChildren&&k.dynamicChildren.length===H.length?(G(k.dynamicChildren,H,B,J,Z,pt,ut),(P.key!=null||J&&P===J.subTree)&&kv(k,P,!0)):tt(k,P,B,_t,J,Z,pt,ut,ht)},ot=(k,P,B,Y,J,Z,pt,ut,ht)=>{P.slotScopeIds=ut,k==null?P.shapeFlag&512?J.ctx.activate(P,B,Y,pt,ht):q(P,B,Y,J,Z,pt,ht):nt(k,P,ht)},q=(k,P,B,Y,J,Z,pt)=>{const ut=k.component=l2(k,Y,J);if(Uf(k)&&(ut.ctx.renderer=dt),c2(ut,!1,pt),ut.asyncDep){if(J&&J.registerDep(ut,U,pt),!k.el){const ht=ut.subTree=Nt(Cs);b(null,ht,P,B),k.placeholder=ht.el}}else U(ut,k,P,B,J,Z,pt)},nt=(k,P,B)=>{const Y=P.component=k.component;if(VA(k,P,B))if(Y.asyncDep&&!Y.asyncResolved){K(Y,P,B);return}else Y.next=P,Y.update();else P.el=k.el,Y.vnode=P},U=(k,P,B,Y,J,Z,pt)=>{const ut=()=>{if(k.isMounted){let{next:j,bu:H,u:$,parent:st,vnode:V}=k;{const Et=j1(k);if(Et){j&&(j.el=V.el,K(k,j,pt)),Et.asyncDep.then(()=>{k.isUnmounted||ut()});return}}let E=j,yt;Co(k,!1),j?(j.el=V.el,K(k,j,pt)):j=V,H&&fh(H),(yt=j.props&&j.props.onVnodeBeforeUpdate)&&ri(yt,st,j,V),Co(k,!0);const wt=pm(k),Dt=k.subTree;k.subTree=wt,m(Dt,wt,h(Dt.el),L(Dt),k,J,Z),j.el=wt.el,E===null&&GA(k,wt.el),$&&Ns($,J),(yt=j.props&&j.props.onVnodeUpdated)&&Ns(()=>ri(yt,st,j,V),J)}else{let j;const{el:H,props:$}=P,{bm:st,m:V,parent:E,root:yt,type:wt}=k,Dt=gl(P);Co(k,!1),st&&fh(st),!Dt&&(j=$&&$.onVnodeBeforeMount)&&ri(j,E,P),Co(k,!0);{yt.ce&&yt.ce._def.shadowRoot!==!1&&yt.ce._injectChildStyle(wt);const Et=k.subTree=pm(k);m(null,Et,B,Y,k,J,Z),P.el=Et.el}if(V&&Ns(V,J),!Dt&&(j=$&&$.onVnodeMounted)){const Et=P;Ns(()=>ri(j,E,Et),J)}(P.shapeFlag&256||E&&gl(E.vnode)&&E.vnode.shapeFlag&256)&&k.a&&Ns(k.a,J),k.isMounted=!0,P=B=Y=null}};k.scope.on();const ht=k.effect=new G0(ut);k.scope.off();const rt=k.update=ht.run.bind(ht),_t=k.job=ht.runIfDirty.bind(ht);_t.i=k,_t.id=k.uid,ht.scheduler=()=>xv(_t),Co(k,!0),rt()},K=(k,P,B)=>{P.component=k;const Y=k.vnode.props;k.vnode=P,k.next=null,WA(k,P.props,Y,B),JA(k,P.children,B),wr(),sm(k),Ar()},tt=(k,P,B,Y,J,Z,pt,ut,ht=!1)=>{const rt=k&&k.children,_t=k?k.shapeFlag:0,j=P.children,{patchFlag:H,shapeFlag:$}=P;if(H>0){if(H&128){vt(rt,j,B,Y,J,Z,pt,ut,ht);return}else if(H&256){Ct(rt,j,B,Y,J,Z,pt,ut,ht);return}}$&8?(_t&16&&lt(rt,J,Z),j!==rt&&d(B,j)):_t&16?$&16?vt(rt,j,B,Y,J,Z,pt,ut,ht):lt(rt,J,Z,!0):(_t&8&&d(B,""),$&16&&N(j,B,Y,J,Z,pt,ut,ht))},Ct=(k,P,B,Y,J,Z,pt,ut,ht)=>{k=k||hl,P=P||hl;const rt=k.length,_t=P.length,j=Math.min(rt,_t);let H;for(H=0;H<j;H++){const $=P[H]=ht?Lr(P[H]):Pi(P[H]);m(k[H],$,B,null,J,Z,pt,ut,ht)}rt>_t?lt(k,J,Z,!0,!1,j):N(P,B,Y,J,Z,pt,ut,ht,j)},vt=(k,P,B,Y,J,Z,pt,ut,ht)=>{let rt=0;const _t=P.length;let j=k.length-1,H=_t-1;for(;rt<=j&&rt<=H;){const $=k[rt],st=P[rt]=ht?Lr(P[rt]):Pi(P[rt]);if(Io($,st))m($,st,B,null,J,Z,pt,ut,ht);else break;rt++}for(;rt<=j&&rt<=H;){const $=k[j],st=P[H]=ht?Lr(P[H]):Pi(P[H]);if(Io($,st))m($,st,B,null,J,Z,pt,ut,ht);else break;j--,H--}if(rt>j){if(rt<=H){const $=H+1,st=$<_t?P[$].el:Y;for(;rt<=H;)m(null,P[rt]=ht?Lr(P[rt]):Pi(P[rt]),B,st,J,Z,pt,ut,ht),rt++}}else if(rt>H)for(;rt<=j;)Rt(k[rt],J,Z,!0),rt++;else{const $=rt,st=rt,V=new Map;for(rt=st;rt<=H;rt++){const Ht=P[rt]=ht?Lr(P[rt]):Pi(P[rt]);Ht.key!=null&&V.set(Ht.key,rt)}let E,yt=0;const wt=H-st+1;let Dt=!1,Et=0;const re=new Array(wt);for(rt=0;rt<wt;rt++)re[rt]=0;for(rt=$;rt<=j;rt++){const Ht=k[rt];if(yt>=wt){Rt(Ht,J,Z,!0);continue}let ve;if(Ht.key!=null)ve=V.get(Ht.key);else for(E=st;E<=H;E++)if(re[E-st]===0&&Io(Ht,P[E])){ve=E;break}ve===void 0?Rt(Ht,J,Z,!0):(re[ve-st]=rt+1,ve>=Et?Et=ve:Dt=!0,m(Ht,P[ve],B,null,J,Z,pt,ut,ht),yt++)}const is=Dt?t2(re):hl;for(E=is.length-1,rt=wt-1;rt>=0;rt--){const Ht=st+rt,ve=P[Ht],ft=P[Ht+1],Ve=Ht+1<_t?ft.el||H1(ft):Y;re[rt]===0?m(null,ve,B,Ve,J,Z,pt,ut,ht):Dt&&(E<0||rt!==is[E]?Mt(ve,B,Ve,2):E--)}}},Mt=(k,P,B,Y,J=null)=>{const{el:Z,type:pt,transition:ut,children:ht,shapeFlag:rt}=k;if(rt&6){Mt(k.component.subTree,P,B,Y);return}if(rt&128){k.suspense.move(P,B,Y);return}if(rt&64){pt.move(k,P,B,dt);return}if(pt===fe){s(Z,P,B);for(let j=0;j<ht.length;j++)Mt(ht[j],P,B,Y);s(k.anchor,P,B);return}if(pt===vh){C(k,P,B);return}if(Y!==2&&rt&1&&ut)if(Y===0)ut.beforeEnter(Z),s(Z,P,B),Ns(()=>ut.enter(Z),J);else{const{leave:j,delayLeave:H,afterLeave:$}=ut,st=()=>{k.ctx.isUnmounted?i(Z):s(Z,P,B)},V=()=>{Z._isLeaving&&Z[Hi](!0),j(Z,()=>{st(),$&&$()})};H?H(Z,st,V):V()}else s(Z,P,B)},Rt=(k,P,B,Y=!1,J=!1)=>{const{type:Z,props:pt,ref:ut,children:ht,dynamicChildren:rt,shapeFlag:_t,patchFlag:j,dirs:H,cacheIndex:$}=k;if(j===-2&&(J=!1),ut!=null&&(wr(),iu(ut,null,B,k,!0),Ar()),$!=null&&(P.renderCache[$]=void 0),_t&256){P.ctx.deactivate(k);return}const st=_t&1&&H,V=!gl(k);let E;if(V&&(E=pt&&pt.onVnodeBeforeUnmount)&&ri(E,P,k),_t&6)ie(k.component,B,Y);else{if(_t&128){k.suspense.unmount(B,Y);return}st&&Eo(k,null,P,"beforeUnmount"),_t&64?k.type.remove(k,P,B,dt,Y):rt&&!rt.hasOnce&&(Z!==fe||j>0&&j&64)?lt(rt,P,B,!1,!0):(Z===fe&&j&384||!J&&_t&16)&&lt(ht,P,B),Y&&Vt(k)}(V&&(E=pt&&pt.onVnodeUnmounted)||st)&&Ns(()=>{E&&ri(E,P,k),st&&Eo(k,null,P,"unmounted")},B)},Vt=k=>{const{type:P,el:B,anchor:Y,transition:J}=k;if(P===fe){It(B,Y);return}if(P===vh){T(k);return}const Z=()=>{i(B),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(k.shapeFlag&1&&J&&!J.persisted){const{leave:pt,delayLeave:ut}=J,ht=()=>pt(B,Z);ut?ut(k.el,Z,ht):ht()}else Z()},It=(k,P)=>{let B;for(;k!==P;)B=f(k),i(k),k=B;i(P)},ie=(k,P,B)=>{const{bum:Y,scope:J,job:Z,subTree:pt,um:ut,m:ht,a:rt}=k;mm(ht),mm(rt),Y&&fh(Y),J.stop(),Z&&(Z.flags|=8,Rt(pt,k,P,B)),ut&&Ns(ut,P),Ns(()=>{k.isUnmounted=!0},P)},lt=(k,P,B,Y=!1,J=!1,Z=0)=>{for(let pt=Z;pt<k.length;pt++)Rt(k[pt],P,B,Y,J)},L=k=>{if(k.shapeFlag&6)return L(k.component.subTree);if(k.shapeFlag&128)return k.suspense.next();const P=f(k.anchor||k.el),B=P&&P[p1];return B?f(B):P};let W=!1;const Q=(k,P,B)=>{let Y;k==null?P._vnode&&(Rt(P._vnode,null,null,!0),Y=P._vnode.component):m(P._vnode||null,k,P,null,null,null,B),P._vnode=k,W||(W=!0,sm(Y),c1(),W=!1)},dt={p:m,um:Rt,m:Mt,r:Vt,mt:q,mc:N,pc:tt,pbc:G,n:L,o:n};return{render:Q,hydrate:void 0,createApp:FA(Q)}}function gp({type:n,props:t},e){return e==="svg"&&n==="foreignObject"||e==="mathml"&&n==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function Co({effect:n,job:t},e){e?(n.flags|=32,t.flags|=4):(n.flags&=-33,t.flags&=-5)}function qA(n,t){return(!n||n&&!n.pendingBranch)&&t&&!t.persisted}function kv(n,t,e=!1){const s=n.children,i=t.children;if(Lt(s)&&Lt(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=Lr(i[r]),a.el=o.el),!e&&a.patchFlag!==-2&&kv(o,a)),a.type===zf&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=r+(n.type===fe?1:0)),a.type===Cs&&!a.el&&(a.el=o.el)}}function t2(n){const t=n.slice(),e=[0];let s,i,r,o,a;const l=n.length;for(s=0;s<l;s++){const u=n[s];if(u!==0){if(i=e[e.length-1],n[i]<u){t[s]=i,e.push(s);continue}for(r=0,o=e.length-1;r<o;)a=r+o>>1,n[e[a]]<u?r=a+1:o=a;u<n[e[r]]&&(r>0&&(t[s]=e[r-1]),e[r]=s)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}function j1(n){const t=n.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:j1(t)}function mm(n){if(n)for(let t=0;t<n.length;t++)n[t].flags|=8}function H1(n){if(n.placeholder)return n.placeholder;const t=n.component;return t?H1(t.subTree):null}const U1=n=>n.__isSuspense;function e2(n,t){t&&t.pendingBranch?Lt(n)?t.effects.push(...n):t.effects.push(n):uA(n)}const fe=Symbol.for("v-fgt"),zf=Symbol.for("v-txt"),Cs=Symbol.for("v-cmt"),vh=Symbol.for("v-stc"),ou=[];let pn=null;function O(n=!1){ou.push(pn=n?null:[])}function s2(){ou.pop(),pn=ou[ou.length-1]||null}let gu=1;function ef(n,t=!1){gu+=n,n<0&&pn&&t&&(pn.hasOnce=!0)}function V1(n){return n.dynamicChildren=gu>0?pn||hl:null,s2(),gu>0&&pn&&pn.push(n),n}function F(n,t,e,s,i,r){return V1(v(n,t,e,s,i,r,!0))}function Ye(n,t,e,s,i){return V1(Nt(n,t,e,s,i,!0))}function vu(n){return n?n.__v_isVNode===!0:!1}function Io(n,t){return n.type===t.type&&n.key===t.key}const G1=({key:n})=>n??null,mh=({ref:n,ref_key:t,ref_for:e})=>(typeof n=="number"&&(n=""+n),n!=null?Me(n)||Ie(n)||Bt(n)?{i:ds,r:n,k:t,f:!!e}:n:null);function v(n,t=null,e=null,s=0,i=null,r=n===fe?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&G1(t),ref:t&&mh(t),scopeId:d1,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ds};return a?(Tv(l,e),r&128&&n.normalize(l)):e&&(l.shapeFlag|=Me(e)?8:16),gu>0&&!o&&pn&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&pn.push(l),l}const Nt=n2;function n2(n,t=null,e=null,s=0,i=null,r=!1){if((!n||n===TA)&&(n=Cs),vu(n)){const a=go(n,t,!0);return e&&Tv(a,e),gu>0&&!r&&pn&&(a.shapeFlag&6?pn[pn.indexOf(n)]=a:pn.push(a)),a.patchFlag=-2,a}if(p2(n)&&(n=n.__vccOpts),t){t=i2(t);let{class:a,style:l}=t;a&&!Me(a)&&(t.class=jt(a)),ge(l)&&(jf(l)&&!Lt(l)&&(l=He({},l)),t.style=Ss(l))}const o=Me(n)?1:U1(n)?128:g1(n)?64:ge(n)?4:Bt(n)?2:0;return v(n,t,e,s,i,o,r,!0)}function i2(n){return n?jf(n)||O1(n)?He({},n):n:null}function go(n,t,e=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=n,u=t?r2(i||{},t):i,d={__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&G1(u),ref:t&&t.ref?e&&r?Lt(r)?r.concat(mh(t)):[r,mh(t)]:mh(t):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==fe?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&go(n.ssContent),ssFallback:n.ssFallback&&go(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&s&&Ua(d,l.clone(d)),d}function de(n=" ",t=0){return Nt(zf,null,n,t)}function $e(n,t){const e=Nt(vh,null,n);return e.staticCount=t,e}function gt(n="",t=!1){return t?(O(),Ye(Cs,null,n)):Nt(Cs,null,n)}function Pi(n){return n==null||typeof n=="boolean"?Nt(Cs):Lt(n)?Nt(fe,null,n.slice()):vu(n)?Lr(n):Nt(zf,null,String(n))}function Lr(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:go(n)}function Tv(n,t){let e=0;const{shapeFlag:s}=n;if(t==null)t=null;else if(Lt(t))e=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),Tv(n,i()),i._c&&(i._d=!0));return}else{e=32;const i=t._;!i&&!O1(t)?t._ctx=ds:i===3&&ds&&(ds.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else Bt(t)?(t={default:t,_ctx:ds},e=32):(t=String(t),s&64?(e=16,t=[de(t)]):e=8);n.children=t,n.shapeFlag|=e}function r2(...n){const t={};for(let e=0;e<n.length;e++){const s=n[e];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=jt([t.class,s.class]));else if(i==="style")t.style=Ss([t.style,s.style]);else if(Lf(i)){const r=t[i],o=s[i];o&&r!==o&&!(Lt(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function ri(n,t,e,s=null){ei(n,t,7,[e,s])}const o2=R1();let a2=0;function l2(n,t,e){const s=n.type,i=(t?t.appContext:n.appContext)||o2,r={uid:a2++,vnode:n,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new H0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:N1(s,i),emitsOptions:I1(s,i),emit:null,emitted:null,propsDefaults:me,inheritAttrs:s.inheritAttrs,ctx:me,data:me,props:me,attrs:me,slots:me,refs:me,setupState:me,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=BA.bind(null,r),n.ce&&n.ce(r),r}let _s=null;const Wf=()=>_s||ds;let sf,Up;{const n=$f(),t=(e,s)=>{let i;return(i=n[e])||(i=n[e]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};sf=t("__VUE_INSTANCE_SETTERS__",e=>_s=e),Up=t("__VUE_SSR_SETTERS__",e=>mu=e)}const Zd=n=>{const t=_s;return sf(n),n.scope.on(),()=>{n.scope.off(),sf(t)}},ym=()=>{_s&&_s.scope.off(),sf(null)};function z1(n){return n.vnode.shapeFlag&4}let mu=!1;function c2(n,t=!1,e=!1){t&&Up(t);const{props:s,children:i}=n.vnode,r=z1(n);zA(n,s,r,t),YA(n,i,e||t);const o=r?u2(n,t):void 0;return t&&Up(!1),o}function u2(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,RA);const{setup:s}=e;if(s){wr();const i=n.setupContext=s.length>1?h2(n):null,r=Zd(n),o=Yd(s,n,0,[n.props,i]),a=O0(o);if(Ar(),r(),(a||n.sp)&&!gl(n)&&S1(n),a){if(o.then(ym,ym),t)return o.then(l=>{bm(n,l)}).catch(l=>{Hf(l,n,0)});n.asyncDep=o}else bm(n,o)}else W1(n)}function bm(n,t,e){Bt(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:ge(t)&&(n.setupState=o1(t)),W1(n)}function W1(n,t,e){const s=n.type;n.render||(n.render=s.render||Ri);{const i=Zd(n);wr();try{IA(n)}finally{Ar(),i()}}}const d2={get(n,t){return Es(n,"get",""),n[t]}};function h2(n){const t=e=>{n.exposed=e||{}};return{attrs:new Proxy(n.attrs,d2),slots:n.slots,emit:n.emit,expose:t}}function Kf(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(o1(Av(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in ru)return ru[e](n)},has(t,e){return e in t||e in ru}})):n.proxy}function f2(n,t=!0){return Bt(n)?n.displayName||n.name:n.name||t&&n.__name}function p2(n){return Bt(n)&&"__vccOpts"in n}const Wt=(n,t)=>rA(n,t,mu);function Pv(n,t,e){try{ef(-1);const s=arguments.length;return s===2?ge(t)&&!Lt(t)?vu(t)?Nt(n,null,[t]):Nt(n,t):Nt(n,null,t):(s>3?e=Array.prototype.slice.call(arguments,2):s===3&&vu(e)&&(e=[e]),Nt(n,t,e))}finally{ef(1)}}const g2="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vp;const wm=typeof window<"u"&&window.trustedTypes;if(wm)try{Vp=wm.createPolicy("vue",{createHTML:n=>n})}catch{}const K1=Vp?n=>Vp.createHTML(n):n=>n,v2="http://www.w3.org/2000/svg",m2="http://www.w3.org/1998/Math/MathML",$i=typeof document<"u"?document:null,Am=$i&&$i.createElement("template"),y2={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,s)=>{const i=t==="svg"?$i.createElementNS(v2,n):t==="mathml"?$i.createElementNS(m2,n):e?$i.createElement(n,{is:e}):$i.createElement(n);return n==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:n=>$i.createTextNode(n),createComment:n=>$i.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>$i.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,e,s,i,r){const o=e?e.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),e),!(i===r||!(i=i.nextSibling)););else{Am.innerHTML=K1(s==="svg"?`<svg>${n}</svg>`:s==="mathml"?`<math>${n}</math>`:n);const a=Am.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},_r="transition",Rc="animation",Ec=Symbol("_vtc"),X1={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Y1=He({},b1,X1),b2=n=>(n.displayName="Transition",n.props=Y1,n),Jn=b2((n,{slots:t})=>Pv(mA,J1(n),t)),_o=(n,t=[])=>{Lt(n)?n.forEach(e=>e(...t)):n&&n(...t)},xm=n=>n?Lt(n)?n.some(t=>t.length>1):n.length>1:!1;function J1(n){const t={};for(const z in n)z in X1||(t[z]=n[z]);if(n.css===!1)return t;const{name:e="v",type:s,duration:i,enterFromClass:r=`${e}-enter-from`,enterActiveClass:o=`${e}-enter-active`,enterToClass:a=`${e}-enter-to`,appearFromClass:l=r,appearActiveClass:u=o,appearToClass:d=a,leaveFromClass:h=`${e}-leave-from`,leaveActiveClass:f=`${e}-leave-active`,leaveToClass:p=`${e}-leave-to`}=n,g=w2(i),m=g&&g[0],w=g&&g[1],{onBeforeEnter:b,onEnter:S,onEnterCancelled:C,onLeave:T,onLeaveCancelled:_,onBeforeAppear:R=b,onAppear:M=S,onAppearCancelled:N=C}=t,I=(z,ot,q,nt)=>{z._enterCancelled=nt,Tr(z,ot?d:a),Tr(z,ot?u:o),q&&q()},G=(z,ot)=>{z._isLeaving=!1,Tr(z,h),Tr(z,p),Tr(z,f),ot&&ot()},X=z=>(ot,q)=>{const nt=z?M:S,U=()=>I(ot,z,q);_o(nt,[ot,U]),Sm(()=>{Tr(ot,z?l:r),li(ot,z?d:a),xm(nt)||Em(ot,s,m,U)})};return He(t,{onBeforeEnter(z){_o(b,[z]),li(z,r),li(z,o)},onBeforeAppear(z){_o(R,[z]),li(z,l),li(z,u)},onEnter:X(!1),onAppear:X(!0),onLeave(z,ot){z._isLeaving=!0;const q=()=>G(z,ot);li(z,h),z._enterCancelled?(li(z,f),Gp(z)):(Gp(z),li(z,f)),Sm(()=>{z._isLeaving&&(Tr(z,h),li(z,p),xm(T)||Em(z,s,w,q))}),_o(T,[z,q])},onEnterCancelled(z){I(z,!1,void 0,!0),_o(C,[z])},onAppearCancelled(z){I(z,!0,void 0,!0),_o(N,[z])},onLeaveCancelled(z){G(z),_o(_,[z])}})}function w2(n){if(n==null)return null;if(ge(n))return[vp(n.enter),vp(n.leave)];{const t=vp(n);return[t,t]}}function vp(n){return Ew(n)}function li(n,t){t.split(/\s+/).forEach(e=>e&&n.classList.add(e)),(n[Ec]||(n[Ec]=new Set)).add(t)}function Tr(n,t){t.split(/\s+/).forEach(s=>s&&n.classList.remove(s));const e=n[Ec];e&&(e.delete(t),e.size||(n[Ec]=void 0))}function Sm(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let A2=0;function Em(n,t,e,s){const i=n._endId=++A2,r=()=>{i===n._endId&&s()};if(e!=null)return setTimeout(r,e);const{type:o,timeout:a,propCount:l}=Z1(n,t);if(!o)return s();const u=o+"end";let d=0;const h=()=>{n.removeEventListener(u,f),r()},f=p=>{p.target===n&&++d>=l&&h()};setTimeout(()=>{d<l&&h()},a+1),n.addEventListener(u,f)}function Z1(n,t){const e=window.getComputedStyle(n),s=g=>(e[g]||"").split(", "),i=s(`${_r}Delay`),r=s(`${_r}Duration`),o=Cm(i,r),a=s(`${Rc}Delay`),l=s(`${Rc}Duration`),u=Cm(a,l);let d=null,h=0,f=0;t===_r?o>0&&(d=_r,h=o,f=r.length):t===Rc?u>0&&(d=Rc,h=u,f=l.length):(h=Math.max(o,u),d=h>0?o>u?_r:Rc:null,f=d?d===_r?r.length:l.length:0);const p=d===_r&&/\b(?:transform|all)(?:,|$)/.test(s(`${_r}Property`).toString());return{type:d,timeout:h,propCount:f,hasTransform:p}}function Cm(n,t){for(;n.length<t.length;)n=n.concat(n);return Math.max(...t.map((e,s)=>_m(e)+_m(n[s])))}function _m(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function Gp(n){return(n?n.ownerDocument:document).body.offsetHeight}function x2(n,t,e){const s=n[Ec];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}const km=Symbol("_vod"),S2=Symbol("_vsh"),E2=Symbol(""),C2=/(?:^|;)\s*display\s*:/;function _2(n,t,e){const s=n.style,i=Me(e);let r=!1;if(e&&!i){if(t)if(Me(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();e[a]==null&&yh(s,a,"")}else for(const o in t)e[o]==null&&yh(s,o,"");for(const o in e)o==="display"&&(r=!0),yh(s,o,e[o])}else if(i){if(t!==e){const o=s[E2];o&&(e+=";"+o),s.cssText=e,r=C2.test(e)}}else t&&n.removeAttribute("style");km in n&&(n[km]=r?s.display:"",n[S2]&&(s.display="none"))}const Tm=/\s*!important$/;function yh(n,t,e){if(Lt(e))e.forEach(s=>yh(n,t,s));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const s=k2(n,t);Tm.test(e)?n.setProperty(wo(s),e.replace(Tm,""),"important"):n[s]=e}}const Pm=["Webkit","Moz","ms"],mp={};function k2(n,t){const e=mp[t];if(e)return e;let s=Mn(t);if(s!=="filter"&&s in n)return mp[t]=s;s=Nf(s);for(let i=0;i<Pm.length;i++){const r=Pm[i]+s;if(r in n)return mp[t]=r}return t}const Rm="http://www.w3.org/1999/xlink";function Im(n,t,e,s,i,r=Rw(t)){s&&t.startsWith("xlink:")?e==null?n.removeAttributeNS(Rm,t.slice(6,t.length)):n.setAttributeNS(Rm,t,e):e==null||r&&!$0(e)?n.removeAttribute(t):n.setAttribute(t,r?"":qn(e)?String(e):e)}function Mm(n,t,e,s,i){if(t==="innerHTML"||t==="textContent"){e!=null&&(n[t]=t==="innerHTML"?K1(e):e);return}const r=n.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?n.getAttribute("value")||"":n.value,l=e==null?n.type==="checkbox"?"on":"":String(e);(a!==l||!("_value"in n))&&(n.value=l),e==null&&n.removeAttribute(t),n._value=e;return}let o=!1;if(e===""||e==null){const a=typeof n[t];a==="boolean"?e=$0(e):e==null&&a==="string"?(e="",o=!0):a==="number"&&(e=0,o=!0)}try{n[t]=e}catch{}o&&n.removeAttribute(i||t)}function gr(n,t,e,s){n.addEventListener(t,e,s)}function T2(n,t,e,s){n.removeEventListener(t,e,s)}const Lm=Symbol("_vei");function P2(n,t,e,s,i=null){const r=n[Lm]||(n[Lm]={}),o=r[t];if(s&&o)o.value=s;else{const[a,l]=R2(t);if(s){const u=r[t]=L2(s,i);gr(n,a,u,l)}else o&&(T2(n,a,o,l),r[t]=void 0)}}const Om=/(?:Once|Passive|Capture)$/;function R2(n){let t;if(Om.test(n)){t={};let s;for(;s=n.match(Om);)n=n.slice(0,n.length-s[0].length),t[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):wo(n.slice(2)),t]}let yp=0;const I2=Promise.resolve(),M2=()=>yp||(I2.then(()=>yp=0),yp=Date.now());function L2(n,t){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;ei(O2(s,e.value),t,5,[s])};return e.value=n,e.attached=M2(),e}function O2(n,t){if(Lt(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const Dm=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,D2=(n,t,e,s,i,r)=>{const o=i==="svg";t==="class"?x2(n,s,o):t==="style"?_2(n,e,s):Lf(t)?hv(t)||P2(n,t,e,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):N2(n,t,s,o))?(Mm(n,t,s),!n.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Im(n,t,s,o,r,t!=="value")):n._isVueCE&&(/[A-Z]/.test(t)||!Me(s))?Mm(n,Mn(t),s,r,t):(t==="true-value"?n._trueValue=s:t==="false-value"&&(n._falseValue=s),Im(n,t,s,o))};function N2(n,t,e,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in n&&Dm(t)&&Bt(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&n.tagName==="IFRAME"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Dm(t)&&Me(e)?!1:t in n}const Q1=new WeakMap,q1=new WeakMap,nf=Symbol("_moveCb"),Nm=Symbol("_enterCb"),F2=n=>(delete n.props.mode,n),$2=F2({name:"TransitionGroup",props:He({},Y1,{tag:String,moveClass:String}),setup(n,{slots:t}){const e=Wf(),s=y1();let i,r;return C1(()=>{if(!i.length)return;const o=n.moveClass||`${n.name||"v"}-move`;if(!V2(i[0].el,e.vnode.el,o)){i=[];return}i.forEach(j2),i.forEach(H2);const a=i.filter(U2);Gp(e.vnode.el),a.forEach(l=>{const u=l.el,d=u.style;li(u,o),d.transform=d.webkitTransform=d.transitionDuration="";const h=u[nf]=f=>{f&&f.target!==u||(!f||f.propertyName.endsWith("transform"))&&(u.removeEventListener("transitionend",h),u[nf]=null,Tr(u,o))};u.addEventListener("transitionend",h)}),i=[]}),()=>{const o=Zt(n),a=J1(o);let l=o.tag||fe;if(i=[],r)for(let u=0;u<r.length;u++){const d=r[u];d.el&&d.el instanceof Element&&(i.push(d),Ua(d,pu(d,a,s,e)),Q1.set(d,{left:d.el.offsetLeft,top:d.el.offsetTop}))}r=t.default?Sv(t.default()):[];for(let u=0;u<r.length;u++){const d=r[u];d.key!=null&&Ua(d,pu(d,a,s,e))}return Nt(l,null,r)}}}),B2=$2;function j2(n){const t=n.el;t[nf]&&t[nf](),t[Nm]&&t[Nm]()}function H2(n){q1.set(n,{left:n.el.offsetLeft,top:n.el.offsetTop})}function U2(n){const t=Q1.get(n),e=q1.get(n),s=t.left-e.left,i=t.top-e.top;if(s||i){const r=n.el.style;return r.transform=r.webkitTransform=`translate(${s}px,${i}px)`,r.transitionDuration="0s",n}}function V2(n,t,e){const s=n.cloneNode(),i=n[Ec];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&s.classList.remove(l))}),e.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const r=t.nodeType===1?t:t.parentNode;r.appendChild(s);const{hasTransform:o}=Z1(s);return r.removeChild(s),o}const vo=n=>{const t=n.props["onUpdate:modelValue"]||!1;return Lt(t)?e=>fh(t,e):t};function G2(n){n.target.composing=!0}function Fm(n){const t=n.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Rn=Symbol("_assign");function $m(n,t,e){return t&&(n=n.trim()),e&&(n=Ff(n)),n}const $s={created(n,{modifiers:{lazy:t,trim:e,number:s}},i){n[Rn]=vo(i);const r=s||i.props&&i.props.type==="number";gr(n,t?"change":"input",o=>{o.target.composing||n[Rn]($m(n.value,e,r))}),(e||r)&&gr(n,"change",()=>{n.value=$m(n.value,e,r)}),t||(gr(n,"compositionstart",G2),gr(n,"compositionend",Fm),gr(n,"change",Fm))},mounted(n,{value:t}){n.value=t??""},beforeUpdate(n,{value:t,oldValue:e,modifiers:{lazy:s,trim:i,number:r}},o){if(n[Rn]=vo(o),n.composing)return;const a=(r||n.type==="number")&&!/^0\d/.test(n.value)?Ff(n.value):n.value,l=t??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(s&&t===e||i&&n.value.trim()===l)||(n.value=l))}},rf={deep:!0,created(n,t,e){n[Rn]=vo(e),gr(n,"change",()=>{const s=n._modelValue,i=Cc(n),r=n.checked,o=n[Rn];if(Lt(s)){const a=pv(s,i),l=a!==-1;if(r&&!l)o(s.concat(i));else if(!r&&l){const u=[...s];u.splice(a,1),o(u)}}else if(Tc(s)){const a=new Set(s);r?a.add(i):a.delete(i),o(a)}else o(ey(n,r))})},mounted:Bm,beforeUpdate(n,t,e){n[Rn]=vo(e),Bm(n,t,e)}};function Bm(n,{value:t,oldValue:e},s){n._modelValue=t;let i;if(Lt(t))i=pv(t,s.props.value)>-1;else if(Tc(t))i=t.has(s.props.value);else{if(t===e)return;i=Ha(t,ey(n,!0))}n.checked!==i&&(n.checked=i)}const z2={created(n,{value:t},e){n.checked=Ha(t,e.props.value),n[Rn]=vo(e),gr(n,"change",()=>{n[Rn](Cc(n))})},beforeUpdate(n,{value:t,oldValue:e},s){n[Rn]=vo(s),t!==e&&(n.checked=Ha(t,s.props.value))}},ty={deep:!0,created(n,{value:t,modifiers:{number:e}},s){const i=Tc(t);gr(n,"change",()=>{const r=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>e?Ff(Cc(o)):Cc(o));n[Rn](n.multiple?i?new Set(r):r:r[0]),n._assigning=!0,Jd(()=>{n._assigning=!1})}),n[Rn]=vo(s)},mounted(n,{value:t}){jm(n,t)},beforeUpdate(n,t,e){n[Rn]=vo(e)},updated(n,{value:t}){n._assigning||jm(n,t)}};function jm(n,t){const e=n.multiple,s=Lt(t);if(!(e&&!s&&!Tc(t))){for(let i=0,r=n.options.length;i<r;i++){const o=n.options[i],a=Cc(o);if(e)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(u=>String(u)===String(a)):o.selected=pv(t,a)>-1}else o.selected=t.has(a);else if(Ha(Cc(o),t)){n.selectedIndex!==i&&(n.selectedIndex=i);return}}!e&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function Cc(n){return"_value"in n?n._value:n.value}function ey(n,t){const e=t?"_trueValue":"_falseValue";return e in n?n[e]:t}const au={created(n,t,e){ah(n,t,e,null,"created")},mounted(n,t,e){ah(n,t,e,null,"mounted")},beforeUpdate(n,t,e,s){ah(n,t,e,s,"beforeUpdate")},updated(n,t,e,s){ah(n,t,e,s,"updated")}};function W2(n,t){switch(n){case"SELECT":return ty;case"TEXTAREA":return $s;default:switch(t){case"checkbox":return rf;case"radio":return z2;default:return $s}}}function ah(n,t,e,s,i){const o=W2(n.tagName,e.props&&e.props.type)[i];o&&o(n,t,e,s)}const K2=["ctrl","shift","alt","meta"],X2={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,t)=>K2.some(e=>n[`${e}Key`]&&!t.includes(e))},Je=(n,t)=>{const e=n._withMods||(n._withMods={}),s=t.join(".");return e[s]||(e[s]=(i,...r)=>{for(let o=0;o<t.length;o++){const a=X2[t[o]];if(a&&a(i,t))return}return n(i,...r)})},Y2={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ms=(n,t)=>{const e=n._withKeys||(n._withKeys={}),s=t.join(".");return e[s]||(e[s]=i=>{if(!("key"in i))return;const r=wo(i.key);if(t.some(o=>o===r||Y2[o]===r))return n(i)})},J2=He({patchProp:D2},y2);let Hm;function Z2(){return Hm||(Hm=ZA(J2))}const Q2=(...n)=>{const t=Z2().createApp(...n),{mount:e}=t;return t.mount=s=>{const i=tx(s);if(!i)return;const r=t._component;!Bt(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=e(i,!1,q2(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function q2(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function tx(n){return Me(n)?document.querySelector(n):n}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let sy;const Xf=n=>sy=n,ny=Symbol();function zp(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var lu;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(lu||(lu={}));function ex(){const n=U0(!0),t=n.run(()=>et({}));let e=[],s=[];const i=Av({install(r){Xf(i),i._a=r,r.provide(ny,i),r.config.globalProperties.$pinia=i,s.forEach(o=>e.push(o)),s=[]},use(r){return this._a?e.push(r):s.push(r),this},_p:e,_a:null,_e:n,_s:new Map,state:t});return i}const iy=()=>{};function Um(n,t,e,s=iy){n.push(t);const i=()=>{const r=n.indexOf(t);r>-1&&(n.splice(r,1),s())};return!e&&V0()&&Mw(i),i}function Qa(n,...t){n.slice().forEach(e=>{e(...t)})}const sx=n=>n(),Vm=Symbol(),bp=Symbol();function Wp(n,t){n instanceof Map&&t instanceof Map?t.forEach((e,s)=>n.set(s,e)):n instanceof Set&&t instanceof Set&&t.forEach(n.add,n);for(const e in t){if(!t.hasOwnProperty(e))continue;const s=t[e],i=n[e];zp(i)&&zp(s)&&n.hasOwnProperty(e)&&!Ie(s)&&!mr(s)?n[e]=Wp(i,s):n[e]=s}return n}const nx=Symbol();function ix(n){return!zp(n)||!n.hasOwnProperty(nx)}const{assign:Pr}=Object;function rx(n){return!!(Ie(n)&&n.effect)}function ox(n,t,e,s){const{state:i,actions:r,getters:o}=t,a=e.state.value[n];let l;function u(){a||(e.state.value[n]=i?i():{});const d=eA(e.state.value[n]);return Pr(d,r,Object.keys(o||{}).reduce((h,f)=>(h[f]=Av(Wt(()=>{Xf(e);const p=e._s.get(n);return o[f].call(p,p)})),h),{}))}return l=ry(n,u,t,e,s,!0),l}function ry(n,t,e={},s,i,r){let o;const a=Pr({actions:{}},e),l={deep:!0};let u,d,h=[],f=[],p;const g=s.state.value[n];!r&&!g&&(s.state.value[n]={});let m;function w(N){let I;u=d=!1,typeof N=="function"?(N(s.state.value[n]),I={type:lu.patchFunction,storeId:n,events:p}):(Wp(s.state.value[n],N),I={type:lu.patchObject,payload:N,storeId:n,events:p});const G=m=Symbol();Jd().then(()=>{m===G&&(u=!0)}),d=!0,Qa(h,I,s.state.value[n])}const b=r?function(){const{state:I}=e,G=I?I():{};this.$patch(X=>{Pr(X,G)})}:iy;function S(){o.stop(),h=[],f=[],s._s.delete(n)}const C=(N,I="")=>{if(Vm in N)return N[bp]=I,N;const G=function(){Xf(s);const X=Array.from(arguments),z=[],ot=[];function q(K){z.push(K)}function nt(K){ot.push(K)}Qa(f,{args:X,name:G[bp],store:_,after:q,onError:nt});let U;try{U=N.apply(this&&this.$id===n?this:_,X)}catch(K){throw Qa(ot,K),K}return U instanceof Promise?U.then(K=>(Qa(z,K),K)).catch(K=>(Qa(ot,K),Promise.reject(K))):(Qa(z,U),U)};return G[Vm]=!0,G[bp]=I,G},T={_p:s,$id:n,$onAction:Um.bind(null,f),$patch:w,$reset:b,$subscribe(N,I={}){const G=Um(h,N,I.detached,()=>X()),X=o.run(()=>hs(()=>s.state.value[n],z=>{(I.flush==="sync"?d:u)&&N({storeId:n,type:lu.direct,events:p},z)},Pr({},l,I)));return G},$dispose:S},_=Xd(T);s._s.set(n,_);const M=(s._a&&s._a.runWithContext||sx)(()=>s._e.run(()=>(o=U0()).run(()=>t({action:C}))));for(const N in M){const I=M[N];if(Ie(I)&&!rx(I)||mr(I))r||(g&&ix(I)&&(Ie(I)?I.value=g[N]:Wp(I,g[N])),s.state.value[n][N]=I);else if(typeof I=="function"){const G=C(I,N);M[N]=G,a.actions[N]=I}}return Pr(_,M),Pr(Zt(_),M),Object.defineProperty(_,"$state",{get:()=>s.state.value[n],set:N=>{w(I=>{Pr(I,N)})}}),s._p.forEach(N=>{Pr(_,o.run(()=>N({store:_,app:s._a,pinia:s,options:a})))}),g&&r&&e.hydrate&&e.hydrate(_.$state,g),u=!0,d=!0,_}/*! #__NO_SIDE_EFFECTS__ */function ax(n,t,e){let s,i;const r=typeof t=="function";s=n,i=r?e:t;function o(a,l){const u=dA();return a=a||(u?Pn(ny,null):null),a&&Xf(a),a=sy,a._s.has(s)||(r?ry(s,t,i,a):ox(s,i,a)),a._s.get(s)}return o.$id=s,o}const Rv="/icons/favicon.svg";/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const sl=typeof document<"u";function oy(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function lx(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&oy(n.default)}const se=Object.assign;function wp(n,t){const e={};for(const s in t){const i=t[s];e[s]=si(i)?i.map(n):n(i)}return e}const cu=()=>{},si=Array.isArray;function Gm(n,t){const e={};for(const s in n)e[s]=s in t?t[s]:n[s];return e}const ay=/#/g,cx=/&/g,ux=/\//g,dx=/=/g,hx=/\?/g,ly=/\+/g,fx=/%5B/g,px=/%5D/g,cy=/%5E/g,gx=/%60/g,uy=/%7B/g,vx=/%7C/g,dy=/%7D/g,mx=/%20/g;function Iv(n){return n==null?"":encodeURI(""+n).replace(vx,"|").replace(fx,"[").replace(px,"]")}function yx(n){return Iv(n).replace(uy,"{").replace(dy,"}").replace(cy,"^")}function Kp(n){return Iv(n).replace(ly,"%2B").replace(mx,"+").replace(ay,"%23").replace(cx,"%26").replace(gx,"`").replace(uy,"{").replace(dy,"}").replace(cy,"^")}function bx(n){return Kp(n).replace(dx,"%3D")}function wx(n){return Iv(n).replace(ay,"%23").replace(hx,"%3F")}function Ax(n){return wx(n).replace(ux,"%2F")}function yu(n){if(n==null)return null;try{return decodeURIComponent(""+n)}catch{}return""+n}const xx=/\/$/,Sx=n=>n.replace(xx,"");function Ap(n,t,e="/"){let s,i={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(s=t.slice(0,l),r=t.slice(l,a>0?a:t.length),i=n(r.slice(1))),a>=0&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=kx(s??t,e),{fullPath:s+r+o,path:s,query:i,hash:yu(o)}}function Ex(n,t){const e=t.query?n(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function zm(n,t){return!t||!n.toLowerCase().startsWith(t.toLowerCase())?n:n.slice(t.length)||"/"}function Cx(n,t,e){const s=t.matched.length-1,i=e.matched.length-1;return s>-1&&s===i&&_c(t.matched[s],e.matched[i])&&hy(t.params,e.params)&&n(t.query)===n(e.query)&&t.hash===e.hash}function _c(n,t){return(n.aliasOf||n)===(t.aliasOf||t)}function hy(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(var e in n)if(!_x(n[e],t[e]))return!1;return!0}function _x(n,t){return si(n)?Wm(n,t):si(t)?Wm(t,n):(n==null?void 0:n.valueOf())===(t==null?void 0:t.valueOf())}function Wm(n,t){return si(t)?n.length===t.length&&n.every((e,s)=>e===t[s]):n.length===1&&n[0]===t}function kx(n,t){if(n.startsWith("/"))return n;if(!n)return t;const e=t.split("/"),s=n.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=e.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return e.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const kr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Xp=function(n){return n.pop="pop",n.push="push",n}({}),xp=function(n){return n.back="back",n.forward="forward",n.unknown="",n}({});function Tx(n){if(!n)if(sl){const t=document.querySelector("base");n=t&&t.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),Sx(n)}const Px=/^[^#]+#/;function Rx(n,t){return n.replace(Px,"#")+t}function Ix(n,t){const e=document.documentElement.getBoundingClientRect(),s=n.getBoundingClientRect();return{behavior:t.behavior,left:s.left-e.left-(t.left||0),top:s.top-e.top-(t.top||0)}}const Yf=()=>({left:window.scrollX,top:window.scrollY});function Mx(n){let t;if("el"in n){const e=n.el,s=typeof e=="string"&&e.startsWith("#"),i=typeof e=="string"?s?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!i)return;t=Ix(i,n)}else t=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Km(n,t){return(history.state?history.state.position-t:-1)+n}const Yp=new Map;function Lx(n,t){Yp.set(n,t)}function Ox(n){const t=Yp.get(n);return Yp.delete(n),t}function Dx(n){return typeof n=="string"||n&&typeof n=="object"}function fy(n){return typeof n=="string"||typeof n=="symbol"}let Pe=function(n){return n[n.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",n[n.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",n[n.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",n[n.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",n[n.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",n}({});const py=Symbol("");Pe.MATCHER_NOT_FOUND+"",Pe.NAVIGATION_GUARD_REDIRECT+"",Pe.NAVIGATION_ABORTED+"",Pe.NAVIGATION_CANCELLED+"",Pe.NAVIGATION_DUPLICATED+"";function kc(n,t){return se(new Error,{type:n,[py]:!0},t)}function Oi(n,t){return n instanceof Error&&py in n&&(t==null||!!(n.type&t))}const Nx=["params","query","hash"];function Fx(n){if(typeof n=="string")return n;if(n.path!=null)return n.path;const t={};for(const e of Nx)e in n&&(t[e]=n[e]);return JSON.stringify(t,null,2)}function $x(n){const t={};if(n===""||n==="?")return t;const e=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<e.length;++s){const i=e[s].replace(ly," "),r=i.indexOf("="),o=yu(r<0?i:i.slice(0,r)),a=r<0?null:yu(i.slice(r+1));if(o in t){let l=t[o];si(l)||(l=t[o]=[l]),l.push(a)}else t[o]=a}return t}function Xm(n){let t="";for(let e in n){const s=n[e];if(e=bx(e),s==null){s!==void 0&&(t+=(t.length?"&":"")+e);continue}(si(s)?s.map(i=>i&&Kp(i)):[s&&Kp(s)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+e,i!=null&&(t+="="+i))})}return t}function Bx(n){const t={};for(const e in n){const s=n[e];s!==void 0&&(t[e]=si(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const jx=Symbol(""),Ym=Symbol(""),Jf=Symbol(""),Mv=Symbol(""),Jp=Symbol("");function Ic(){let n=[];function t(s){return n.push(s),()=>{const i=n.indexOf(s);i>-1&&n.splice(i,1)}}function e(){n=[]}return{add:t,list:()=>n.slice(),reset:e}}function Or(n,t,e,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const u=f=>{f===!1?l(kc(Pe.NAVIGATION_ABORTED,{from:e,to:t})):f instanceof Error?l(f):Dx(f)?l(kc(Pe.NAVIGATION_GUARD_REDIRECT,{from:t,to:f})):(o&&s.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},d=r(()=>n.call(s&&s.instances[i],t,e,u));let h=Promise.resolve(d);n.length<3&&(h=h.then(u)),h.catch(f=>l(f))})}function Sp(n,t,e,s,i=r=>r()){const r=[];for(const o of n)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(oy(l)){const u=(l.__vccOpts||l)[t];u&&r.push(Or(u,e,s,o,a,i))}else{let u=l();r.push(()=>u.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const h=lx(d)?d.default:d;o.mods[a]=d,o.components[a]=h;const f=(h.__vccOpts||h)[t];return f&&Or(f,e,s,o,a,i)()}))}}return r}function Hx(n,t){const e=[],s=[],i=[],r=Math.max(t.matched.length,n.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(n.matched.find(u=>_c(u,a))?s.push(a):e.push(a));const l=n.matched[o];l&&(t.matched.find(u=>_c(u,l))||i.push(l))}return[e,s,i]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Ux=()=>location.protocol+"//"+location.host;function gy(n,t){const{pathname:e,search:s,hash:i}=t,r=n.indexOf("#");if(r>-1){let o=i.includes(n.slice(r))?n.slice(r).length:1,a=i.slice(o);return a[0]!=="/"&&(a="/"+a),zm(a,"")}return zm(e,n)+s+i}function Vx(n,t,e,s){let i=[],r=[],o=null;const a=({state:f})=>{const p=gy(n,location),g=e.value,m=t.value;let w=0;if(f){if(e.value=p,t.value=f,o&&o===g){o=null;return}w=m?f.position-m.position:0}else s(p);i.forEach(b=>{b(e.value,g,{delta:w,type:Xp.pop,direction:w?w>0?xp.forward:xp.back:xp.unknown})})};function l(){o=e.value}function u(f){i.push(f);const p=()=>{const g=i.indexOf(f);g>-1&&i.splice(g,1)};return r.push(p),p}function d(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(se({},f.state,{scroll:Yf()}),"")}}function h(){for(const f of r)f();r=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:l,listen:u,destroy:h}}function Jm(n,t,e,s=!1,i=!1){return{back:n,current:t,forward:e,replaced:s,position:window.history.length,scroll:i?Yf():null}}function Gx(n){const{history:t,location:e}=window,s={value:gy(n,e)},i={value:t.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,u,d){const h=n.indexOf("#"),f=h>-1?(e.host&&document.querySelector("base")?n:n.slice(h))+l:Ux()+n+l;try{t[d?"replaceState":"pushState"](u,"",f),i.value=u}catch(p){console.error(p),e[d?"replace":"assign"](f)}}function o(l,u){r(l,se({},t.state,Jm(i.value.back,l,i.value.forward,!0),u,{position:i.value.position}),!0),s.value=l}function a(l,u){const d=se({},i.value,t.state,{forward:l,scroll:Yf()});r(d.current,d,!0),r(l,se({},Jm(s.value,l,null),{position:d.position+1},u),!1),s.value=l}return{location:s,state:i,push:a,replace:o}}function zx(n){n=Tx(n);const t=Gx(n),e=Vx(n,t.state,t.location,t.replace);function s(r,o=!0){o||e.pauseListeners(),history.go(r)}const i=se({location:"",base:n,go:s,createHref:Rx.bind(null,n)},t,e);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}let Oo=function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.Group=2]="Group",n}({});var Ge=function(n){return n[n.Static=0]="Static",n[n.Param=1]="Param",n[n.ParamRegExp=2]="ParamRegExp",n[n.ParamRegExpEnd=3]="ParamRegExpEnd",n[n.EscapeNext=4]="EscapeNext",n}(Ge||{});const Wx={type:Oo.Static,value:""},Kx=/[a-zA-Z0-9_]/;function Xx(n){if(!n)return[[]];if(n==="/")return[[Wx]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function t(p){throw new Error(`ERR (${e})/"${u}": ${p}`)}let e=Ge.Static,s=e;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,u="",d="";function h(){u&&(e===Ge.Static?r.push({type:Oo.Static,value:u}):e===Ge.Param||e===Ge.ParamRegExp||e===Ge.ParamRegExpEnd?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:Oo.Param,value:u,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&e!==Ge.ParamRegExp){s=e,e=Ge.EscapeNext;continue}switch(e){case Ge.Static:l==="/"?(u&&h(),o()):l===":"?(h(),e=Ge.Param):f();break;case Ge.EscapeNext:f(),e=s;break;case Ge.Param:l==="("?e=Ge.ParamRegExp:Kx.test(l)?f():(h(),e=Ge.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case Ge.ParamRegExp:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:e=Ge.ParamRegExpEnd:d+=l;break;case Ge.ParamRegExpEnd:h(),e=Ge.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:t("Unknown state");break}}return e===Ge.ParamRegExp&&t(`Unfinished custom RegExp for param "${u}"`),h(),o(),i}const Zm="[^/]+?",Yx={sensitive:!1,strict:!1,start:!0,end:!0};var Fs=function(n){return n[n._multiplier=10]="_multiplier",n[n.Root=90]="Root",n[n.Segment=40]="Segment",n[n.SubSegment=30]="SubSegment",n[n.Static=40]="Static",n[n.Dynamic=20]="Dynamic",n[n.BonusCustomRegExp=10]="BonusCustomRegExp",n[n.BonusWildcard=-50]="BonusWildcard",n[n.BonusRepeatable=-20]="BonusRepeatable",n[n.BonusOptional=-8]="BonusOptional",n[n.BonusStrict=.7000000000000001]="BonusStrict",n[n.BonusCaseSensitive=.25]="BonusCaseSensitive",n}(Fs||{});const Jx=/[.+*?^${}()[\]/\\]/g;function Zx(n,t){const e=se({},Yx,t),s=[];let i=e.start?"^":"";const r=[];for(const u of n){const d=u.length?[]:[Fs.Root];e.strict&&!u.length&&(i+="/");for(let h=0;h<u.length;h++){const f=u[h];let p=Fs.Segment+(e.sensitive?Fs.BonusCaseSensitive:0);if(f.type===Oo.Static)h||(i+="/"),i+=f.value.replace(Jx,"\\$&"),p+=Fs.Static;else if(f.type===Oo.Param){const{value:g,repeatable:m,optional:w,regexp:b}=f;r.push({name:g,repeatable:m,optional:w});const S=b||Zm;if(S!==Zm){p+=Fs.BonusCustomRegExp;try{`${S}`}catch(T){throw new Error(`Invalid custom RegExp for param "${g}" (${S}): `+T.message)}}let C=m?`((?:${S})(?:/(?:${S}))*)`:`(${S})`;h||(C=w&&u.length<2?`(?:/${C})`:"/"+C),w&&(C+="?"),i+=C,p+=Fs.Dynamic,w&&(p+=Fs.BonusOptional),m&&(p+=Fs.BonusRepeatable),S===".*"&&(p+=Fs.BonusWildcard)}d.push(p)}s.push(d)}if(e.strict&&e.end){const u=s.length-1;s[u][s[u].length-1]+=Fs.BonusStrict}e.strict||(i+="/?"),e.end?i+="$":e.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,e.sensitive?"":"i");function a(u){const d=u.match(o),h={};if(!d)return null;for(let f=1;f<d.length;f++){const p=d[f]||"",g=r[f-1];h[g.name]=p&&g.repeatable?p.split("/"):p}return h}function l(u){let d="",h=!1;for(const f of n){(!h||!d.endsWith("/"))&&(d+="/"),h=!1;for(const p of f)if(p.type===Oo.Static)d+=p.value;else if(p.type===Oo.Param){const{value:g,repeatable:m,optional:w}=p,b=g in u?u[g]:"";if(si(b)&&!m)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const S=si(b)?b.join("/"):b;if(!S)if(w)f.length<2&&(d.endsWith("/")?d=d.slice(0,-1):h=!0);else throw new Error(`Missing required param "${g}"`);d+=S}}return d||"/"}return{re:o,score:s,keys:r,parse:a,stringify:l}}function Qx(n,t){let e=0;for(;e<n.length&&e<t.length;){const s=t[e]-n[e];if(s)return s;e++}return n.length<t.length?n.length===1&&n[0]===Fs.Static+Fs.Segment?-1:1:n.length>t.length?t.length===1&&t[0]===Fs.Static+Fs.Segment?1:-1:0}function vy(n,t){let e=0;const s=n.score,i=t.score;for(;e<s.length&&e<i.length;){const r=Qx(s[e],i[e]);if(r)return r;e++}if(Math.abs(i.length-s.length)===1){if(Qm(s))return 1;if(Qm(i))return-1}return i.length-s.length}function Qm(n){const t=n[n.length-1];return n.length>0&&t[t.length-1]<0}const qx={strict:!1,end:!0,sensitive:!1};function tS(n,t,e){const s=Zx(Xx(n.path),e),i=se(s,{record:n,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function eS(n,t){const e=[],s=new Map;t=Gm(qx,t);function i(h){return s.get(h)}function r(h,f,p){const g=!p,m=t0(h);m.aliasOf=p&&p.record;const w=Gm(t,h),b=[m];if("alias"in h){const T=typeof h.alias=="string"?[h.alias]:h.alias;for(const _ of T)b.push(t0(se({},m,{components:p?p.record.components:m.components,path:_,aliasOf:p?p.record:m})))}let S,C;for(const T of b){const{path:_}=T;if(f&&_[0]!=="/"){const R=f.record.path,M=R[R.length-1]==="/"?"":"/";T.path=f.record.path+(_&&M+_)}if(S=tS(T,f,w),p?p.alias.push(S):(C=C||S,C!==S&&C.alias.push(S),g&&h.name&&!e0(S)&&o(h.name)),my(S)&&l(S),m.children){const R=m.children;for(let M=0;M<R.length;M++)r(R[M],S,p&&p.children[M])}p=p||S}return C?()=>{o(C)}:cu}function o(h){if(fy(h)){const f=s.get(h);f&&(s.delete(h),e.splice(e.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=e.indexOf(h);f>-1&&(e.splice(f,1),h.record.name&&s.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return e}function l(h){const f=iS(h,e);e.splice(f,0,h),h.record.name&&!e0(h)&&s.set(h.record.name,h)}function u(h,f){let p,g={},m,w;if("name"in h&&h.name){if(p=s.get(h.name),!p)throw kc(Pe.MATCHER_NOT_FOUND,{location:h});w=p.record.name,g=se(qm(f.params,p.keys.filter(C=>!C.optional).concat(p.parent?p.parent.keys.filter(C=>C.optional):[]).map(C=>C.name)),h.params&&qm(h.params,p.keys.map(C=>C.name))),m=p.stringify(g)}else if(h.path!=null)m=h.path,p=e.find(C=>C.re.test(m)),p&&(g=p.parse(m),w=p.record.name);else{if(p=f.name?s.get(f.name):e.find(C=>C.re.test(f.path)),!p)throw kc(Pe.MATCHER_NOT_FOUND,{location:h,currentLocation:f});w=p.record.name,g=se({},f.params,h.params),m=p.stringify(g)}const b=[];let S=p;for(;S;)b.unshift(S.record),S=S.parent;return{name:w,path:m,params:g,matched:b,meta:nS(b)}}n.forEach(h=>r(h));function d(){e.length=0,s.clear()}return{addRoute:r,resolve:u,removeRoute:o,clearRoutes:d,getRoutes:a,getRecordMatcher:i}}function qm(n,t){const e={};for(const s of t)s in n&&(e[s]=n[s]);return e}function t0(n){const t={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:sS(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function sS(n){const t={},e=n.props||!1;if("component"in n)t.default=e;else for(const s in n.components)t[s]=typeof e=="object"?e[s]:e;return t}function e0(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function nS(n){return n.reduce((t,e)=>se(t,e.meta),{})}function iS(n,t){let e=0,s=t.length;for(;e!==s;){const r=e+s>>1;vy(n,t[r])<0?s=r:e=r+1}const i=rS(n);return i&&(s=t.lastIndexOf(i,s-1)),s}function rS(n){let t=n;for(;t=t.parent;)if(my(t)&&vy(n,t)===0)return t}function my({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function s0(n){const t=Pn(Jf),e=Pn(Mv),s=Wt(()=>{const l=ue(n.to);return t.resolve(l)}),i=Wt(()=>{const{matched:l}=s.value,{length:u}=l,d=l[u-1],h=e.matched;if(!d||!h.length)return-1;const f=h.findIndex(_c.bind(null,d));if(f>-1)return f;const p=n0(l[u-2]);return u>1&&n0(d)===p&&h[h.length-1].path!==p?h.findIndex(_c.bind(null,l[u-2])):f}),r=Wt(()=>i.value>-1&&uS(e.params,s.value.params)),o=Wt(()=>i.value>-1&&i.value===e.matched.length-1&&hy(e.params,s.value.params));function a(l={}){if(cS(l)){const u=t[ue(n.replace)?"replace":"push"](ue(n.to)).catch(cu);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:Wt(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}function oS(n){return n.length===1?n[0]:n}const aS=fs({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:s0,setup(n,{slots:t}){const e=Xd(s0(n)),{options:s}=Pn(Jf),i=Wt(()=>({[i0(n.activeClass,s.linkActiveClass,"router-link-active")]:e.isActive,[i0(n.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const r=t.default&&oS(t.default(e));return n.custom?r:Pv("a",{"aria-current":e.isExactActive?n.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:i.value},r)}}}),lS=aS;function cS(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const t=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return n.preventDefault&&n.preventDefault(),!0}}function uS(n,t){for(const e in t){const s=t[e],i=n[e];if(typeof s=="string"){if(s!==i)return!1}else if(!si(i)||i.length!==s.length||s.some((r,o)=>r.valueOf()!==i[o].valueOf()))return!1}return!0}function n0(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const i0=(n,t,e)=>n??t??e,dS=fs({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:t,slots:e}){const s=Pn(Jp),i=Wt(()=>n.route||s.value),r=Pn(Ym,0),o=Wt(()=>{let u=ue(r);const{matched:d}=i.value;let h;for(;(h=d[u])&&!h.components;)u++;return u}),a=Wt(()=>i.value.matched[o.value]);ph(Ym,Wt(()=>o.value+1)),ph(jx,a),ph(Jp,i);const l=et();return hs(()=>[l.value,a.value,n.name],([u,d,h],[f,p,g])=>{d&&(d.instances[h]=u,p&&p!==d&&u&&u===f&&(d.leaveGuards.size||(d.leaveGuards=p.leaveGuards),d.updateGuards.size||(d.updateGuards=p.updateGuards))),u&&d&&(!p||!_c(d,p)||!f)&&(d.enterCallbacks[h]||[]).forEach(m=>m(u))},{flush:"post"}),()=>{const u=i.value,d=n.name,h=a.value,f=h&&h.components[d];if(!f)return r0(e.default,{Component:f,route:u});const p=h.props[d],g=p?p===!0?u.params:typeof p=="function"?p(u):p:null,w=Pv(f,se({},g,t,{onVnodeUnmounted:b=>{b.component.isUnmounted&&(h.instances[d]=null)},ref:l}));return r0(e.default,{Component:w,route:u})||w}}});function r0(n,t){if(!n)return null;const e=n(t);return e.length===1?e[0]:e}const hS=dS;function fS(n){const t=eS(n.routes,n),e=n.parseQuery||$x,s=n.stringifyQuery||Xm,i=n.history,r=Ic(),o=Ic(),a=Ic(),l=Qw(kr);let u=kr;sl&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=wp.bind(null,L=>""+L),h=wp.bind(null,Ax),f=wp.bind(null,yu);function p(L,W){let Q,dt;return fy(L)?(Q=t.getRecordMatcher(L),dt=W):dt=L,t.addRoute(dt,Q)}function g(L){const W=t.getRecordMatcher(L);W&&t.removeRoute(W)}function m(){return t.getRoutes().map(L=>L.record)}function w(L){return!!t.getRecordMatcher(L)}function b(L,W){if(W=se({},W||l.value),typeof L=="string"){const B=Ap(e,L,W.path),Y=t.resolve({path:B.path},W),J=i.createHref(B.fullPath);return se(B,Y,{params:f(Y.params),hash:yu(B.hash),redirectedFrom:void 0,href:J})}let Q;if(L.path!=null)Q=se({},L,{path:Ap(e,L.path,W.path).path});else{const B=se({},L.params);for(const Y in B)B[Y]==null&&delete B[Y];Q=se({},L,{params:h(B)}),W.params=h(W.params)}const dt=t.resolve(Q,W),ct=L.hash||"";dt.params=d(f(dt.params));const k=Ex(s,se({},L,{hash:yx(ct),path:dt.path})),P=i.createHref(k);return se({fullPath:k,hash:ct,query:s===Xm?Bx(L.query):L.query||{}},dt,{redirectedFrom:void 0,href:P})}function S(L){return typeof L=="string"?Ap(e,L,l.value.path):se({},L)}function C(L,W){if(u!==L)return kc(Pe.NAVIGATION_CANCELLED,{from:W,to:L})}function T(L){return M(L)}function _(L){return T(se(S(L),{replace:!0}))}function R(L,W){const Q=L.matched[L.matched.length-1];if(Q&&Q.redirect){const{redirect:dt}=Q;let ct=typeof dt=="function"?dt(L,W):dt;return typeof ct=="string"&&(ct=ct.includes("?")||ct.includes("#")?ct=S(ct):{path:ct},ct.params={}),se({query:L.query,hash:L.hash,params:ct.path!=null?{}:L.params},ct)}}function M(L,W){const Q=u=b(L),dt=l.value,ct=L.state,k=L.force,P=L.replace===!0,B=R(Q,dt);if(B)return M(se(S(B),{state:typeof B=="object"?se({},ct,B.state):ct,force:k,replace:P}),W||Q);const Y=Q;Y.redirectedFrom=W;let J;return!k&&Cx(s,dt,Q)&&(J=kc(Pe.NAVIGATION_DUPLICATED,{to:Y,from:dt}),Mt(dt,dt,!0,!1)),(J?Promise.resolve(J):G(Y,dt)).catch(Z=>Oi(Z)?Oi(Z,Pe.NAVIGATION_GUARD_REDIRECT)?Z:vt(Z):tt(Z,Y,dt)).then(Z=>{if(Z){if(Oi(Z,Pe.NAVIGATION_GUARD_REDIRECT))return M(se({replace:P},S(Z.to),{state:typeof Z.to=="object"?se({},ct,Z.to.state):ct,force:k}),W||Y)}else Z=z(Y,dt,!0,P,ct);return X(Y,dt,Z),Z})}function N(L,W){const Q=C(L,W);return Q?Promise.reject(Q):Promise.resolve()}function I(L){const W=It.values().next().value;return W&&typeof W.runWithContext=="function"?W.runWithContext(L):L()}function G(L,W){let Q;const[dt,ct,k]=Hx(L,W);Q=Sp(dt.reverse(),"beforeRouteLeave",L,W);for(const B of dt)B.leaveGuards.forEach(Y=>{Q.push(Or(Y,L,W))});const P=N.bind(null,L,W);return Q.push(P),lt(Q).then(()=>{Q=[];for(const B of r.list())Q.push(Or(B,L,W));return Q.push(P),lt(Q)}).then(()=>{Q=Sp(ct,"beforeRouteUpdate",L,W);for(const B of ct)B.updateGuards.forEach(Y=>{Q.push(Or(Y,L,W))});return Q.push(P),lt(Q)}).then(()=>{Q=[];for(const B of k)if(B.beforeEnter)if(si(B.beforeEnter))for(const Y of B.beforeEnter)Q.push(Or(Y,L,W));else Q.push(Or(B.beforeEnter,L,W));return Q.push(P),lt(Q)}).then(()=>(L.matched.forEach(B=>B.enterCallbacks={}),Q=Sp(k,"beforeRouteEnter",L,W,I),Q.push(P),lt(Q))).then(()=>{Q=[];for(const B of o.list())Q.push(Or(B,L,W));return Q.push(P),lt(Q)}).catch(B=>Oi(B,Pe.NAVIGATION_CANCELLED)?B:Promise.reject(B))}function X(L,W,Q){a.list().forEach(dt=>I(()=>dt(L,W,Q)))}function z(L,W,Q,dt,ct){const k=C(L,W);if(k)return k;const P=W===kr,B=sl?history.state:{};Q&&(dt||P?i.replace(L.fullPath,se({scroll:P&&B&&B.scroll},ct)):i.push(L.fullPath,ct)),l.value=L,Mt(L,W,Q,P),vt()}let ot;function q(){ot||(ot=i.listen((L,W,Q)=>{if(!ie.listening)return;const dt=b(L),ct=R(dt,ie.currentRoute.value);if(ct){M(se(ct,{replace:!0,force:!0}),dt).catch(cu);return}u=dt;const k=l.value;sl&&Lx(Km(k.fullPath,Q.delta),Yf()),G(dt,k).catch(P=>Oi(P,Pe.NAVIGATION_ABORTED|Pe.NAVIGATION_CANCELLED)?P:Oi(P,Pe.NAVIGATION_GUARD_REDIRECT)?(M(se(S(P.to),{force:!0}),dt).then(B=>{Oi(B,Pe.NAVIGATION_ABORTED|Pe.NAVIGATION_DUPLICATED)&&!Q.delta&&Q.type===Xp.pop&&i.go(-1,!1)}).catch(cu),Promise.reject()):(Q.delta&&i.go(-Q.delta,!1),tt(P,dt,k))).then(P=>{P=P||z(dt,k,!1),P&&(Q.delta&&!Oi(P,Pe.NAVIGATION_CANCELLED)?i.go(-Q.delta,!1):Q.type===Xp.pop&&Oi(P,Pe.NAVIGATION_ABORTED|Pe.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),X(dt,k,P)}).catch(cu)}))}let nt=Ic(),U=Ic(),K;function tt(L,W,Q){vt(L);const dt=U.list();return dt.length?dt.forEach(ct=>ct(L,W,Q)):console.error(L),Promise.reject(L)}function Ct(){return K&&l.value!==kr?Promise.resolve():new Promise((L,W)=>{nt.add([L,W])})}function vt(L){return K||(K=!L,q(),nt.list().forEach(([W,Q])=>L?Q(L):W()),nt.reset()),L}function Mt(L,W,Q,dt){const{scrollBehavior:ct}=n;if(!sl||!ct)return Promise.resolve();const k=!Q&&Ox(Km(L.fullPath,0))||(dt||!Q)&&history.state&&history.state.scroll||null;return Jd().then(()=>ct(L,W,k)).then(P=>P&&Mx(P)).catch(P=>tt(P,L,W))}const Rt=L=>i.go(L);let Vt;const It=new Set,ie={currentRoute:l,listening:!0,addRoute:p,removeRoute:g,clearRoutes:t.clearRoutes,hasRoute:w,getRoutes:m,resolve:b,options:n,push:T,replace:_,go:Rt,back:()=>Rt(-1),forward:()=>Rt(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:U.add,isReady:Ct,install(L){L.component("RouterLink",lS),L.component("RouterView",hS),L.config.globalProperties.$router=ie,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>ue(l)}),sl&&!Vt&&l.value===kr&&(Vt=!0,T(i.location).catch(dt=>{}));const W={};for(const dt in kr)Object.defineProperty(W,dt,{get:()=>l.value[dt],enumerable:!0});L.provide(Jf,ie),L.provide(Mv,i1(W)),L.provide(Jp,l);const Q=L.unmount;It.add(L),L.unmount=function(){It.delete(L),It.size<1&&(u=kr,ot&&ot(),ot=null,l.value=kr,Vt=!1,K=!1),Q()}}};function lt(L){return L.reduce((W,Q)=>W.then(()=>I(Q)),Promise.resolve())}return ie}function Ao(){return Pn(Jf)}function Qd(n){return Pn(Mv)}const Xa=ax("user",()=>{const n=et(null),t=et(localStorage.getItem("auth_token")||sessionStorage.getItem("auth_token")),e=et(localStorage.getItem("refresh_token")||sessionStorage.getItem("refresh_token")),s=Wt(()=>!!n.value&&!!t.value),i=(l,u,d,h=!0)=>{n.value=l,t.value=u,d&&(e.value=d),h?(localStorage.setItem("auth_token",u),localStorage.setItem("user",JSON.stringify(l)),d&&localStorage.setItem("refresh_token",d),sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user"),sessionStorage.removeItem("refresh_token")):(sessionStorage.setItem("auth_token",u),sessionStorage.setItem("user",JSON.stringify(l)),d&&sessionStorage.setItem("refresh_token",d),localStorage.removeItem("auth_token"),localStorage.removeItem("user"),localStorage.removeItem("refresh_token"))},r=(l,u)=>{t.value=l,e.value=u;const d=localStorage.getItem("auth_token")?localStorage:sessionStorage;d.setItem("auth_token",l),d.setItem("refresh_token",u)},o=()=>{n.value=null,t.value=null,e.value=null,localStorage.removeItem("auth_token"),localStorage.removeItem("user"),localStorage.removeItem("refresh_token"),sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("user"),sessionStorage.removeItem("refresh_token")},a=()=>{const l=localStorage.getItem("user")||sessionStorage.getItem("user");if(l&&!t.value){localStorage.removeItem("user"),sessionStorage.removeItem("user"),n.value=null;return}if(l&&t.value)try{n.value=JSON.parse(l)}catch(u){console.error("Failed to parse user from storage",u),o()}};return t.value&&a(),{user:n,token:t,refreshToken:e,isLoggedIn:s,login:i,updateTokens:r,logout:o,loadUserFromStorage:a}}),o0=Object.freeze(Object.defineProperty({__proto__:null,useUserStore:Xa},Symbol.toStringTag,{value:"Module"})),pS={class:"toast-icon"},gS={key:0,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vS={key:1,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},mS={key:2,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},yS={key:3,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},bS={class:"toast-content"},wS={class:"toast-title"},AS={key:0,class:"toast-message"},xS=["onClick"],SS=fs({__name:"Toast",setup(n,{expose:t}){const e=et([]);let s=0;const i=l=>{const u=`toast-${++s}`,d={id:u,duration:3e3,...l};e.value.push(d),d.duration&&d.duration>0&&setTimeout(()=>{r(u)},d.duration)},r=l=>{const u=e.value.findIndex(d=>d.id===l);u>-1&&e.value.splice(u,1)},o=l=>{i(l)};t({showToast:o,addToast:i,removeToast:r});let a=null;return Js(()=>{a=document.createElement("div"),a.id="toast-global-container",document.body.appendChild(a),window.addEventListener("show-toast",l=>{i(l.detail)})}),Ka(()=>{a&&document.body.contains(a)&&document.body.removeChild(a),window.removeEventListener("show-toast",()=>{})}),window.showToast=o,(l,u)=>(O(),Ye(B2,{name:"toast",tag:"div",class:"toast-container"},{default:ce(()=>[(O(!0),F(fe,null,dn(e.value,d=>(O(),F("div",{key:d.id,class:jt(["toast",`toast-${d.type}`])},[v("div",pS,[d.type==="success"?(O(),F("svg",gS,[...u[0]||(u[0]=[v("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):d.type==="error"?(O(),F("svg",vS,[...u[1]||(u[1]=[v("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):d.type==="warning"?(O(),F("svg",mS,[...u[2]||(u[2]=[v("path",{d:"M12 9v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(O(),F("svg",yS,[...u[3]||(u[3]=[v("path",{d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))]),v("div",bS,[v("div",wS,at(d.title),1),d.message?(O(),F("div",AS,at(d.message),1)):gt("",!0)]),v("button",{class:"toast-close",onClick:h=>r(d.id)},[...u[4]||(u[4]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,xS)],2))),128))]),_:1}))}}),Ln=(n,t)=>{const e=n.__vccOpts||n;for(const[s,i]of t)e[s]=i;return e},ES=Ln(SS,[["__scopeId","data-v-6ca52479"]]),CS={class:"app-shell"},_S={class:"app-header"},kS={class:"nav-links"},TS={key:1,class:"user-menu-wrapper"},PS=["src","alt"],RS={key:1,class:"user-avatar-text"},IS={key:0,class:"user-menu"},MS={class:"user-menu-header"},LS={class:"user-menu-avatar"},OS=["src","alt"],DS={key:1},NS={class:"user-menu-info"},FS={class:"user-menu-name"},$S={class:"user-menu-email"},BS=fs({__name:"App",setup(n){const t=Qd(),e=Ao(),s=Xa(),i=Wt(()=>t.path==="/"),r=et(!1),o=()=>{const u=t.path==="/"?"/":t.fullPath;e.push(`/auth?redirect=${encodeURIComponent(u)}`)},a=()=>{s.logout(),r.value=!1,e.replace("/auth?redirect=/")},l=u=>{u.target.closest(".user-menu-wrapper")||(r.value=!1)};return Js(()=>{document.addEventListener("click",l),s.loadUserFromStorage()}),Ka(()=>{document.removeEventListener("click",l)}),hs(i,u=>{u?document.body.classList.add("landing-page"):document.body.classList.remove("landing-page")},{immediate:!0}),(u,d)=>{var p,g,m,w,b,S,C,T,_,R,M;const h=lm("RouterLink"),f=lm("RouterView");return O(),F("div",CS,[v("header",_S,[d[11]||(d[11]=v("div",{class:"logo"},[v("img",{src:Rv,alt:"AxiomFlow",class:"logo-image"}),v("span",{class:"logo-text"},"AxiomFlow")],-1)),v("nav",kS,[Nt(h,{to:"/",class:"nav-link-item"},{default:ce(()=>[...d[5]||(d[5]=[v("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),v("path",{d:"M9 22V12H15V22",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),v("span",null,"",-1)])]),_:1}),Nt(h,{to:"/app",class:"nav-link-item"},{default:ce(()=>[...d[6]||(d[6]=[v("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),v("path",{d:"M14 2V8H20",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),v("path",{d:"M16 13H8",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),v("path",{d:"M16 17H8",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),v("path",{d:"M10 9H9H8",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),v("span",null,"",-1)])]),_:1}),Nt(h,{to:"/settings",class:"nav-link-item"},{default:ce(()=>[...d[7]||(d[7]=[v("svg",{class:"nav-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),v("path",{d:"M19.4 15C19.2669 15.3016 19.2272 15.6362 19.286 15.9606C19.3448 16.285 19.4995 16.5843 19.73 16.82L19.79 16.88C19.976 17.0657 20.1235 17.2863 20.2241 17.5291C20.3248 17.7719 20.3766 18.0322 20.3766 18.295C20.3766 18.5578 20.3248 18.8181 20.2241 19.0609C20.1235 19.3037 19.976 19.5243 19.79 19.71C19.6043 19.896 19.3837 20.0435 19.1409 20.1441C18.8981 20.2448 18.6378 20.2966 18.375 20.2966C18.1122 20.2966 17.8519 20.2448 17.6091 20.1441C17.3663 20.0435 17.1457 19.896 16.96 19.71L16.9 19.65C16.6643 19.4195 16.365 19.2648 16.0406 19.206C15.7162 19.1472 15.3816 19.1869 15.08 19.32C14.7842 19.4468 14.532 19.6572 14.3543 19.9255C14.1766 20.1938 14.0813 20.5082 14.08 20.83V21C14.08 21.5304 13.8693 22.0391 13.4942 22.4142C13.1191 22.7893 12.6104 23 12.08 23C11.5496 23 11.0409 22.7893 10.6658 22.4142C10.2907 22.0391 10.08 21.5304 10.08 21V20.91C10.0723 20.579 9.96512 20.258 9.77251 19.9887C9.5799 19.7194 9.31074 19.5143 9 19.4C8.69838 19.2669 8.36381 19.2272 8.03941 19.286C7.71502 19.3448 7.41568 19.4995 7.18 19.73L7.12 19.79C6.93425 19.976 6.71368 20.1235 6.47088 20.2241C6.22808 20.3248 5.96783 20.3766 5.705 20.3766C5.44217 20.3766 5.18192 20.3248 4.93912 20.2241C4.69632 20.1235 4.47575 19.976 4.29 19.79C4.10405 19.6043 3.95653 19.3837 3.85588 19.1409C3.75523 18.8981 3.70343 18.6378 3.70343 18.375C3.70343 18.1122 3.75523 17.8519 3.85588 17.6091C3.95653 17.3663 4.10405 17.1457 4.29 16.96L4.35 16.9C4.58054 16.6643 4.73519 16.365 4.794 16.0406C4.85282 15.7162 4.81312 15.3816 4.68 15.08C4.55324 14.7842 4.34276 14.532 4.07447 14.3543C3.80618 14.1766 3.49179 14.0813 3.17 14.08H3C2.46957 14.08 1.96086 13.8693 1.58579 13.4942C1.21071 13.1191 1 12.6104 1 12.08C1 11.5496 1.21071 11.0409 1.58579 10.6658C1.96086 10.2907 2.46957 10.08 3 10.08H3.09C3.42099 10.0723 3.742 9.96512 4.01131 9.77251C4.28062 9.5799 4.48568 9.31074 4.6 9C4.73312 8.69838 4.77282 8.36381 4.714 8.03941C4.65519 7.71502 4.50054 7.41568 4.27 7.18L4.21 7.12C4.02405 6.93425 3.87653 6.71368 3.77588 6.47088C3.67523 6.22808 3.62343 5.96783 3.62343 5.705C3.62343 5.44217 3.67523 5.18192 3.77588 4.93912C3.87653 4.69632 4.02405 4.47575 4.21 4.29C4.39575 4.10405 4.61632 3.95653 4.85912 3.85588C5.10192 3.75523 5.36217 3.70343 5.625 3.70343C5.88783 3.70343 6.14808 3.75523 6.39088 3.85588C6.63368 3.95653 6.85425 4.10405 7.04 4.29L7.1 4.35C7.33568 4.58054 7.63502 4.73519 7.95941 4.794C8.28381 4.85282 8.61838 4.81312 8.92 4.68H9C9.29577 4.55324 9.54802 4.34276 9.72569 4.07447C9.90337 3.80618 9.99872 3.49179 10 3.17V3C10 2.46957 10.2107 1.96086 10.5858 1.58579C10.9609 1.21071 11.4696 1 12 1C12.5304 1 13.0391 1.21071 13.4142 1.58579C13.7893 1.96086 14 2.46957 14 3V3.09C14.0013 3.41179 14.0966 3.72618 14.2743 3.99447C14.452 4.26276 14.7042 4.47324 15 4.6C15.3016 4.73312 15.6362 4.77282 15.9606 4.714C16.285 4.65519 16.5843 4.50054 16.82 4.27L16.88 4.21C17.0657 4.02405 17.2863 3.87653 17.5291 3.77588C17.7719 3.67523 18.0322 3.62343 18.295 3.62343C18.5578 3.62343 18.8181 3.67523 19.0609 3.77588C19.3037 3.87653 19.5243 4.02405 19.71 4.21C19.896 4.39575 20.0435 4.61632 20.1441 4.85912C20.2448 5.10192 20.2966 5.36217 20.2966 5.625C20.2966 5.88783 20.2448 6.14808 20.1441 6.39088C20.0435 6.63368 19.896 6.85425 19.71 7.04L19.65 7.1C19.4195 7.33568 19.2648 7.63502 19.206 7.95941C19.1472 8.28381 19.1869 8.61838 19.32 8.92V9C19.4468 9.29577 19.6572 9.54802 19.9255 9.72569C20.1938 9.90337 20.5082 9.99872 20.83 10H21C21.5304 10 22.0391 10.2107 22.4142 10.5858C22.7893 10.9609 23 11.4696 23 12C23 12.5304 22.7893 13.0391 22.4142 13.4142C22.0391 13.7893 21.5304 14 21 14H20.91C20.5882 14.0013 20.2738 14.0966 20.0055 14.2743C19.7372 14.452 19.5268 14.7042 19.4 15Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),v("span",null,"",-1)])]),_:1}),ue(s).isLoggedIn?(O(),F("div",TS,[v("button",{class:jt(["user-avatar-button",{"has-avatar":(p=ue(s).user)==null?void 0:p.avatar}]),onClick:d[2]||(d[2]=N=>r.value=!r.value)},[(g=ue(s).user)!=null&&g.avatar?(O(),F("img",{key:0,src:ue(s).user.avatar,alt:((m=ue(s).user)==null?void 0:m.name)||"User",class:"user-avatar-image",onError:d[0]||(d[0]=(...N)=>u.handleAvatarError&&u.handleAvatarError(...N)),onLoad:d[1]||(d[1]=(...N)=>u.handleAvatarLoad&&u.handleAvatarLoad(...N))},null,40,PS)):(O(),F("span",RS,at(((b=(w=ue(s).user)==null?void 0:w.name)==null?void 0:b.charAt(0).toUpperCase())||"U"),1))],2),r.value?(O(),F("div",IS,[v("div",MS,[v("div",LS,[(S=ue(s).user)!=null&&S.avatar?(O(),F("img",{key:0,src:ue(s).user.avatar,alt:((C=ue(s).user)==null?void 0:C.name)||"User",class:"user-menu-avatar-image",onError:d[3]||(d[3]=(...N)=>u.handleAvatarError&&u.handleAvatarError(...N)),onLoad:d[4]||(d[4]=(...N)=>u.handleAvatarLoad&&u.handleAvatarLoad(...N))},null,40,OS)):(O(),F("span",DS,at(((_=(T=ue(s).user)==null?void 0:T.name)==null?void 0:_.charAt(0).toUpperCase())||"U"),1))]),v("div",NS,[v("div",FS,at(((R=ue(s).user)==null?void 0:R.name)||""),1),v("div",$S,at((M=ue(s).user)==null?void 0:M.email),1)])]),d[10]||(d[10]=v("div",{class:"user-menu-divider"},null,-1)),v("button",{class:"user-menu-item",onClick:a},[...d[9]||(d[9]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),v("path",{d:"M16 17L21 12L16 7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),v("path",{d:"M21 12H9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),v("span",null,"",-1)])])])):gt("",!0)])):(O(),F("button",{key:0,class:"user-avatar-button",onClick:o,title:""},[...d[8]||(d[8]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),v("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]))])]),v("main",{class:jt(["app-main",{"landing-page":i.value}])},[Nt(f)],2),Nt(ES)])}}}),jS={class:"snowflakes-container"},HS=["width","height"],US=40,VS=fs({__name:"Snowflakes",setup(n){const t=et([]),e=()=>{const s=[];for(let i=0;i<US;i++)s.push({id:i,left:Math.random()*100,delay:Math.random()*5,duration:8+Math.random()*12,opacity:.5+Math.random()*.3,scale:.4+Math.random()*.6,size:12+Math.random()*16});t.value=s};return Js(()=>{e()}),(s,i)=>(O(),F("div",jS,[(O(!0),F(fe,null,dn(t.value,r=>(O(),F("div",{key:r.id,class:"snowflake",style:Ss({left:r.left+"%",animationDelay:r.delay+"s",animationDuration:r.duration+"s",opacity:r.opacity,"--scale":r.scale})},[(O(),F("svg",{width:r.size,height:r.size,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[...i[0]||(i[0]=[v("path",{d:"M12 2V4M12 20V22M4 12H2M22 12H20M19.07 4.93L17.66 6.34M6.34 17.66L4.93 19.07M19.07 19.07L17.66 17.66M6.34 6.34L4.93 4.93M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])],8,HS))],4))),128))]))}}),GS=Ln(VS,[["__scopeId","data-v-d9621b18"]]),zS={class:"floating-particles-container"},WS=20,KS=fs({__name:"FloatingParticles",setup(n){const t=et([]),e=()=>{const s=[];for(let i=0;i<WS;i++){const r=i%2===0;s.push({id:i,left:r?5+Math.random()*15:80+Math.random()*15,top:Math.random()*100,delay:Math.random()*3,duration:15+Math.random()*10,size:4+Math.random()*6,opacity:.2+Math.random()*.3})}t.value=s};return Js(()=>{e()}),(s,i)=>(O(),F("div",zS,[(O(!0),F(fe,null,dn(t.value,r=>(O(),F("div",{key:r.id,class:"floating-particle",style:Ss({left:r.left+"%",top:r.top+"%",animationDelay:r.delay+"s",animationDuration:r.duration+"s",width:r.size+"px",height:r.size+"px",opacity:r.opacity})},null,4))),128))]))}}),XS=Ln(KS,[["__scopeId","data-v-d34aa257"]]),YS={class:"landing"},JS={class:"landing-hero glass-card"},ZS=fs({__name:"LandingView",setup(n){const t=Ao(),e=Xa(),s=et(null),i=et(!1),r=()=>{var h;if(!e.isLoggedIn){t.push(`/auth?redirect=${encodeURIComponent("/")}`);return}(h=s.value)==null||h.click()},o=h=>{if(!e.isLoggedIn){h.preventDefault();return}i.value=!0,h.dataTransfer.dropEffect="copy"},a=()=>{i.value=!1},l=async h=>{var g;if(i.value=!1,!e.isLoggedIn){h.preventDefault(),t.push(`/auth?redirect=${encodeURIComponent("/")}`);return}const p=Array.from(((g=h.dataTransfer)==null?void 0:g.files)||[]).find(m=>m.name.toLowerCase().endsWith(".pdf"));p?d(p):alert(" PDF ")},u=h=>{var g;if(!e.isLoggedIn){t.push(`/auth?redirect=${encodeURIComponent("/")}`);return}const f=h.target,p=(g=f.files)==null?void 0:g[0];p&&p.name.toLowerCase().endsWith(".pdf")&&d(p),f.value=""},d=h=>{const f=encodeURIComponent(h.name);t.push(`/app?uploading=true&filename=${f}`),window.__pendingUploadFile=h};return(h,f)=>(O(),F("section",YS,[Nt(GS),Nt(XS),v("div",JS,[f[1]||(f[1]=$e('<div class="hero-content"><img src="'+Rv+'" alt="AxiomFlow" class="hero-icon"><h1 class="hero-title"><span class="hero-title-main"> PDF </span></h1><p class="hero-description">  AI PDF </p><div class="hero-features"><span class="feature-tag"></span><span class="feature-tag"></span><span class="feature-tag"></span></div></div>',1)),v("div",{class:jt(["upload-dropzone",{"upload-dropzone--dragover":i.value}]),onClick:r,onDragover:Je(o,["prevent"]),onDragleave:Je(a,["prevent"]),onDrop:Je(l,["prevent"])},[...f[0]||(f[0]=[$e('<div class="upload-content"><div class="upload-placeholder"><svg class="upload-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 15V3M12 3L8 7M12 3L16 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2 17L2 19C2 20.1046 2.89543 21 4 21L20 21C21.1046 21 22 20.1046 22 19L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><div class="upload-text"><span class="upload-text-primary"> PDF </span><span class="upload-text-secondary"></span></div></div></div>',1)])],34),v("input",{ref_key:"fileInput",ref:s,type:"file",accept:"application/pdf",style:{display:"none"},onChange:u},null,544)])]))}}),QS={},qS={class:"app-card"};function tE(n,t){return O(),F("div",qS,[_1(n.$slots,"default",{},void 0)])}const eE=Ln(QS,[["render",tE],["__scopeId","data-v-e8b93269"]]),sE=fs({__name:"AppButton",props:{primary:{type:Boolean}},setup(n){return(t,e)=>(O(),F("button",{class:jt(["app-btn",{primary:n.primary}])},[_1(t.$slots,"default",{},void 0)],2))}}),_n=Ln(sE,[["__scopeId","data-v-1cd5a885"]]),nE=fs({__name:"LoadingIcon",props:{spinning:{type:Boolean}},setup(n){return(t,e)=>(O(),F("div",{class:jt(["loading-icon",{"loading-icon--spinning":n.spinning}])},[...e[0]||(e[0]=[$e('<svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-bf01cc15><circle cx="32" cy="32" r="28" stroke="url(#loadingGradient)" stroke-width="3" stroke-linecap="round" stroke-dasharray="44 176" stroke-dashoffset="0" fill="none" opacity="0.3" data-v-bf01cc15></circle><circle cx="32" cy="32" r="20" stroke="url(#loadingGradient)" stroke-width="2.5" stroke-linecap="round" stroke-dasharray="31.4 125.6" stroke-dashoffset="0" fill="none" class="loading-circle" data-v-bf01cc15></circle><circle cx="32" cy="32" r="4" fill="url(#loadingGradient)" opacity="0.8" data-v-bf01cc15></circle><defs data-v-bf01cc15><linearGradient id="loadingGradient" x1="0" y1="0" x2="64" y2="64" gradientUnits="userSpaceOnUse" data-v-bf01cc15><stop offset="0%" stop-color="#3b82f6" data-v-bf01cc15></stop><stop offset="50%" stop-color="#8b5cf6" data-v-bf01cc15></stop><stop offset="100%" stop-color="#6366f1" data-v-bf01cc15></stop></linearGradient></defs></svg>',1)])],2))}}),a0=Ln(nE,[["__scopeId","data-v-bf01cc15"]]),iE={class:"confirm-dialog-content glass-card"},rE={key:0,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},oE={key:1,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},aE={key:2,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},lE={id:"confirm-dialog-title",class:"confirm-dialog-title"},cE={key:0,class:"confirm-dialog-message"},uE={class:"confirm-dialog-actions"},dE=["disabled"],hE=["disabled"],fE=fs({__name:"ConfirmDialog",props:{visible:{type:Boolean},title:{},message:{},type:{default:"danger"},confirmText:{default:""},cancelText:{default:""},loading:{type:Boolean,default:!1}},emits:["confirm","cancel","update:visible"],setup(n,{emit:t}){const e=n,s=t,i=()=>{e.loading||s("confirm")},r=()=>{e.loading||(s("cancel"),s("update:visible",!1))};let o=null;return hs(()=>e.visible,a=>{a?(o=l=>{l.key==="Escape"&&!e.loading&&r()},document.addEventListener("keydown",o),document.body.style.overflow="hidden"):(o&&(document.removeEventListener("keydown",o),o=null),document.body.style.overflow="")}),(a,l)=>(O(),Ye(Ti,{to:"body"},[Nt(Jn,{name:"modal"},{default:ce(()=>[n.visible?(O(),F("div",{key:0,class:"confirm-dialog-overlay",onClick:Je(r,["self"]),role:"dialog","aria-labelledby":"confirm-dialog-title","aria-modal":"true"},[v("div",iE,[v("div",{class:jt(["confirm-dialog-icon",`confirm-dialog-icon--${n.type}`])},[n.type==="danger"?(O(),F("svg",rE,[...l[0]||(l[0]=[v("path",{d:"M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):n.type==="warning"?(O(),F("svg",oE,[...l[1]||(l[1]=[v("path",{d:"M12 9V13M12 17H12.01M10.29 3.86L1.82 18C1.64537 18.3024 1.55299 18.6453 1.55201 18.9945C1.55103 19.3437 1.64151 19.6871 1.81445 19.9905C1.98738 20.2939 2.23675 20.5467 2.53773 20.7238C2.83871 20.9009 3.18082 20.9962 3.53 21H20.47C20.8192 20.9962 21.1613 20.9009 21.4623 20.7238C21.7633 20.5467 22.0126 20.2939 22.1856 19.9905C22.3585 19.6871 22.449 19.3437 22.448 18.9945C22.447 18.6453 22.3546 18.3024 22.18 18L13.71 3.86C13.5322 3.56611 13.2807 3.32312 12.9812 3.15447C12.6817 2.98583 12.3438 2.89725 12 2.89725C11.6562 2.89725 11.3183 2.98583 11.0188 3.15447C10.7193 3.32312 10.4678 3.56611 10.29 3.86Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(O(),F("svg",aE,[...l[2]||(l[2]=[v("path",{d:"M13 16H12V12H11M12 8H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))],2),v("h2",lE,at(n.title),1),n.message?(O(),F("p",cE,at(n.message),1)):gt("",!0),v("div",uE,[v("button",{class:"confirm-dialog-button confirm-dialog-button--cancel",onClick:r,disabled:n.loading},at(n.cancelText),9,dE),v("button",{class:jt(["confirm-dialog-button confirm-dialog-button--confirm",`confirm-dialog-button--${n.type}`]),onClick:i,disabled:n.loading},at(n.confirmText),11,hE)])])])):gt("",!0)]),_:1})]))}}),pE=Ln(fE,[["__scopeId","data-v-08d66e36"]]),gE="modulepreload",vE=function(n){return"/"+n},l0={},c0=function(t,e,s){let i=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(e.map(l=>{if(l=vE(l),l in l0)return;l0[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":gE,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return t().catch(r)})},Kt="http://localhost:8000/v1";function mE(){return typeof window>"u"?null:localStorage.getItem("auth_token")||sessionStorage.getItem("auth_token")}function yE(){return typeof window>"u"?null:localStorage.getItem("refresh_token")||sessionStorage.getItem("refresh_token")}let Ep=!1,Mc=null;async function bE(){if(Ep&&Mc)return Mc;const n=yE();return n?(Ep=!0,Mc=(async()=>{try{const t=await $E({refresh_token:n}),e=localStorage.getItem("auth_token")?localStorage:sessionStorage;e.setItem("auth_token",t.token),e.setItem("refresh_token",t.refresh_token);const{useUserStore:s}=await c0(async()=>{const{useUserStore:r}=await Promise.resolve().then(()=>o0);return{useUserStore:r}},[]);return s().updateTokens(t.token,t.refresh_token),t.token}catch{const{useUserStore:e}=await c0(async()=>{const{useUserStore:i}=await Promise.resolve().then(()=>o0);return{useUserStore:i}},void 0);return e().logout(),typeof window<"u"&&setTimeout(()=>{window.location.href="/auth"},100),null}finally{Ep=!1,Mc=null}})(),Mc):null}async function Ue(n,t={}){let e=mE();const s=new Headers(t.headers);e&&s.set("Authorization",`Bearer ${e}`);let i=await fetch(n,{...t,headers:s});if(i.status===401&&e){const r=await bE();r&&(s.set("Authorization",`Bearer ${r}`),i=await fetch(n,{...t,headers:s}))}return i}async function lh(n){const t=new FormData;t.set("name",n);const e=await Ue(`${Kt}/projects`,{method:"POST",body:t});if(!e.ok)throw new Error(await e.text());return await e.json()}async function wE(n){const t=await Ue(`${Kt}/projects/${n}/documents`);if(!t.ok){const e=await t.text();throw t.status===404?new Error(` ${n} `):new Error(e||` (${t.status})`)}return await t.json()}async function AE(){const n=await Ue(`${Kt}/projects/documents`);if(!n.ok){const t=await n.text();throw new Error(t||` (${n.status})`)}return await n.json()}async function u0(n){const t=new FormData;t.set("file",n.file),t.set("lang_in",n.lang_in??"en"),t.set("lang_out",n.lang_out??"zh");const e=await Ue(`${Kt}/projects/${n.project_id}/files`,{method:"POST",body:t});if(!e.ok)throw new Error(await e.text());return await e.json()}async function yy(n){const t=await fetch(`${Kt}/documents/${n}`);if(!t.ok){const e=await t.text();throw t.status===404?new Error(` ${n} `):new Error(e||` (${t.status})`)}return await t.json()}async function xE(n){const t=await Ue(`${Kt}/documents/${n}`,{method:"DELETE"});if(!t.ok){const e=await t.text();try{const s=JSON.parse(e);throw new Error(s.detail||e)}catch{throw new Error(e||` (${t.status})`)}}return await t.json()}async function SE(n){const t=await Ue(`${Kt}/documents/batch/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({document_ids:n})});if(!t.ok){const e=await t.text();try{const s=JSON.parse(e);throw new Error(s.detail||e)}catch{throw new Error(e||` (${t.status})`)}}return await t.json()}function EE(n){return`${Kt}/documents/${n}/source`}async function CE(n){const t=await fetch(`${Kt}/jobs/translate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({document_id:n.document_id,lang_in:n.lang_in,lang_out:n.lang_out,provider:n.provider??"ollama",use_context:n.use_context,context_window_size:n.context_window_size,use_term_consistency:n.use_term_consistency,use_smart_batching:n.use_smart_batching})});if(!t.ok)throw new Error(await t.text());return await t.json()}async function _E(n){const t=await fetch(`${Kt}/jobs/${n}`);if(!t.ok)throw new Error(await t.text());return await t.json()}async function kE(n){const t=await fetch(`${Kt}/export`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok)throw new Error(await t.text());return await t.json()}async function TE(n){const t=new FormData;t.set("project_name",n.project_name),t.set("lang_in",n.lang_in??"en"),t.set("lang_out",n.lang_out??"zh"),t.set("auto_translate","true"),t.set("provider",n.provider??"ollama");for(const s of n.files)t.append("files",s);const e=await Ue(`${Kt}/batches/upload`,{method:"POST",body:t});if(!e.ok){const s=await e.text();try{const i=JSON.parse(s);throw new Error(i.detail||s)}catch{throw new Error(s||` (${e.status})`)}}return await e.json()}async function PE(n){const t=await fetch(`${Kt}/batches/${n.batch_id}`);if(!t.ok)throw new Error(await t.text());return await t.json()}async function RE(n){const t=await fetch(`${Kt}/auth/google`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n})});if(!t.ok){const e=await t.text();throw new Error(e||`Google (${t.status})`)}return await t.json()}async function IE(){const n=await fetch(`${Kt}/auth/captcha`);if(!n.ok){const t=await n.text();throw new Error(t||` (${n.status})`)}return await n.json()}async function ME(n){const t=await fetch(`${Kt}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok){const e=await t.text();try{const s=JSON.parse(e);throw new Error(s.detail||e)}catch{throw new Error(e||` (${t.status})`)}}return await t.json()}async function LE(n){const t=await fetch(`${Kt}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok){const e=await t.text();try{const s=JSON.parse(e);throw new Error(s.detail||e)}catch{throw new Error(e||` (${t.status})`)}}return await t.json()}async function OE(n){const t=await fetch(`${Kt}/auth/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok){const e=await t.text();try{const s=JSON.parse(e);throw new Error(s.detail||e)}catch{throw new Error(e||` (${t.status})`)}}return await t.json()}async function DE(n){const t=await fetch(`${Kt}/auth/verify-email-code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok){const e=await t.text();try{const s=JSON.parse(e);throw new Error(s.detail||e)}catch{throw new Error(e||` (${t.status})`)}}return await t.json()}async function NE(n){const t=await fetch(`${Kt}/auth/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok){const e=await t.text();try{const s=JSON.parse(e);throw new Error(s.detail||e)}catch{throw new Error(e||` (${t.status})`)}}return await t.json()}async function Lv(n){const t=await fetch(`${Kt}/auth/send-email-verification`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok){const e=await t.text();try{const s=JSON.parse(e);throw new Error(s.detail||e)}catch{throw new Error(e||` (${t.status})`)}}return await t.json()}async function FE(n){const t=await fetch(`${Kt}/auth/verify-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok){const e=await t.text();try{const s=JSON.parse(e);throw new Error(s.detail||e)}catch{throw new Error(e||` (${t.status})`)}}return await t.json()}async function $E(n){const t=await fetch(`${Kt}/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok){const e=await t.text();try{const s=JSON.parse(e);throw new Error(s.detail||e)}catch{throw new Error(e||` (${t.status})`)}}return await t.json()}async function BE(n){const t=await Ue(`${Kt}/users/change-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok){const e=await t.text();try{const s=JSON.parse(e);throw new Error(s.detail||e)}catch{throw new Error(e||` (${t.status})`)}}return await t.json()}async function jE(n=20){const t=await Ue(`${Kt}/users/login-history?limit=${n}`);if(!t.ok){const e=await t.text();try{const s=JSON.parse(e);throw new Error(s.detail||e)}catch{throw new Error(e||` (${t.status})`)}}return await t.json()}async function HE(){const n=await Ue(`${Kt}/users/sessions`);if(!n.ok){const t=await n.text();try{const e=JSON.parse(t);throw new Error(e.detail||t)}catch{throw new Error(t||` (${n.status})`)}}return await n.json()}async function UE(n){const t=await Ue(`${Kt}/users/sessions/${encodeURIComponent(n)}`,{method:"DELETE"});if(!t.ok){const e=await t.text();try{const s=JSON.parse(e);throw new Error(s.detail||e)}catch{throw new Error(e||` (${t.status})`)}}return await t.json()}async function VE(){const n=await Ue(`${Kt}/users/sessions/revoke-all`,{method:"POST"});if(!n.ok){const t=await n.text();try{const e=JSON.parse(t);throw new Error(e.detail||t)}catch{throw new Error(t||` (${n.status})`)}}return await n.json()}async function GE(n){const t=await fetch(`${Kt}/auth/login-unlock/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok){const e=await t.text();try{const s=JSON.parse(e);throw new Error(s.detail||e)}catch{throw new Error(e||` (${t.status})`)}}return await t.json()}async function zE(n){const t=await fetch(`${Kt}/auth/login-unlock/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok){const e=await t.text();try{const s=JSON.parse(e);throw new Error(s.detail||e)}catch{throw new Error(e||` (${t.status})`)}}return await t.json()}async function WE(){const n=await Ue(`${Kt}/security/2fa/status`);if(!n.ok){const t=await n.text();try{const e=JSON.parse(t);throw new Error(e.detail||t)}catch{throw new Error(t||` (${n.status})`)}}return n.json()}async function KE(){const n=await Ue(`${Kt}/security/2fa/setup`,{method:"POST"});if(!n.ok){const t=await n.text();try{const e=JSON.parse(t);throw new Error(e.detail||t)}catch{throw new Error(t||` (${n.status})`)}}return n.json()}async function XE(n){const t=await Ue(`${Kt}/security/2fa/enable`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:n})});if(!t.ok){const e=await t.text();try{const s=JSON.parse(e);throw new Error(s.detail||e)}catch{throw new Error(e||` (${t.status})`)}}return t.json()}async function YE(n){const t=await Ue(`${Kt}/security/2fa/disable`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:n})});if(!t.ok){const e=await t.text();try{const s=JSON.parse(e);throw new Error(s.detail||e)}catch{throw new Error(e||` (${t.status})`)}}return t.json()}async function JE(){const n=await Ue(`${Kt}/security/2fa/backup-codes`);if(!n.ok){const t=await n.text();try{const e=JSON.parse(t);throw new Error(e.detail||t)}catch{throw new Error(t||` (${n.status})`)}}return n.json()}async function ZE(){const n=await Ue(`${Kt}/security/social-bindings`);if(!n.ok){const t=await n.text();try{const e=JSON.parse(t);throw new Error(e.detail||t)}catch{throw new Error(t||` (${n.status})`)}}return n.json()}async function QE(n){const t=await Ue(`${Kt}/security/social-bindings/${n}`,{method:"DELETE"});if(!t.ok){const e=await t.text();try{const s=JSON.parse(e);throw new Error(s.detail||e)}catch{throw new Error(e||` (${t.status})`)}}return t.json()}async function qE(n){const t=await Ue(`${Kt}/security/password-breach-check`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:n})});if(!t.ok){const e=await t.text();try{const s=JSON.parse(e);throw new Error(s.detail||e)}catch{throw new Error(e||` (${t.status})`)}}return t.json()}function Ne(n,t,e){const i=window.showToast;typeof i=="function"?i({type:n,title:t,message:e}):n==="error"&&alert(`${t}${e?`
`+e:""}`)}const tC=()=>Kt.replace("http://","ws://").replace("https://","wss://");class eC{constructor(t){kt(this,"ws",null);kt(this,"documentId");kt(this,"reconnectAttempts",0);kt(this,"maxReconnectAttempts",5);kt(this,"reconnectDelay",1e3);kt(this,"heartbeatInterval",null);kt(this,"onMessageCallback",null);kt(this,"onErrorCallback",null);kt(this,"onCloseCallback",null);kt(this,"isManuallyClosed",!1);this.documentId=t}connect(){return new Promise((t,e)=>{if(this.isManuallyClosed){e(new Error("WebSocket "));return}try{const i=`${tC()}/ws/documents/${this.documentId}/progress`;console.log(` WebSocket: ${i}`),this.ws=new WebSocket(i),this.ws.onopen=()=>{console.log(`WebSocket : ${this.documentId}`),this.reconnectAttempts=0,t()},this.ws.onmessage=r=>{try{const o=JSON.parse(r.data);if(o.type==="heartbeat")return;console.log(` WebSocket  (${this.documentId}):`,o);const a={type:o.type||"progress",document_id:o.document_id||this.documentId,status:o.status||"parsing",parse_progress:o.parse_progress||0,num_pages:o.num_pages||0,parse_job:o.parse_job,message:o.message};this.onMessageCallback&&this.onMessageCallback(a)}catch(o){console.error(" WebSocket :",o,r.data)}},this.ws.onerror=r=>{console.error("WebSocket :",r),this.onErrorCallback&&this.onErrorCallback(r),e(r)},this.ws.onclose=()=>{if(console.log(`WebSocket : ${this.documentId}, : ${this.isManuallyClosed}`),this.onCloseCallback&&this.onCloseCallback(),!this.isManuallyClosed&&this.reconnectAttempts<this.maxReconnectAttempts){this.reconnectAttempts++;const r=this.reconnectDelay*this.reconnectAttempts;console.log(`${r}ms  (${this.reconnectAttempts}/${this.maxReconnectAttempts})...`),setTimeout(()=>{this.connect().catch(console.error)},r)}else this.isManuallyClosed||console.error("WebSocket ")}}catch(s){e(s)}})}onMessage(t){this.onMessageCallback=t}onError(t){this.onErrorCallback=t}onClose(t){this.onCloseCallback=t}disconnect(){this.isManuallyClosed=!0,this.ws&&(this.ws.close(),this.ws=null),this.heartbeatInterval!==null&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}isConnected(){return this.ws!==null&&this.ws.readyState===WebSocket.OPEN}}const sC={class:"dashboard"},nC={key:0,class:"email-verification-banner"},iC={class:"email-verification-content"},rC={class:"email-verification-actions"},oC=["disabled"],aC={key:0,class:"loading-spinner-small"},lC={style:{display:"flex","align-items":"center","justify-content":"space-between",gap:"12px"}},cC={style:{display:"flex",gap:"10px","align-items":"center","flex-wrap":"wrap"}},uC=["disabled"],dC={class:"dashboard-search"},hC={key:1,class:"empty-state"},fC={key:2,class:"empty-state"},pC={class:"empty-state-content"},gC={key:3,class:"card-grid"},vC={key:0,class:"doc-checkbox-container"},mC=["checked","onClick"],yC=["src","alt","onError","onLoad"],bC={key:1,class:"doc-thumbnail-placeholder"},wC={key:2,class:"doc-thumbnail-overlay"},AC={class:"doc-processing-badge"},xC={key:0},SC={key:1},EC=["onClick","disabled"],CC={key:0,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_C={key:1,class:"doc-progress-section"},kC={class:"progress-bar-wrapper"},TC={class:"progress-bar"},PC={class:"progress-text"},RC={key:0},IC={key:1},MC={class:"doc-footer"},LC={class:"doc-title-footer"},OC={class:"doc-meta-footer"},DC={key:0},NC={key:1},FC={key:0},$C={key:2},qa="en",tl="zh",BC=2*60*1e3,jC=fs({__name:"DashboardView",setup(n){const t=Ao(),e=Qd(),s=Xa(),i=j=>(typeof j=="number"&&Number.isFinite(j)?j:0).toFixed(2),r=(...j)=>{},o=et([]),a=et(""),l=et("");let u;const d=et(null),h=et(null),f=et(""),p=et(null),g=new Map,m=new Map,w=new Set;let b;const S=et(null),C=et(!1),T=et(""),_=et(""),R=et(null),M=et(""),N=et(!1),I=et(new Set),G=et(!1),X=et(!1),z=et(!1),ot=j=>{const H=j.target;if(!(H&&(H.tagName==="INPUT"||H.tagName==="TEXTAREA"||H.isContentEditable||H.tagName==="SELECT"))){if(j.key==="/"&&!j.ctrlKey&&!j.metaKey&&!j.altKey||j.key.toLowerCase()==="f"&&(j.ctrlKey||j.metaKey)){j.preventDefault();const st=document.querySelector(".dashboard-search-input");st==null||st.focus();return}if(j.key==="Escape"){a.value&&(a.value=""),I.value.clear();return}}},q=Wt(()=>{const j=l.value.trim().toLowerCase();return j?o.value.filter(H=>(H.title||"").toLowerCase().includes(j)):o.value}),nt=()=>{a.value="",I.value.clear()};hs(a,j=>{I.value.clear(),j&&N.value&&(N.value=!1),u&&clearTimeout(u),u=window.setTimeout(()=>{l.value=j},200)});const U=(j,H)=>{const $=o.value.findIndex(st=>st.document_id===j);$>=0&&o.value.splice($,1,{...o.value[$],...H})},K=async()=>{if(!X.value){X.value=!0;try{const j=p.value;j?await Mt(j,!0):await Rt(!0),Ne("success","","")}catch(j){Ne("error","",(j==null?void 0:j.message)||"")}finally{X.value=!1}}},tt=async(j,H={})=>{var V;const $=o.value.findIndex(E=>E.document_id===j);if($<0)return;let st=!1;try{const yt=(await yy(j)).document;if((yt==null?void 0:yt.status)==="parsed"||(yt==null?void 0:yt.status)==="ready")U(j,{title:yt.title||o.value[$].title,num_pages:yt.num_pages??H.numPagesHint??o.value[$].num_pages,lang_in:yt.lang_in||o.value[$].lang_in,lang_out:yt.lang_out||o.value[$].lang_out,status:"ready",progress:100}),st=!0;else{U(j,{status:"parsing",progress:Math.max(o.value[$].progress||0,90)}),Ne("info","","");return}}catch{if(H.numPagesHint!==void 0)U(j,{status:"ready",progress:100,num_pages:H.numPagesHint}),st=!0;else{Ne("warning","","");return}}finally{if(st){(V=H.ws)==null||V.disconnect(),g.delete(j),m.delete(j),w.delete(j);const E=H.projectId||p.value;E&&await Mt(E,!0),t.replace({query:{}})}}},Ct=async j=>{const{document_id:H,data:$,projectId:st,ws:V}=j,E=o.value.findIndex(Et=>Et.document_id===H);if(E<0)return;const yt=o.value[E],wt=(Et,re,is)=>Math.max(re,Math.min(is,Et)),Dt=Et=>{if(Et==null)return;const re=typeof Et=="number"?Et:Number(Et);if(Number.isFinite(re))return re>=0&&re<=1?re*100:re};if($.status==="uploading"){const Et=Dt($.parse_progress),re=Et!==void 0?Et:yt.progress||0,is=wt(re,0,30);U(H,{status:"uploading",progress:Math.max(yt.progress||0,is)}),r(`[] : ${is.toFixed(2)}%`);return}if($.status==="parsing"){m.has(H)||m.set(H,Date.now());let Et,re;if($.parse_job){const Ht=$.parse_job;if(Ht.total&&Ht.total>0){const ve=(Ht.done||0)/Ht.total;Et=30+wt(ve,0,1)*70,r(`[]  Job : ${Ht.done}/${Ht.total} = ${ve}, : ${Et.toFixed(2)}%`)}else{const ve=Dt(Ht.progress);ve!==void 0&&(Et=30+wt(ve/100,0,1)*70,r(`[]  Job progress : ${Ht.progress}, : ${Et.toFixed(2)}%`))}re={parse_done:typeof Ht.done=="number"?Ht.done:void 0,parse_total:typeof Ht.total=="number"?Ht.total:void 0,parse_eta_s:typeof Ht.eta_s=="number"?Ht.eta_s:void 0,parse_message:typeof Ht.message=="string"?Ht.message:void 0,parse_substage:typeof Ht.substage=="string"?Ht.substage:void 0}}else if($.parse_progress!==void 0&&$.parse_progress!==null){const Ht=Dt($.parse_progress);if(Ht!==void 0){const ve=wt(Ht,0,100)/100;Et=30+ve*70,r(`[]  parse_progress: ${$.parse_progress}% -> ${ve}, : ${Et.toFixed(2)}%`)}}if(Et===void 0){const Ht=m.get(H)||Date.now(),ve=Date.now()-Ht;Et=30+wt(ve/35e3,0,1)*60,r("[] :",Et.toFixed(2))}Et=wt(Et,30,99);const is={status:"parsing",progress:Et,...re||{}};$.num_pages!==void 0&&$.num_pages>0&&(is.num_pages=$.num_pages),is.progress=Math.max(yt.progress||0,is.progress||0),U(H,is);return}if($.status==="parsed"||$.status==="ready"){const Et=typeof $.num_pages=="number"?$.num_pages:void 0;!Et||Et<=0?(r(` parsed/ready  (${H}): num_pages=${$.num_pages}`),U(H,{status:"parsing",progress:Math.max(yt.progress||0,99)})):r(` (${H}): num_pages=${$.num_pages}`),await tt(H,{numPagesHint:Et,projectId:st,ws:V});return}},vt=(j,H={})=>{const $=new eC(j);return g.set(j,$),$.onMessage(st=>Ct({document_id:j,data:st,projectId:H.projectId,ws:$})),$.onError(st=>{var V;U(j,{status:"parsing",progress:Math.max(((V=o.value.find(E=>E.document_id===j))==null?void 0:V.progress)||0,50)}),Ne("warning","","")}),$.onClose(()=>{g.delete(j)}),$.connect().catch(st=>{Ne("warning","","")}),$},Mt=async(j,H=!1)=>{try{const st=(await wE(j)).documents.map(V=>({document_id:V.document_id,title:V.title,num_pages:V.num_pages,lang_in:V.lang_in,lang_out:V.lang_out,status:V.status==="parsed"?"ready":V.status==="parsing"?"parsing":"ready",progress:V.status==="parsed"?100:0,thumbnailError:!1}));if(H){const V=o.value.filter(Dt=>Dt.status==="uploading"||Dt.status==="parsing"||Dt.document_id.startsWith("temp-")),E=new Set(V.map(Dt=>Dt.document_id)),yt=st.filter(Dt=>!E.has(Dt.document_id)),wt=V.map(Dt=>{const Et=st.find(re=>re.document_id===Dt.document_id);return Et?{...Et,progress:Dt.progress||Et.progress}:Dt});o.value=[...wt,...yt]}else o.value=st;p.value=j}catch($){console.error(":",$),H||(o.value=[])}},Rt=async(j=!1)=>{try{const H=await AE(),$=H.documents.map(st=>({document_id:st.document_id,title:st.title,num_pages:st.num_pages,lang_in:st.lang_in,lang_out:st.lang_out,status:st.status==="parsed"?"ready":st.status==="parsing"?"parsing":"ready",progress:st.status==="parsed"?100:0,thumbnailError:!1}));if(j){const st=o.value.filter(wt=>wt.status==="uploading"||wt.status==="parsing"||wt.document_id.startsWith("temp-")),V=new Set(st.map(wt=>wt.document_id)),E=$.filter(wt=>!V.has(wt.document_id)),yt=st.map(wt=>{const Dt=$.find(Et=>Et.document_id===wt.document_id);return Dt?{...Dt,progress:wt.progress||Dt.progress}:wt});o.value=[...yt,...E]}else o.value=$;$.length>0&&H.documents[0].project_id&&(p.value=H.documents[0].project_id)}catch(H){console.error(":",H),j||(o.value=[])}},Vt=()=>{var j;if(s.user&&!s.user.email_verified){Ne("warning","","");return}(j=d.value)==null||j.click()},It=()=>{var j;if(s.user&&!s.user.email_verified){Ne("warning","","");return}(j=h.value)==null||j.click()},ie=async()=>{var j;if(!((j=s.user)!=null&&j.email)){Ne("error","","");return}z.value=!0;try{const H=await Lv({email:s.user.email});Ne("success","",H.message),H.verification_url&&Ne("info","",`${H.verification_url}`)}catch(H){Ne("error","",H.message)}finally{z.value=!1}},lt=j=>`http://localhost:8000/v1/documents/${j}/thumbnail?width=400&height=500`,L=(j,H)=>{const $=j.target;$&&($.style.display="none");const st=o.value.findIndex(V=>V.document_id===H);st>=0&&o.value.splice(st,1,{...o.value[st],thumbnailError:!0})},W=j=>{const H=o.value.findIndex($=>$.document_id===j);H>=0&&o.value[H].thumbnailError&&o.value.splice(H,1,{...o.value[H],thumbnailError:!1})},Q=(j,H)=>{R.value=j,M.value=H,T.value="",_.value=` "${H}" `,C.value=!0},dt=()=>{R.value=null,M.value="",G.value=!1},ct=()=>{N.value=!0,I.value.clear()},k=()=>{N.value=!1,I.value.clear()},P=j=>{const H=o.value.find($=>$.document_id===j);H&&H.status==="ready"&&(H.document_id.startsWith("temp-")||(I.value.has(j)?I.value.delete(j):I.value.add(j)))},B=()=>{if(I.value.size===0)return;const j=I.value.size;G.value=!0,T.value="",_.value=` ${j} `,C.value=!0},Y=async()=>{G.value?await Z():await J()},J=async()=>{if(!R.value)return;const j=R.value,H=M.value;S.value=j;try{await xE(j),Ne("success","",` "${H}" `);const $=o.value.findIndex(V=>V.document_id===j);$>=0&&o.value.splice($,1);const st=g.get(j);st&&(st.close(),g.delete(j)),C.value=!1,R.value=null,M.value=""}catch($){Ne("error","",$.message||"")}finally{S.value=null}},Z=async()=>{if(I.value.size===0)return;const j=Array.from(I.value);S.value="batch";try{const H=await SE(j);if(H.success_count>0){if(Ne("success","",` ${H.success_count} `),H.success_ids.forEach($=>{const st=o.value.findIndex(E=>E.document_id===$);st>=0&&o.value.splice(st,1);const V=g.get($);V&&(V.close(),g.delete($))}),H.failed_count>0){const $=H.failed_ids.map(st=>`${st.document_id}: ${st.reason}`).join(`
`);Ne("error","",` ${H.failed_count} `),console.error(":",H.failed_ids)}}else Ne("error","","");I.value.clear(),N.value=!1,C.value=!1,G.value=!1}catch(H){Ne("error","",H.message||"")}finally{S.value=null}},pt=async j=>{var V;const H=j.target,$=(V=H.files)==null?void 0:V[0];if(!$)return;const st={document_id:`temp-${Date.now()}`,title:$.name,lang_in:"en",lang_out:"zh",status:"uploading",progress:0,thumbnailError:!1};o.value.unshift(st);try{let E=p.value;E||(E=(await lh(f.value||"")).project_id,p.value=E);const yt=await u0({project_id:E,file:$,lang_in:qa,lang_out:tl});st.document_id=yt.document_id,st.num_pages=yt.num_pages,vt(yt.document_id,{projectId:E})}catch(E){console.error("Upload failed:",E),o.value=o.value.filter(yt=>yt.document_id!==st.document_id)}H.value=""},ut=async j=>{var E;const H=j.target,$=Array.from(H.files??[]);if($.length===0)return;const st=$.map((yt,wt)=>({document_id:`temp-${Date.now()}-${wt}`,title:yt.name,lang_in:qa,lang_out:tl,status:"uploading",progress:0,thumbnailError:!1}));o.value.unshift(...st);const V=st.map(yt=>{const wt=window.setInterval(()=>{const Dt=o.value.findIndex(Et=>Et.document_id===yt.document_id);if(Dt>=0){const Et=o.value[Dt],re=Math.min(30,(Et.progress||0)+2);o.value.splice(Dt,1,{...Et,progress:re}),re>=30&&clearInterval(wt)}},100);return wt});try{const yt=await TE({project_name:f.value||"",files:$,lang_in:qa,lang_out:tl});yt.project_id&&(p.value=yt.project_id),V.forEach(clearInterval),(E=yt.documents)==null||E.forEach((wt,Dt)=>{if(st[Dt]){const Et=st[Dt];Et.document_id=wt.document_id,Et.status="parsing",Et.progress=30,vt(wt.document_id,{projectId:p.value||void 0})}})}catch(yt){console.error("Batch upload failed:",yt),V.forEach(clearInterval),st.forEach(wt=>{o.value=o.value.filter(Dt=>Dt.document_id!==wt.document_id)})}H.value=""},ht=j=>{t.push(`/project/${j}`)},rt=async()=>{const j=e.query.uploading==="true",H=e.query.filename;if(!j||!H)return;const $=window.__pendingUploadFile;if(!$){t.replace("/app");return}const st=decodeURIComponent(H),V={document_id:`temp-${Date.now()}`,title:st,lang_in:qa,lang_out:tl,status:"uploading",progress:0,thumbnailError:!1};o.value.unshift(V),r(`[] : ${V.document_id}, : ${V.progress}%`);try{let E=p.value;E||(E=(await lh("")).project_id,p.value=E);const yt=await u0({project_id:E,file:$,lang_in:qa,lang_out:tl}),wt=o.value.findIndex(Dt=>Dt.document_id===V.document_id);wt>=0&&(o.value[wt]={...o.value[wt],document_id:yt.document_id,num_pages:yt.num_pages}),delete window.__pendingUploadFile,t.replace({query:{document_id:yt.document_id,uploading:"true",filename:H}}),vt(yt.document_id,{projectId:E})}catch(E){console.error("Upload failed:",E),Ne("error","",""),o.value=o.value.filter(yt=>yt.document_id!==V.document_id),t.replace("/app"),delete window.__pendingUploadFile}},_t=async()=>{const j=e.query.document_id,H=e.query.uploading==="true",$=e.query.filename;if(!j&&H){await rt();return}if(!j)return;const st=o.value.find(E=>E.document_id===j);if(st&&st.status==="ready"){t.replace({query:{}});return}let V=st||o.value.find(E=>E.document_id===j);V||(V={document_id:j,title:$?decodeURIComponent($):"...",lang_in:qa,lang_out:tl,status:H?"uploading":"parsing",progress:H?0:30,thumbnailError:!1},o.value.unshift(V)),vt(j,{projectId:p.value||void 0})};return Js(async()=>{const j=e.query.project_id;if(j)p.value=j,await Mt(j);else try{if(await Rt(!1),o.value.length===0&&!p.value){const{project_id:H}=await lh(f.value||"");p.value=H}}catch(H){console.error(":",H);try{const{project_id:$}=await lh(f.value||"");p.value=$,await Mt($)}catch($){console.error(":",$)}}await _t(),window.addEventListener("keydown",ot),b=window.setInterval(()=>{const H=Date.now();o.value.forEach($=>{if($.status==="parsing"){if(!m.has($.document_id)){m.set($.document_id,H);return}const st=m.get($.document_id)||H;!w.has($.document_id)&&H-st>BC&&(w.add($.document_id),Ne("warning","",""))}})},5e3)}),Ka(()=>{g.forEach(j=>j.disconnect()),g.clear(),window.removeEventListener("keydown",ot),b&&clearInterval(b)}),(j,H)=>(O(),F("section",sC,[ue(s).user&&!ue(s).user.email_verified?(O(),F("div",nC,[v("div",iC,[H[2]||(H[2]=$e('<div class="email-verification-icon" data-v-b3651b59><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-b3651b59><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b3651b59></path><polyline points="22,6 12,13 2,6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b3651b59></polyline></svg></div><div class="email-verification-text" data-v-b3651b59><strong data-v-b3651b59></strong><span data-v-b3651b59></span></div>',2)),v("div",rC,[v("button",{class:"email-verification-btn",onClick:ie,disabled:z.value},[z.value?(O(),F("span",aC)):gt("",!0),v("span",null,at(z.value?"...":""),1)],8,oC)])])])):gt("",!0),v("div",lC,[H[9]||(H[9]=v("h2",{style:{margin:"0"}},"",-1)),v("div",cC,[v("button",{class:jt(["dashboard-refresh-icon-btn",{"is-spinning":X.value}]),disabled:X.value,title:"",onClick:K},[...H[3]||(H[3]=[v("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},[v("path",{d:"M20 12a8 8 0 10-2.343 5.657",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-linecap":"round"}),v("path",{d:"M20 8v4h-4",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],10,uC),v("div",dC,[H[4]||(H[4]=v("span",{class:"dashboard-search-icon"},[v("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},[v("circle",{cx:"11",cy:"11",r:"6",stroke:"currentColor","stroke-width":"1.8",fill:"none"}),v("line",{x1:"16",y1:"16",x2:"21",y2:"21",stroke:"currentColor","stroke-width":"1.8","stroke-linecap":"round"})])],-1)),Re(v("input",{class:"simple-input dashboard-search-input","onUpdate:modelValue":H[0]||(H[0]=$=>a.value=$),placeholder:""},null,512),[[$s,a.value]])]),Nt(_n,{class:"action-btn",onClick:Vt},{default:ce(()=>[...H[5]||(H[5]=[de("PDF",-1)])]),_:1}),Nt(_n,{class:"action-btn action-btn--gradient",onClick:It},{default:ce(()=>[...H[6]||(H[6]=[de("PDF",-1)])]),_:1}),I.value.size>0?(O(),Ye(_n,{key:0,class:"action-btn action-btn--danger",onClick:B},{default:ce(()=>[de("  ("+at(I.value.size)+") ",1)]),_:1})):gt("",!0),N.value?(O(),Ye(_n,{key:1,onClick:k,class:"action-btn action-btn--muted"},{default:ce(()=>[...H[7]||(H[7]=[de("  ",-1)])]),_:1})):o.value.length>0?(O(),Ye(_n,{key:2,onClick:ct,class:"action-btn action-btn--primary"},{default:ce(()=>[...H[8]||(H[8]=[de("  ",-1)])]),_:1})):gt("",!0),v("input",{ref_key:"fileInput",ref:d,type:"file",accept:"application/pdf",style:{display:"none"},onChange:pt},null,544),v("input",{ref_key:"filesInput",ref:h,type:"file",accept:"application/pdf",multiple:"",style:{display:"none"},onChange:ut},null,544)])]),o.value.length===0?(O(),F("div",hC,[...H[10]||(H[10]=[$e('<div class="empty-state-content" data-v-b3651b59><div class="empty-state-icon" data-v-b3651b59><svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-b3651b59><path d="M18 14C18 12.8954 18.8954 12 20 12H44C45.1046 12 46 12.8954 46 14V42C46 43.1046 45.1046 44 44 44H20C18.8954 44 18 43.1046 18 42V14Z" stroke="url(#emptyGradient)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="none" data-v-b3651b59></path><path d="M22 20H42M22 26H36M22 32H42" stroke="url(#emptyGradient)" stroke-width="2.5" stroke-linecap="round" data-v-b3651b59></path><path d="M22 38H36" stroke="url(#emptyGradient)" stroke-width="2.5" stroke-linecap="round" opacity="0.6" data-v-b3651b59></path><circle cx="50" cy="18" r="3" fill="url(#emptyGradient)" opacity="0.8" data-v-b3651b59></circle><defs data-v-b3651b59><linearGradient id="emptyGradient" x1="0" y1="0" x2="64" y2="64" gradientUnits="userSpaceOnUse" data-v-b3651b59><stop offset="0%" stop-color="#3b82f6" data-v-b3651b59></stop><stop offset="100%" stop-color="#8b5cf6" data-v-b3651b59></stop></linearGradient></defs></svg></div><h3 class="empty-state-title" data-v-b3651b59></h3><p class="empty-state-description" data-v-b3651b59> PDF </p></div>',1)])])):q.value.length===0?(O(),F("div",fC,[v("div",pC,[H[12]||(H[12]=$e('<div class="empty-state-icon" data-v-b3651b59><svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-b3651b59><circle cx="28" cy="28" r="12" stroke="url(#emptySearchGradient)" stroke-width="2.5" fill="none" data-v-b3651b59></circle><line x1="36" y1="36" x2="48" y2="48" stroke="url(#emptySearchGradient)" stroke-width="2.5" stroke-linecap="round" data-v-b3651b59></line><defs data-v-b3651b59><linearGradient id="emptySearchGradient" x1="0" y1="0" x2="64" y2="64" gradientUnits="userSpaceOnUse" data-v-b3651b59><stop offset="0%" stop-color="#3b82f6" data-v-b3651b59></stop><stop offset="100%" stop-color="#8b5cf6" data-v-b3651b59></stop></linearGradient></defs></svg></div><h3 class="empty-state-title" data-v-b3651b59></h3><p class="empty-state-description" data-v-b3651b59></p>',3)),Nt(_n,{class:"action-btn action-btn--muted",onClick:nt},{default:ce(()=>[...H[11]||(H[11]=[de("  ",-1)])]),_:1})])])):(O(),F("div",gC,[(O(!0),F(fe,null,dn(q.value,$=>(O(),Ye(eE,{key:$.document_id,class:jt(["doc-card",{"doc-card--parsing":$.status==="parsing","doc-card--ready":$.status==="ready","doc-card--selected":N.value&&I.value.has($.document_id)}]),onClick:st=>N.value?P($.document_id):$.status==="ready"?ht($.document_id):void 0},{default:ce(()=>[N.value&&$.status==="ready"&&!$.document_id.startsWith("temp-")?(O(),F("div",vC,[v("input",{type:"checkbox",checked:I.value.has($.document_id),onClick:Je(st=>P($.document_id),["stop"]),class:"doc-checkbox"},null,8,mC)])):gt("",!0),v("div",{class:jt(["doc-thumbnail-container",{"doc-thumbnail-container--processing":$.status!=="ready"}])},[$.document_id&&!$.document_id.startsWith("temp-")&&!$.thumbnailError?(O(),F("img",{key:0,src:lt($.document_id),alt:$.title,class:jt(["doc-thumbnail",{"doc-thumbnail--loading":$.status!=="ready"}]),onError:st=>L(st,$.document_id),onLoad:st=>W($.document_id)},null,42,yC)):(O(),F("div",bC,[Nt(a0,{spinning:$.status!=="ready"},null,8,["spinning"])])),$.status!=="ready"?(O(),F("div",wC,[v("div",AC,[$.status==="uploading"?(O(),F("span",xC,"")):$.status==="parsing"?(O(),F("span",SC,"")):gt("",!0)])])):gt("",!0),!N.value&&$.status==="ready"&&!$.document_id.startsWith("temp-")?(O(),F("button",{key:3,class:"doc-delete-button",onClick:Je(st=>Q($.document_id,$.title),["stop"]),disabled:S.value===$.document_id,title:""},[S.value!==$.document_id?(O(),F("svg",CC,[...H[13]||(H[13]=[v("path",{d:"M3 6H5H21M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(O(),Ye(a0,{key:1,spinning:!0}))],8,EC)):gt("",!0)],2),$.status==="uploading"||$.status==="parsing"?(O(),F("div",_C,[v("div",kC,[v("div",TC,[v("div",{class:"progress-fill",style:Ss({width:`${$.progress||0}%`})},null,4)]),v("div",PC,[$.status==="uploading"?(O(),F("span",RC,"... "+at(i($.progress))+"%",1)):$.status==="parsing"?(O(),F("span",IC," ... "+at(i($.progress))+"% ",1)):gt("",!0)])])])):gt("",!0),v("div",MC,[v("div",LC,at($.title),1),v("div",OC,[$.status==="uploading"?(O(),F("span",DC," ... ")):$.status==="parsing"?(O(),F("span",NC,[$.num_pages&&$.num_pages>0?(O(),F("span",FC,at($.num_pages)+"   ",1)):gt("",!0),H[14]||(H[14]=de("... ",-1))])):(O(),F("span",$C,at($.num_pages||"?")+"   "+at($.lang_in)+"  "+at($.lang_out)+"   ",1))])])]),_:2},1032,["class","onClick"]))),128))])),Nt(pE,{visible:C.value,"onUpdate:visible":H[1]||(H[1]=$=>C.value=$),title:T.value,message:_.value,type:"danger","confirm-text":"","cancel-text":"",loading:S.value!==null,onConfirm:Y,onCancel:dt},null,8,["visible","title","message","loading"])]))}}),HC=Ln(jC,[["__scopeId","data-v-b3651b59"]]);var UC={9306:(n,t,e)=>{var s=e(4901),i=e(6823),r=TypeError;n.exports=function(o){if(s(o))return o;throw new r(i(o)+" is not a function")}},3506:(n,t,e)=>{var s=e(3925),i=String,r=TypeError;n.exports=function(o){if(s(o))return o;throw new r("Can't set "+i(o)+" as a prototype")}},7080:(n,t,e)=>{var s=e(4402).has;n.exports=function(i){return s(i),i}},679:(n,t,e)=>{var s=e(1625),i=TypeError;n.exports=function(r,o){if(s(o,r))return r;throw new i("Incorrect invocation")}},8551:(n,t,e)=>{var s=e(34),i=String,r=TypeError;n.exports=function(o){if(s(o))return o;throw new r(i(o)+" is not an object")}},7811:n=>{n.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},7394:(n,t,e)=>{var s=e(4576),i=e(6706),r=e(2195),o=s.ArrayBuffer,a=s.TypeError;n.exports=o&&i(o.prototype,"byteLength","get")||function(l){if(r(l)!=="ArrayBuffer")throw new a("ArrayBuffer expected");return l.byteLength}},3238:(n,t,e)=>{var s=e(4576),i=e(7476),r=e(7394),o=s.ArrayBuffer,a=o&&o.prototype,l=a&&i(a.slice);n.exports=function(u){if(r(u)!==0||!l)return!1;try{return l(u,0,0),!1}catch{return!0}}},5169:(n,t,e)=>{var s=e(3238),i=TypeError;n.exports=function(r){if(s(r))throw new i("ArrayBuffer is detached");return r}},5636:(n,t,e)=>{var s=e(4576),i=e(9504),r=e(6706),o=e(7696),a=e(5169),l=e(7394),u=e(4483),d=e(1548),h=s.structuredClone,f=s.ArrayBuffer,p=s.DataView,g=Math.min,m=f.prototype,w=p.prototype,b=i(m.slice),S=r(m,"resizable","get"),C=r(m,"maxByteLength","get"),T=i(w.getInt8),_=i(w.setInt8);n.exports=(d||u)&&function(R,M,N){var I=l(R),G=M===void 0?I:o(M),X=!S||!S(R),z;if(a(R),d&&(R=h(R,{transfer:[R]}),I===G&&(N||X)))return R;if(I>=G&&(!N||X))z=b(R,0,G);else{var ot=N&&!X&&C?{maxByteLength:C(R)}:void 0;z=new f(G,ot);for(var q=new p(R),nt=new p(z),U=g(G,I),K=0;K<U;K++)_(nt,K,T(q,K))}return d||u(R),z}},4644:(n,t,e)=>{var s=e(7811),i=e(3724),r=e(4576),o=e(4901),a=e(34),l=e(9297),u=e(6955),d=e(6823),h=e(6699),f=e(6840),p=e(2106),g=e(1625),m=e(2787),w=e(2967),b=e(8227),S=e(3392),C=e(1181),T=C.enforce,_=C.get,R=r.Int8Array,M=R&&R.prototype,N=r.Uint8ClampedArray,I=N&&N.prototype,G=R&&m(R),X=M&&m(M),z=Object.prototype,ot=r.TypeError,q=b("toStringTag"),nt=S("TYPED_ARRAY_TAG"),U="TypedArrayConstructor",K=s&&!!w&&u(r.opera)!=="Opera",tt=!1,Ct,vt,Mt,Rt={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Vt={BigInt64Array:8,BigUint64Array:8},It=function(k){if(!a(k))return!1;var P=u(k);return P==="DataView"||l(Rt,P)||l(Vt,P)},ie=function(ct){var k=m(ct);if(a(k)){var P=_(k);return P&&l(P,U)?P[U]:ie(k)}},lt=function(ct){if(!a(ct))return!1;var k=u(ct);return l(Rt,k)||l(Vt,k)},L=function(ct){if(lt(ct))return ct;throw new ot("Target is not a typed array")},W=function(ct){if(o(ct)&&(!w||g(G,ct)))return ct;throw new ot(d(ct)+" is not a typed array constructor")},Q=function(ct,k,P,B){if(i){if(P)for(var Y in Rt){var J=r[Y];if(J&&l(J.prototype,ct))try{delete J.prototype[ct]}catch{try{J.prototype[ct]=k}catch{}}}(!X[ct]||P)&&f(X,ct,P?k:K&&M[ct]||k,B)}},dt=function(ct,k,P){var B,Y;if(i){if(w){if(P){for(B in Rt)if(Y=r[B],Y&&l(Y,ct))try{delete Y[ct]}catch{}}if(!G[ct]||P)try{return f(G,ct,P?k:K&&G[ct]||k)}catch{}else return}for(B in Rt)Y=r[B],Y&&(!Y[ct]||P)&&f(Y,ct,k)}};for(Ct in Rt)vt=r[Ct],Mt=vt&&vt.prototype,Mt?T(Mt)[U]=vt:K=!1;for(Ct in Vt)vt=r[Ct],Mt=vt&&vt.prototype,Mt&&(T(Mt)[U]=vt);if((!K||!o(G)||G===Function.prototype)&&(G=function(){throw new ot("Incorrect invocation")},K))for(Ct in Rt)r[Ct]&&w(r[Ct],G);if((!K||!X||X===z)&&(X=G.prototype,K))for(Ct in Rt)r[Ct]&&w(r[Ct].prototype,X);if(K&&m(I)!==X&&w(I,X),i&&!l(X,q)){tt=!0,p(X,q,{configurable:!0,get:function(){return a(this)?this[nt]:void 0}});for(Ct in Rt)r[Ct]&&h(r[Ct],nt,Ct)}n.exports={NATIVE_ARRAY_BUFFER_VIEWS:K,TYPED_ARRAY_TAG:tt&&nt,aTypedArray:L,aTypedArrayConstructor:W,exportTypedArrayMethod:Q,exportTypedArrayStaticMethod:dt,getTypedArrayConstructor:ie,isView:It,isTypedArray:lt,TypedArray:G,TypedArrayPrototype:X}},5370:(n,t,e)=>{var s=e(6198);n.exports=function(i,r,o){for(var a=0,l=arguments.length>2?o:s(r),u=new i(l);l>a;)u[a]=r[a++];return u}},9617:(n,t,e)=>{var s=e(5397),i=e(5610),r=e(6198),o=function(a){return function(l,u,d){var h=s(l),f=r(h);if(f===0)return!a&&-1;var p=i(d,f),g;if(a&&u!==u){for(;f>p;)if(g=h[p++],g!==g)return!0}else for(;f>p;p++)if((a||p in h)&&h[p]===u)return a||p||0;return!a&&-1}};n.exports={includes:o(!0),indexOf:o(!1)}},4527:(n,t,e)=>{var s=e(3724),i=e(4376),r=TypeError,o=Object.getOwnPropertyDescriptor,a=s&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(l){return l instanceof TypeError}}();n.exports=a?function(l,u){if(i(l)&&!o(l,"length").writable)throw new r("Cannot set read only .length");return l.length=u}:function(l,u){return l.length=u}},7680:(n,t,e)=>{var s=e(9504);n.exports=s([].slice)},7628:(n,t,e)=>{var s=e(6198);n.exports=function(i,r){for(var o=s(i),a=new r(o),l=0;l<o;l++)a[l]=i[o-l-1];return a}},9928:(n,t,e)=>{var s=e(6198),i=e(1291),r=RangeError;n.exports=function(o,a,l,u){var d=s(o),h=i(l),f=h<0?d+h:h;if(f>=d||f<0)throw new r("Incorrect index");for(var p=new a(d),g=0;g<d;g++)p[g]=g===f?u:o[g];return p}},6319:(n,t,e)=>{var s=e(8551),i=e(9539);n.exports=function(r,o,a,l){try{return l?o(s(a)[0],a[1]):o(a)}catch(u){i(r,"throw",u)}}},2195:(n,t,e)=>{var s=e(9504),i=s({}.toString),r=s("".slice);n.exports=function(o){return r(i(o),8,-1)}},6955:(n,t,e)=>{var s=e(2140),i=e(4901),r=e(2195),o=e(8227),a=o("toStringTag"),l=Object,u=r(function(){return arguments}())==="Arguments",d=function(h,f){try{return h[f]}catch{}};n.exports=s?r:function(h){var f,p,g;return h===void 0?"Undefined":h===null?"Null":typeof(p=d(f=l(h),a))=="string"?p:u?r(f):(g=r(f))==="Object"&&i(f.callee)?"Arguments":g}},7740:(n,t,e)=>{var s=e(9297),i=e(5031),r=e(7347),o=e(4913);n.exports=function(a,l,u){for(var d=i(l),h=o.f,f=r.f,p=0;p<d.length;p++){var g=d[p];!s(a,g)&&!(u&&s(u,g))&&h(a,g,f(l,g))}}},2211:(n,t,e)=>{var s=e(9039);n.exports=!s(function(){function i(){}return i.prototype.constructor=null,Object.getPrototypeOf(new i)!==i.prototype})},2529:n=>{n.exports=function(t,e){return{value:t,done:e}}},6699:(n,t,e)=>{var s=e(3724),i=e(4913),r=e(6980);n.exports=s?function(o,a,l){return i.f(o,a,r(1,l))}:function(o,a,l){return o[a]=l,o}},6980:n=>{n.exports=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}},4659:(n,t,e)=>{var s=e(3724),i=e(4913),r=e(6980);n.exports=function(o,a,l){s?i.f(o,a,r(0,l)):o[a]=l}},2106:(n,t,e)=>{var s=e(283),i=e(4913);n.exports=function(r,o,a){return a.get&&s(a.get,o,{getter:!0}),a.set&&s(a.set,o,{setter:!0}),i.f(r,o,a)}},6840:(n,t,e)=>{var s=e(4901),i=e(4913),r=e(283),o=e(9433);n.exports=function(a,l,u,d){d||(d={});var h=d.enumerable,f=d.name!==void 0?d.name:l;if(s(u)&&r(u,f,d),d.global)h?a[l]=u:o(l,u);else{try{d.unsafe?a[l]&&(h=!0):delete a[l]}catch{}h?a[l]=u:i.f(a,l,{value:u,enumerable:!1,configurable:!d.nonConfigurable,writable:!d.nonWritable})}return a}},6279:(n,t,e)=>{var s=e(6840);n.exports=function(i,r,o){for(var a in r)s(i,a,r[a],o);return i}},9433:(n,t,e)=>{var s=e(4576),i=Object.defineProperty;n.exports=function(r,o){try{i(s,r,{value:o,configurable:!0,writable:!0})}catch{s[r]=o}return o}},3724:(n,t,e)=>{var s=e(9039);n.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},4483:(n,t,e)=>{var s=e(4576),i=e(9429),r=e(1548),o=s.structuredClone,a=s.ArrayBuffer,l=s.MessageChannel,u=!1,d,h,f,p;if(r)u=function(g){o(g,{transfer:[g]})};else if(a)try{l||(d=i("worker_threads"),d&&(l=d.MessageChannel)),l&&(h=new l,f=new a(2),p=function(g){h.port1.postMessage(null,[g])},f.byteLength===2&&(p(f),f.byteLength===0&&(u=p)))}catch{}n.exports=u},4055:(n,t,e)=>{var s=e(4576),i=e(34),r=s.document,o=i(r)&&i(r.createElement);n.exports=function(a){return o?r.createElement(a):{}}},6837:n=>{var t=TypeError,e=9007199254740991;n.exports=function(s){if(s>e)throw t("Maximum allowed index exceeded");return s}},5002:n=>{n.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},8727:n=>{n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6193:(n,t,e)=>{var s=e(4215);n.exports=s==="NODE"},2839:(n,t,e)=>{var s=e(4576),i=s.navigator,r=i&&i.userAgent;n.exports=r?String(r):""},9519:(n,t,e)=>{var s=e(4576),i=e(2839),r=s.process,o=s.Deno,a=r&&r.versions||o&&o.version,l=a&&a.v8,u,d;l&&(u=l.split("."),d=u[0]>0&&u[0]<4?1:+(u[0]+u[1])),!d&&i&&(u=i.match(/Edge\/(\d+)/),(!u||u[1]>=74)&&(u=i.match(/Chrome\/(\d+)/),u&&(d=+u[1]))),n.exports=d},4215:(n,t,e)=>{var s=e(4576),i=e(2839),r=e(2195),o=function(a){return i.slice(0,a.length)===a};n.exports=function(){return o("Bun/")?"BUN":o("Cloudflare-Workers")?"CLOUDFLARE":o("Deno/")?"DENO":o("Node.js/")?"NODE":s.Bun&&typeof Bun.version=="string"?"BUN":s.Deno&&typeof Deno.version=="object"?"DENO":r(s.process)==="process"?"NODE":s.window&&s.document?"BROWSER":"REST"}()},8574:(n,t,e)=>{var s=e(9504),i=Error,r=s("".replace),o=function(u){return String(new i(u).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,l=a.test(o);n.exports=function(u,d){if(l&&typeof u=="string"&&!i.prepareStackTrace)for(;d--;)u=r(u,a,"");return u}},6518:(n,t,e)=>{var s=e(4576),i=e(7347).f,r=e(6699),o=e(6840),a=e(9433),l=e(7740),u=e(2796);n.exports=function(d,h){var f=d.target,p=d.global,g=d.stat,m,w,b,S,C,T;if(p?w=s:g?w=s[f]||a(f,{}):w=s[f]&&s[f].prototype,w)for(b in h){if(C=h[b],d.dontCallGetSet?(T=i(w,b),S=T&&T.value):S=w[b],m=u(p?b:f+(g?".":"#")+b,d.forced),!m&&S!==void 0){if(typeof C==typeof S)continue;l(C,S)}(d.sham||S&&S.sham)&&r(C,"sham",!0),o(w,b,C,d)}}},9039:n=>{n.exports=function(t){try{return!!t()}catch{return!0}}},8745:(n,t,e)=>{var s=e(616),i=Function.prototype,r=i.apply,o=i.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(s?o.bind(r):function(){return o.apply(r,arguments)})},6080:(n,t,e)=>{var s=e(7476),i=e(9306),r=e(616),o=s(s.bind);n.exports=function(a,l){return i(a),l===void 0?a:r?o(a,l):function(){return a.apply(l,arguments)}}},616:(n,t,e)=>{var s=e(9039);n.exports=!s(function(){var i=(function(){}).bind();return typeof i!="function"||i.hasOwnProperty("prototype")})},9565:(n,t,e)=>{var s=e(616),i=Function.prototype.call;n.exports=s?i.bind(i):function(){return i.apply(i,arguments)}},350:(n,t,e)=>{var s=e(3724),i=e(9297),r=Function.prototype,o=s&&Object.getOwnPropertyDescriptor,a=i(r,"name"),l=a&&(function(){}).name==="something",u=a&&(!s||s&&o(r,"name").configurable);n.exports={EXISTS:a,PROPER:l,CONFIGURABLE:u}},6706:(n,t,e)=>{var s=e(9504),i=e(9306);n.exports=function(r,o,a){try{return s(i(Object.getOwnPropertyDescriptor(r,o)[a]))}catch{}}},7476:(n,t,e)=>{var s=e(2195),i=e(9504);n.exports=function(r){if(s(r)==="Function")return i(r)}},9504:(n,t,e)=>{var s=e(616),i=Function.prototype,r=i.call,o=s&&i.bind.bind(r,r);n.exports=s?o:function(a){return function(){return r.apply(a,arguments)}}},9429:(n,t,e)=>{var s=e(4576),i=e(6193);n.exports=function(r){if(i){try{return s.process.getBuiltinModule(r)}catch{}try{return Function('return require("'+r+'")')()}catch{}}}},7751:(n,t,e)=>{var s=e(4576),i=e(4901),r=function(o){return i(o)?o:void 0};n.exports=function(o,a){return arguments.length<2?r(s[o]):s[o]&&s[o][a]}},1767:n=>{n.exports=function(t){return{iterator:t,next:t.next,done:!1}}},8646:(n,t,e)=>{var s=e(9565),i=e(8551),r=e(1767),o=e(851);n.exports=function(a,l){(!l||typeof a!="string")&&i(a);var u=o(a);return r(i(u!==void 0?s(u,a):a))}},851:(n,t,e)=>{var s=e(6955),i=e(5966),r=e(4117),o=e(6269),a=e(8227),l=a("iterator");n.exports=function(u){if(!r(u))return i(u,l)||i(u,"@@iterator")||o[s(u)]}},81:(n,t,e)=>{var s=e(9565),i=e(9306),r=e(8551),o=e(6823),a=e(851),l=TypeError;n.exports=function(u,d){var h=arguments.length<2?a(u):d;if(i(h))return r(s(h,u));throw new l(o(u)+" is not iterable")}},5966:(n,t,e)=>{var s=e(9306),i=e(4117);n.exports=function(r,o){var a=r[o];return i(a)?void 0:s(a)}},3789:(n,t,e)=>{var s=e(9306),i=e(8551),r=e(9565),o=e(1291),a=e(1767),l="Invalid size",u=RangeError,d=TypeError,h=Math.max,f=function(p,g){this.set=p,this.size=h(g,0),this.has=s(p.has),this.keys=s(p.keys)};f.prototype={getIterator:function(){return a(i(r(this.keys,this.set)))},includes:function(p){return r(this.has,this.set,p)}},n.exports=function(p){i(p);var g=+p.size;if(g!==g)throw new d(l);var m=o(g);if(m<0)throw new u(l);return new f(p,m)}},4576:function(n){var t=function(e){return e&&e.Math===Math&&e};n.exports=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof global=="object"&&global)||t(typeof this=="object"&&this)||function(){return this}()||Function("return this")()},9297:(n,t,e)=>{var s=e(9504),i=e(8981),r=s({}.hasOwnProperty);n.exports=Object.hasOwn||function(a,l){return r(i(a),l)}},421:n=>{n.exports={}},397:(n,t,e)=>{var s=e(7751);n.exports=s("document","documentElement")},5917:(n,t,e)=>{var s=e(3724),i=e(9039),r=e(4055);n.exports=!s&&!i(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7})},7055:(n,t,e)=>{var s=e(9504),i=e(9039),r=e(2195),o=Object,a=s("".split);n.exports=i(function(){return!o("z").propertyIsEnumerable(0)})?function(l){return r(l)==="String"?a(l,""):o(l)}:o},3167:(n,t,e)=>{var s=e(4901),i=e(34),r=e(2967);n.exports=function(o,a,l){var u,d;return r&&s(u=a.constructor)&&u!==l&&i(d=u.prototype)&&d!==l.prototype&&r(o,d),o}},3706:(n,t,e)=>{var s=e(9504),i=e(4901),r=e(7629),o=s(Function.toString);i(r.inspectSource)||(r.inspectSource=function(a){return o(a)}),n.exports=r.inspectSource},1181:(n,t,e)=>{var s=e(8622),i=e(4576),r=e(34),o=e(6699),a=e(9297),l=e(7629),u=e(6119),d=e(421),h="Object already initialized",f=i.TypeError,p=i.WeakMap,g,m,w,b=function(_){return w(_)?m(_):g(_,{})},S=function(_){return function(R){var M;if(!r(R)||(M=m(R)).type!==_)throw new f("Incompatible receiver, "+_+" required");return M}};if(s||l.state){var C=l.state||(l.state=new p);C.get=C.get,C.has=C.has,C.set=C.set,g=function(_,R){if(C.has(_))throw new f(h);return R.facade=_,C.set(_,R),R},m=function(_){return C.get(_)||{}},w=function(_){return C.has(_)}}else{var T=u("state");d[T]=!0,g=function(_,R){if(a(_,T))throw new f(h);return R.facade=_,o(_,T,R),R},m=function(_){return a(_,T)?_[T]:{}},w=function(_){return a(_,T)}}n.exports={set:g,get:m,has:w,enforce:b,getterFor:S}},4209:(n,t,e)=>{var s=e(8227),i=e(6269),r=s("iterator"),o=Array.prototype;n.exports=function(a){return a!==void 0&&(i.Array===a||o[r]===a)}},4376:(n,t,e)=>{var s=e(2195);n.exports=Array.isArray||function(r){return s(r)==="Array"}},1108:(n,t,e)=>{var s=e(6955);n.exports=function(i){var r=s(i);return r==="BigInt64Array"||r==="BigUint64Array"}},4901:n=>{var t=typeof document=="object"&&document.all;n.exports=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"}},2796:(n,t,e)=>{var s=e(9039),i=e(4901),r=/#|\.prototype\./,o=function(h,f){var p=l[a(h)];return p===d?!0:p===u?!1:i(f)?s(f):!!f},a=o.normalize=function(h){return String(h).replace(r,".").toLowerCase()},l=o.data={},u=o.NATIVE="N",d=o.POLYFILL="P";n.exports=o},4117:n=>{n.exports=function(t){return t==null}},34:(n,t,e)=>{var s=e(4901);n.exports=function(i){return typeof i=="object"?i!==null:s(i)}},3925:(n,t,e)=>{var s=e(34);n.exports=function(i){return s(i)||i===null}},6395:n=>{n.exports=!1},757:(n,t,e)=>{var s=e(7751),i=e(4901),r=e(1625),o=e(7040),a=Object;n.exports=o?function(l){return typeof l=="symbol"}:function(l){var u=s("Symbol");return i(u)&&r(u.prototype,a(l))}},507:(n,t,e)=>{var s=e(9565);n.exports=function(i,r,o){for(var a=o?i:i.iterator,l=i.next,u,d;!(u=s(l,a)).done;)if(d=r(u.value),d!==void 0)return d}},2652:(n,t,e)=>{var s=e(6080),i=e(9565),r=e(8551),o=e(6823),a=e(4209),l=e(6198),u=e(1625),d=e(81),h=e(851),f=e(9539),p=TypeError,g=function(w,b){this.stopped=w,this.result=b},m=g.prototype;n.exports=function(w,b,S){var C=S&&S.that,T=!!(S&&S.AS_ENTRIES),_=!!(S&&S.IS_RECORD),R=!!(S&&S.IS_ITERATOR),M=!!(S&&S.INTERRUPTED),N=s(b,C),I,G,X,z,ot,q,nt,U=function(tt){return I&&f(I,"normal",tt),new g(!0,tt)},K=function(tt){return T?(r(tt),M?N(tt[0],tt[1],U):N(tt[0],tt[1])):M?N(tt,U):N(tt)};if(_)I=w.iterator;else if(R)I=w;else{if(G=h(w),!G)throw new p(o(w)+" is not iterable");if(a(G)){for(X=0,z=l(w);z>X;X++)if(ot=K(w[X]),ot&&u(m,ot))return ot;return new g(!1)}I=d(w,G)}for(q=_?w.next:I.next;!(nt=i(q,I)).done;){try{ot=K(nt.value)}catch(tt){f(I,"throw",tt)}if(typeof ot=="object"&&ot&&u(m,ot))return ot}return new g(!1)}},9539:(n,t,e)=>{var s=e(9565),i=e(8551),r=e(5966);n.exports=function(o,a,l){var u,d;i(o);try{if(u=r(o,"return"),!u){if(a==="throw")throw l;return l}u=s(u,o)}catch(h){d=!0,u=h}if(a==="throw")throw l;if(d)throw u;return i(u),l}},9462:(n,t,e)=>{var s=e(9565),i=e(2360),r=e(6699),o=e(6279),a=e(8227),l=e(1181),u=e(5966),d=e(7657).IteratorPrototype,h=e(2529),f=e(9539),p=a("toStringTag"),g="IteratorHelper",m="WrapForValidIterator",w=l.set,b=function(T){var _=l.getterFor(T?m:g);return o(i(d),{next:function(){var M=_(this);if(T)return M.nextHandler();try{var N=M.done?void 0:M.nextHandler();return h(N,M.done)}catch(I){throw M.done=!0,I}},return:function(){var R=_(this),M=R.iterator;if(R.done=!0,T){var N=u(M,"return");return N?s(N,M):h(void 0,!0)}if(R.inner)try{f(R.inner.iterator,"normal")}catch(I){return f(M,"throw",I)}return M&&f(M,"normal"),h(void 0,!0)}})},S=b(!0),C=b(!1);r(C,p,"Iterator Helper"),n.exports=function(T,_){var R=function(N,I){I?(I.iterator=N.iterator,I.next=N.next):I=N,I.type=_?m:g,I.nextHandler=T,I.counter=0,I.done=!1,w(this,I)};return R.prototype=_?S:C,R}},713:(n,t,e)=>{var s=e(9565),i=e(9306),r=e(8551),o=e(1767),a=e(9462),l=e(6319),u=a(function(){var d=this.iterator,h=r(s(this.next,d)),f=this.done=!!h.done;if(!f)return l(d,this.mapper,[h.value,this.counter++],!0)});n.exports=function(h){return r(this),i(h),new u(o(this),{mapper:h})}},7657:(n,t,e)=>{var s=e(9039),i=e(4901),r=e(34),o=e(2360),a=e(2787),l=e(6840),u=e(8227),d=e(6395),h=u("iterator"),f=!1,p,g,m;[].keys&&(m=[].keys(),"next"in m?(g=a(a(m)),g!==Object.prototype&&(p=g)):f=!0);var w=!r(p)||s(function(){var b={};return p[h].call(b)!==b});w?p={}:d&&(p=o(p)),i(p[h])||l(p,h,function(){return this}),n.exports={IteratorPrototype:p,BUGGY_SAFARI_ITERATORS:f}},6269:n=>{n.exports={}},6198:(n,t,e)=>{var s=e(8014);n.exports=function(i){return s(i.length)}},283:(n,t,e)=>{var s=e(9504),i=e(9039),r=e(4901),o=e(9297),a=e(3724),l=e(350).CONFIGURABLE,u=e(3706),d=e(1181),h=d.enforce,f=d.get,p=String,g=Object.defineProperty,m=s("".slice),w=s("".replace),b=s([].join),S=a&&!i(function(){return g(function(){},"length",{value:8}).length!==8}),C=String(String).split("String"),T=n.exports=function(_,R,M){m(p(R),0,7)==="Symbol("&&(R="["+w(p(R),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),M&&M.getter&&(R="get "+R),M&&M.setter&&(R="set "+R),(!o(_,"name")||l&&_.name!==R)&&(a?g(_,"name",{value:R,configurable:!0}):_.name=R),S&&M&&o(M,"arity")&&_.length!==M.arity&&g(_,"length",{value:M.arity});try{M&&o(M,"constructor")&&M.constructor?a&&g(_,"prototype",{writable:!1}):_.prototype&&(_.prototype=void 0)}catch{}var N=h(_);return o(N,"source")||(N.source=b(C,typeof R=="string"?R:"")),_};Function.prototype.toString=T(function(){return r(this)&&f(this).source||u(this)},"toString")},741:n=>{var t=Math.ceil,e=Math.floor;n.exports=Math.trunc||function(i){var r=+i;return(r>0?e:t)(r)}},6043:(n,t,e)=>{var s=e(9306),i=TypeError,r=function(o){var a,l;this.promise=new o(function(u,d){if(a!==void 0||l!==void 0)throw new i("Bad Promise constructor");a=u,l=d}),this.resolve=s(a),this.reject=s(l)};n.exports.f=function(o){return new r(o)}},2603:(n,t,e)=>{var s=e(655);n.exports=function(i,r){return i===void 0?arguments.length<2?"":r:s(i)}},4149:n=>{var t=RangeError;n.exports=function(e){if(e===e)return e;throw new t("NaN is not allowed")}},2360:(n,t,e)=>{var s=e(8551),i=e(6801),r=e(8727),o=e(421),a=e(397),l=e(4055),u=e(6119),d=">",h="<",f="prototype",p="script",g=u("IE_PROTO"),m=function(){},w=function(_){return h+p+d+_+h+"/"+p+d},b=function(_){_.write(w("")),_.close();var R=_.parentWindow.Object;return _=null,R},S=function(){var _=l("iframe"),R="java"+p+":",M;return _.style.display="none",a.appendChild(_),_.src=String(R),M=_.contentWindow.document,M.open(),M.write(w("document.F=Object")),M.close(),M.F},C,T=function(){try{C=new ActiveXObject("htmlfile")}catch{}T=typeof document<"u"?document.domain&&C?b(C):S():b(C);for(var _=r.length;_--;)delete T[f][r[_]];return T()};o[g]=!0,n.exports=Object.create||function(R,M){var N;return R!==null?(m[f]=s(R),N=new m,m[f]=null,N[g]=R):N=T(),M===void 0?N:i.f(N,M)}},6801:(n,t,e)=>{var s=e(3724),i=e(8686),r=e(4913),o=e(8551),a=e(5397),l=e(1072);t.f=s&&!i?Object.defineProperties:function(d,h){o(d);for(var f=a(h),p=l(h),g=p.length,m=0,w;g>m;)r.f(d,w=p[m++],f[w]);return d}},4913:(n,t,e)=>{var s=e(3724),i=e(5917),r=e(8686),o=e(8551),a=e(6969),l=TypeError,u=Object.defineProperty,d=Object.getOwnPropertyDescriptor,h="enumerable",f="configurable",p="writable";t.f=s?r?function(m,w,b){if(o(m),w=a(w),o(b),typeof m=="function"&&w==="prototype"&&"value"in b&&p in b&&!b[p]){var S=d(m,w);S&&S[p]&&(m[w]=b.value,b={configurable:f in b?b[f]:S[f],enumerable:h in b?b[h]:S[h],writable:!1})}return u(m,w,b)}:u:function(m,w,b){if(o(m),w=a(w),o(b),i)try{return u(m,w,b)}catch{}if("get"in b||"set"in b)throw new l("Accessors not supported");return"value"in b&&(m[w]=b.value),m}},7347:(n,t,e)=>{var s=e(3724),i=e(9565),r=e(8773),o=e(6980),a=e(5397),l=e(6969),u=e(9297),d=e(5917),h=Object.getOwnPropertyDescriptor;t.f=s?h:function(p,g){if(p=a(p),g=l(g),d)try{return h(p,g)}catch{}if(u(p,g))return o(!i(r.f,p,g),p[g])}},8480:(n,t,e)=>{var s=e(1828),i=e(8727),r=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(a){return s(a,r)}},3717:(n,t)=>{t.f=Object.getOwnPropertySymbols},2787:(n,t,e)=>{var s=e(9297),i=e(4901),r=e(8981),o=e(6119),a=e(2211),l=o("IE_PROTO"),u=Object,d=u.prototype;n.exports=a?u.getPrototypeOf:function(h){var f=r(h);if(s(f,l))return f[l];var p=f.constructor;return i(p)&&f instanceof p?p.prototype:f instanceof u?d:null}},1625:(n,t,e)=>{var s=e(9504);n.exports=s({}.isPrototypeOf)},1828:(n,t,e)=>{var s=e(9504),i=e(9297),r=e(5397),o=e(9617).indexOf,a=e(421),l=s([].push);n.exports=function(u,d){var h=r(u),f=0,p=[],g;for(g in h)!i(a,g)&&i(h,g)&&l(p,g);for(;d.length>f;)i(h,g=d[f++])&&(~o(p,g)||l(p,g));return p}},1072:(n,t,e)=>{var s=e(1828),i=e(8727);n.exports=Object.keys||function(o){return s(o,i)}},8773:(n,t)=>{var e={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,i=s&&!e.call({1:2},1);t.f=i?function(o){var a=s(this,o);return!!a&&a.enumerable}:e},2967:(n,t,e)=>{var s=e(6706),i=e(34),r=e(7750),o=e(3506);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var a=!1,l={},u;try{u=s(Object.prototype,"__proto__","set"),u(l,[]),a=l instanceof Array}catch{}return function(h,f){return r(h),o(f),i(h)&&(a?u(h,f):h.__proto__=f),h}}():void 0)},4270:(n,t,e)=>{var s=e(9565),i=e(4901),r=e(34),o=TypeError;n.exports=function(a,l){var u,d;if(l==="string"&&i(u=a.toString)&&!r(d=s(u,a))||i(u=a.valueOf)&&!r(d=s(u,a))||l!=="string"&&i(u=a.toString)&&!r(d=s(u,a)))return d;throw new o("Can't convert object to primitive value")}},5031:(n,t,e)=>{var s=e(7751),i=e(9504),r=e(8480),o=e(3717),a=e(8551),l=i([].concat);n.exports=s("Reflect","ownKeys")||function(d){var h=r.f(a(d)),f=o.f;return f?l(h,f(d)):h}},8235:(n,t,e)=>{var s=e(9504),i=e(9297),r=SyntaxError,o=parseInt,a=String.fromCharCode,l=s("".charAt),u=s("".slice),d=s(/./.exec),h={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"},f=/^[\da-f]{4}$/i,p=/^[\u0000-\u001F]$/;n.exports=function(g,m){for(var w=!0,b="";m<g.length;){var S=l(g,m);if(S==="\\"){var C=u(g,m,m+2);if(i(h,C))b+=h[C],m+=2;else if(C==="\\u"){m+=2;var T=u(g,m,m+4);if(!d(f,T))throw new r("Bad Unicode escape at: "+m);b+=a(o(T,16)),m+=4}else throw new r('Unknown escape sequence: "'+C+'"')}else if(S==='"'){w=!1,m++;break}else{if(d(p,S))throw new r("Bad control character in string literal at: "+m);b+=S,m++}}if(w)throw new r("Unterminated string at: "+m);return{value:b,end:m}}},1103:n=>{n.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},7750:(n,t,e)=>{var s=e(4117),i=TypeError;n.exports=function(r){if(s(r))throw new i("Can't call method on "+r);return r}},9286:(n,t,e)=>{var s=e(4402),i=e(8469),r=s.Set,o=s.add;n.exports=function(a){var l=new r;return i(a,function(u){o(l,u)}),l}},3440:(n,t,e)=>{var s=e(7080),i=e(4402),r=e(9286),o=e(5170),a=e(3789),l=e(8469),u=e(507),d=i.has,h=i.remove;n.exports=function(p){var g=s(this),m=a(p),w=r(g);return o(g)<=m.size?l(g,function(b){m.includes(b)&&h(w,b)}):u(m.getIterator(),function(b){d(g,b)&&h(w,b)}),w}},4402:(n,t,e)=>{var s=e(9504),i=Set.prototype;n.exports={Set,add:s(i.add),has:s(i.has),remove:s(i.delete),proto:i}},8750:(n,t,e)=>{var s=e(7080),i=e(4402),r=e(5170),o=e(3789),a=e(8469),l=e(507),u=i.Set,d=i.add,h=i.has;n.exports=function(p){var g=s(this),m=o(p),w=new u;return r(g)>m.size?l(m.getIterator(),function(b){h(g,b)&&d(w,b)}):a(g,function(b){m.includes(b)&&d(w,b)}),w}},4449:(n,t,e)=>{var s=e(7080),i=e(4402).has,r=e(5170),o=e(3789),a=e(8469),l=e(507),u=e(9539);n.exports=function(h){var f=s(this),p=o(h);if(r(f)<=p.size)return a(f,function(m){if(p.includes(m))return!1},!0)!==!1;var g=p.getIterator();return l(g,function(m){if(i(f,m))return u(g,"normal",!1)})!==!1}},3838:(n,t,e)=>{var s=e(7080),i=e(5170),r=e(8469),o=e(3789);n.exports=function(l){var u=s(this),d=o(l);return i(u)>d.size?!1:r(u,function(h){if(!d.includes(h))return!1},!0)!==!1}},8527:(n,t,e)=>{var s=e(7080),i=e(4402).has,r=e(5170),o=e(3789),a=e(507),l=e(9539);n.exports=function(d){var h=s(this),f=o(d);if(r(h)<f.size)return!1;var p=f.getIterator();return a(p,function(g){if(!i(h,g))return l(p,"normal",!1)})!==!1}},8469:(n,t,e)=>{var s=e(9504),i=e(507),r=e(4402),o=r.Set,a=r.proto,l=s(a.forEach),u=s(a.keys),d=u(new o).next;n.exports=function(h,f,p){return p?i({iterator:u(h),next:d},f):l(h,f)}},4916:(n,t,e)=>{var s=e(7751),i=function(r){return{size:r,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};n.exports=function(r){var o=s("Set");try{new o()[r](i(0));try{return new o()[r](i(-1)),!1}catch{return!0}}catch{return!1}}},5170:(n,t,e)=>{var s=e(6706),i=e(4402);n.exports=s(i.proto,"size","get")||function(r){return r.size}},3650:(n,t,e)=>{var s=e(7080),i=e(4402),r=e(9286),o=e(3789),a=e(507),l=i.add,u=i.has,d=i.remove;n.exports=function(f){var p=s(this),g=o(f).getIterator(),m=r(p);return a(g,function(w){u(p,w)?d(m,w):l(m,w)}),m}},4204:(n,t,e)=>{var s=e(7080),i=e(4402).add,r=e(9286),o=e(3789),a=e(507);n.exports=function(u){var d=s(this),h=o(u).getIterator(),f=r(d);return a(h,function(p){i(f,p)}),f}},6119:(n,t,e)=>{var s=e(5745),i=e(3392),r=s("keys");n.exports=function(o){return r[o]||(r[o]=i(o))}},7629:(n,t,e)=>{var s=e(6395),i=e(4576),r=e(9433),o="__core-js_shared__",a=n.exports=i[o]||r(o,{});(a.versions||(a.versions=[])).push({version:"3.39.0",mode:s?"pure":"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"})},5745:(n,t,e)=>{var s=e(7629);n.exports=function(i,r){return s[i]||(s[i]=r||{})}},1548:(n,t,e)=>{var s=e(4576),i=e(9039),r=e(9519),o=e(4215),a=s.structuredClone;n.exports=!!a&&!i(function(){if(o==="DENO"&&r>92||o==="NODE"&&r>94||o==="BROWSER"&&r>97)return!1;var l=new ArrayBuffer(8),u=a(l,{transfer:[l]});return l.byteLength!==0||u.byteLength!==8})},4495:(n,t,e)=>{var s=e(9519),i=e(9039),r=e(4576),o=r.String;n.exports=!!Object.getOwnPropertySymbols&&!i(function(){var a=Symbol("symbol detection");return!o(a)||!(Object(a)instanceof Symbol)||!Symbol.sham&&s&&s<41})},5610:(n,t,e)=>{var s=e(1291),i=Math.max,r=Math.min;n.exports=function(o,a){var l=s(o);return l<0?i(l+a,0):r(l,a)}},5854:(n,t,e)=>{var s=e(2777),i=TypeError;n.exports=function(r){var o=s(r,"number");if(typeof o=="number")throw new i("Can't convert number to bigint");return BigInt(o)}},7696:(n,t,e)=>{var s=e(1291),i=e(8014),r=RangeError;n.exports=function(o){if(o===void 0)return 0;var a=s(o),l=i(a);if(a!==l)throw new r("Wrong length or index");return l}},5397:(n,t,e)=>{var s=e(7055),i=e(7750);n.exports=function(r){return s(i(r))}},1291:(n,t,e)=>{var s=e(741);n.exports=function(i){var r=+i;return r!==r||r===0?0:s(r)}},8014:(n,t,e)=>{var s=e(1291),i=Math.min;n.exports=function(r){var o=s(r);return o>0?i(o,9007199254740991):0}},8981:(n,t,e)=>{var s=e(7750),i=Object;n.exports=function(r){return i(s(r))}},9590:(n,t,e)=>{var s=e(1291),i=RangeError;n.exports=function(r){var o=s(r);if(o<0)throw new i("The argument can't be less than 0");return o}},2777:(n,t,e)=>{var s=e(9565),i=e(34),r=e(757),o=e(5966),a=e(4270),l=e(8227),u=TypeError,d=l("toPrimitive");n.exports=function(h,f){if(!i(h)||r(h))return h;var p=o(h,d),g;if(p){if(f===void 0&&(f="default"),g=s(p,h,f),!i(g)||r(g))return g;throw new u("Can't convert object to primitive value")}return f===void 0&&(f="number"),a(h,f)}},6969:(n,t,e)=>{var s=e(2777),i=e(757);n.exports=function(r){var o=s(r,"string");return i(o)?o:o+""}},2140:(n,t,e)=>{var s=e(8227),i=s("toStringTag"),r={};r[i]="z",n.exports=String(r)==="[object z]"},655:(n,t,e)=>{var s=e(6955),i=String;n.exports=function(r){if(s(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return i(r)}},6823:n=>{var t=String;n.exports=function(e){try{return t(e)}catch{return"Object"}}},3392:(n,t,e)=>{var s=e(9504),i=0,r=Math.random(),o=s(1 .toString);n.exports=function(a){return"Symbol("+(a===void 0?"":a)+")_"+o(++i+r,36)}},7040:(n,t,e)=>{var s=e(4495);n.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},8686:(n,t,e)=>{var s=e(3724),i=e(9039);n.exports=s&&i(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},2812:n=>{var t=TypeError;n.exports=function(e,s){if(e<s)throw new t("Not enough arguments");return e}},8622:(n,t,e)=>{var s=e(4576),i=e(4901),r=s.WeakMap;n.exports=i(r)&&/native code/.test(String(r))},8227:(n,t,e)=>{var s=e(4576),i=e(5745),r=e(9297),o=e(3392),a=e(4495),l=e(7040),u=s.Symbol,d=i("wks"),h=l?u.for||u:u&&u.withoutSetter||o;n.exports=function(f){return r(d,f)||(d[f]=a&&r(u,f)?u[f]:h("Symbol."+f)),d[f]}},6573:(n,t,e)=>{var s=e(3724),i=e(2106),r=e(3238),o=ArrayBuffer.prototype;s&&!("detached"in o)&&i(o,"detached",{configurable:!0,get:function(){return r(this)}})},7936:(n,t,e)=>{var s=e(6518),i=e(5636);i&&s({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return i(this,arguments.length?arguments[0]:void 0,!1)}})},8100:(n,t,e)=>{var s=e(6518),i=e(5636);i&&s({target:"ArrayBuffer",proto:!0},{transfer:function(){return i(this,arguments.length?arguments[0]:void 0,!0)}})},4114:(n,t,e)=>{var s=e(6518),i=e(8981),r=e(6198),o=e(4527),a=e(6837),l=e(9039),u=l(function(){return[].push.call({length:4294967296},1)!==4294967297}),d=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(f){return f instanceof TypeError}},h=u||!d();s({target:"Array",proto:!0,arity:1,forced:h},{push:function(p){var g=i(this),m=r(g),w=arguments.length;a(m+w);for(var b=0;b<w;b++)g[m]=arguments[b],m++;return o(g,m),m}})},8111:(n,t,e)=>{var s=e(6518),i=e(4576),r=e(679),o=e(8551),a=e(4901),l=e(2787),u=e(2106),d=e(4659),h=e(9039),f=e(9297),p=e(8227),g=e(7657).IteratorPrototype,m=e(3724),w=e(6395),b="constructor",S="Iterator",C=p("toStringTag"),T=TypeError,_=i[S],R=w||!a(_)||_.prototype!==g||!h(function(){_({})}),M=function(){if(r(this,g),l(this)===g)throw new T("Abstract class Iterator not directly constructable")},N=function(I,G){m?u(g,I,{configurable:!0,get:function(){return G},set:function(X){if(o(this),this===g)throw new T("You can't redefine this property");f(this,I)?this[I]=X:d(this,I,X)}}):g[I]=G};f(g,C)||N(C,S),(R||!f(g,b)||g[b]===Object)&&N(b,M),M.prototype=g,s({global:!0,constructor:!0,forced:R},{Iterator:M})},9314:(n,t,e)=>{var s=e(6518),i=e(9565),r=e(8551),o=e(1767),a=e(4149),l=e(9590),u=e(9462),d=e(6395),h=u(function(){for(var f=this.iterator,p=this.next,g,m;this.remaining;)if(this.remaining--,g=r(i(p,f)),m=this.done=!!g.done,m)return;if(g=r(i(p,f)),m=this.done=!!g.done,!m)return g.value});s({target:"Iterator",proto:!0,real:!0,forced:d},{drop:function(p){r(this);var g=l(a(+p));return new h(o(this),{remaining:g})}})},1148:(n,t,e)=>{var s=e(6518),i=e(2652),r=e(9306),o=e(8551),a=e(1767);s({target:"Iterator",proto:!0,real:!0},{every:function(u){o(this),r(u);var d=a(this),h=0;return!i(d,function(f,p){if(!u(f,h++))return p()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},2489:(n,t,e)=>{var s=e(6518),i=e(9565),r=e(9306),o=e(8551),a=e(1767),l=e(9462),u=e(6319),d=e(6395),h=l(function(){for(var f=this.iterator,p=this.predicate,g=this.next,m,w,b;;){if(m=o(i(g,f)),w=this.done=!!m.done,w)return;if(b=m.value,u(f,p,[b,this.counter++],!0))return b}});s({target:"Iterator",proto:!0,real:!0,forced:d},{filter:function(p){return o(this),r(p),new h(a(this),{predicate:p})}})},531:(n,t,e)=>{var s=e(6518),i=e(9565),r=e(9306),o=e(8551),a=e(1767),l=e(8646),u=e(9462),d=e(9539),h=e(6395),f=u(function(){for(var p=this.iterator,g=this.mapper,m,w;;){if(w=this.inner)try{if(m=o(i(w.next,w.iterator)),!m.done)return m.value;this.inner=null}catch(b){d(p,"throw",b)}if(m=o(i(this.next,p)),this.done=!!m.done)return;try{this.inner=l(g(m.value,this.counter++),!1)}catch(b){d(p,"throw",b)}}});s({target:"Iterator",proto:!0,real:!0,forced:h},{flatMap:function(g){return o(this),r(g),new f(a(this),{mapper:g,inner:null})}})},1701:(n,t,e)=>{var s=e(6518),i=e(713),r=e(6395);s({target:"Iterator",proto:!0,real:!0,forced:r},{map:i})},3579:(n,t,e)=>{var s=e(6518),i=e(2652),r=e(9306),o=e(8551),a=e(1767);s({target:"Iterator",proto:!0,real:!0},{some:function(u){o(this),r(u);var d=a(this),h=0;return i(d,function(f,p){if(u(f,h++))return p()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},1689:(n,t,e)=>{var s=e(6518),i=e(4576),r=e(8745),o=e(7680),a=e(6043),l=e(9306),u=e(1103),d=i.Promise,h=!1,f=!d||!d.try||u(function(){d.try(function(p){h=p===8},8)}).error||!h;s({target:"Promise",stat:!0,forced:f},{try:function(p){var g=arguments.length>1?o(arguments,1):[],m=a.f(this),w=u(function(){return r(l(p),void 0,g)});return(w.error?m.reject:m.resolve)(w.value),m.promise}})},4628:(n,t,e)=>{var s=e(6518),i=e(6043);s({target:"Promise",stat:!0},{withResolvers:function(){var o=i.f(this);return{promise:o.promise,resolve:o.resolve,reject:o.reject}}})},7642:(n,t,e)=>{var s=e(6518),i=e(3440),r=e(4916);s({target:"Set",proto:!0,real:!0,forced:!r("difference")},{difference:i})},8004:(n,t,e)=>{var s=e(6518),i=e(9039),r=e(8750),o=e(4916),a=!o("intersection")||i(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});s({target:"Set",proto:!0,real:!0,forced:a},{intersection:r})},3853:(n,t,e)=>{var s=e(6518),i=e(4449),r=e(4916);s({target:"Set",proto:!0,real:!0,forced:!r("isDisjointFrom")},{isDisjointFrom:i})},5876:(n,t,e)=>{var s=e(6518),i=e(3838),r=e(4916);s({target:"Set",proto:!0,real:!0,forced:!r("isSubsetOf")},{isSubsetOf:i})},2475:(n,t,e)=>{var s=e(6518),i=e(8527),r=e(4916);s({target:"Set",proto:!0,real:!0,forced:!r("isSupersetOf")},{isSupersetOf:i})},5024:(n,t,e)=>{var s=e(6518),i=e(3650),r=e(4916);s({target:"Set",proto:!0,real:!0,forced:!r("symmetricDifference")},{symmetricDifference:i})},1698:(n,t,e)=>{var s=e(6518),i=e(4204),r=e(4916);s({target:"Set",proto:!0,real:!0,forced:!r("union")},{union:i})},7467:(n,t,e)=>{var s=e(7628),i=e(4644),r=i.aTypedArray,o=i.exportTypedArrayMethod,a=i.getTypedArrayConstructor;o("toReversed",function(){return s(r(this),a(this))})},4732:(n,t,e)=>{var s=e(4644),i=e(9504),r=e(9306),o=e(5370),a=s.aTypedArray,l=s.getTypedArrayConstructor,u=s.exportTypedArrayMethod,d=i(s.TypedArrayPrototype.sort);u("toSorted",function(f){f!==void 0&&r(f);var p=a(this),g=o(l(p),p);return d(g,f)})},9577:(n,t,e)=>{var s=e(9928),i=e(4644),r=e(1108),o=e(1291),a=e(5854),l=i.aTypedArray,u=i.getTypedArrayConstructor,d=i.exportTypedArrayMethod,h=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(f){return f===8}}();d("with",function(f,p){var g=l(this),m=o(f),w=r(g)?a(p):+p;return s(g,u(g),m,w)},!h)},8992:(n,t,e)=>{e(8111)},4743:(n,t,e)=>{e(9314)},3215:(n,t,e)=>{e(1148)},4520:(n,t,e)=>{e(2489)},670:(n,t,e)=>{e(531)},1454:(n,t,e)=>{e(1701)},7550:(n,t,e)=>{e(3579)},8335:(n,t,e)=>{var s=e(6518),i=e(3724),r=e(4576),o=e(7751),a=e(9504),l=e(9565),u=e(4901),d=e(34),h=e(4376),f=e(9297),p=e(655),g=e(6198),m=e(4659),w=e(9039),b=e(8235),S=e(4495),C=r.JSON,T=r.Number,_=r.SyntaxError,R=C&&C.parse,M=o("Object","keys"),N=Object.getOwnPropertyDescriptor,I=a("".charAt),G=a("".slice),X=a(/./.exec),z=a([].push),ot=/^\d$/,q=/^[1-9]$/,nt=/^[\d-]$/,U=/^[\t\n\r ]$/,K=0,tt=1,Ct=function(lt,L){lt=p(lt);var W=new Vt(lt,0),Q=W.parse(),dt=Q.value,ct=W.skip(U,Q.end);if(ct<lt.length)throw new _('Unexpected extra character: "'+I(lt,ct)+'" after the parsed data at: '+ct);return u(L)?vt({"":dt},"",L,Q):dt},vt=function(lt,L,W,Q){var dt=lt[L],ct=Q&&dt===Q.value,k=ct&&typeof Q.source=="string"?{source:Q.source}:{},P,B,Y,J,Z;if(d(dt)){var pt=h(dt),ut=ct?Q.nodes:pt?[]:{};if(pt)for(P=ut.length,Y=g(dt),J=0;J<Y;J++)Mt(dt,J,vt(dt,""+J,W,J<P?ut[J]:void 0));else for(B=M(dt),Y=g(B),J=0;J<Y;J++)Z=B[J],Mt(dt,Z,vt(dt,Z,W,f(ut,Z)?ut[Z]:void 0))}return l(W,lt,L,dt,k)},Mt=function(lt,L,W){if(i){var Q=N(lt,L);if(Q&&!Q.configurable)return}W===void 0?delete lt[L]:m(lt,L,W)},Rt=function(lt,L,W,Q){this.value=lt,this.end=L,this.source=W,this.nodes=Q},Vt=function(lt,L){this.source=lt,this.index=L};Vt.prototype={fork:function(lt){return new Vt(this.source,lt)},parse:function(){var lt=this.source,L=this.skip(U,this.index),W=this.fork(L),Q=I(lt,L);if(X(nt,Q))return W.number();switch(Q){case"{":return W.object();case"[":return W.array();case'"':return W.string();case"t":return W.keyword(!0);case"f":return W.keyword(!1);case"n":return W.keyword(null)}throw new _('Unexpected character: "'+Q+'" at: '+L)},node:function(lt,L,W,Q,dt){return new Rt(L,Q,lt?null:G(this.source,W,Q),dt)},object:function(){for(var lt=this.source,L=this.index+1,W=!1,Q={},dt={};L<lt.length;){if(L=this.until(['"',"}"],L),I(lt,L)==="}"&&!W){L++;break}var ct=this.fork(L).string(),k=ct.value;L=ct.end,L=this.until([":"],L)+1,L=this.skip(U,L),ct=this.fork(L).parse(),m(dt,k,ct),m(Q,k,ct.value),L=this.until([",","}"],ct.end);var P=I(lt,L);if(P===",")W=!0,L++;else if(P==="}"){L++;break}}return this.node(tt,Q,this.index,L,dt)},array:function(){for(var lt=this.source,L=this.index+1,W=!1,Q=[],dt=[];L<lt.length;){if(L=this.skip(U,L),I(lt,L)==="]"&&!W){L++;break}var ct=this.fork(L).parse();if(z(dt,ct),z(Q,ct.value),L=this.until([",","]"],ct.end),I(lt,L)===",")W=!0,L++;else if(I(lt,L)==="]"){L++;break}}return this.node(tt,Q,this.index,L,dt)},string:function(){var lt=this.index,L=b(this.source,this.index+1);return this.node(K,L.value,lt,L.end)},number:function(){var lt=this.source,L=this.index,W=L;if(I(lt,W)==="-"&&W++,I(lt,W)==="0")W++;else if(X(q,I(lt,W)))W=this.skip(ot,W+1);else throw new _("Failed to parse number at: "+W);if(I(lt,W)==="."&&(W=this.skip(ot,W+1)),I(lt,W)==="e"||I(lt,W)==="E"){W++,(I(lt,W)==="+"||I(lt,W)==="-")&&W++;var Q=W;if(W=this.skip(ot,W),Q===W)throw new _("Failed to parse number's exponent value at: "+W)}return this.node(K,T(G(lt,L,W)),L,W)},keyword:function(lt){var L=""+lt,W=this.index,Q=W+L.length;if(G(this.source,W,Q)!==L)throw new _("Failed to parse value at: "+W);return this.node(K,lt,W,Q)},skip:function(lt,L){for(var W=this.source;L<W.length&&X(lt,I(W,L));L++);return L},until:function(lt,L){L=this.skip(U,L);for(var W=I(this.source,L),Q=0;Q<lt.length;Q++)if(lt[Q]===W)return L;throw new _('Unexpected character: "'+W+'" at: '+L)}};var It=w(function(){var lt="9007199254740993",L;return R(lt,function(W,Q,dt){L=dt.source}),L!==lt}),ie=S&&!w(function(){return 1/R("-0 	")!==-1/0});s({target:"JSON",stat:!0,forced:It},{parse:function(L,W){return ie&&!u(W)?R(L):Ct(L,W)}})},5247:(n,t,e)=>{e(1689)},4979:(n,t,e)=>{var s=e(6518),i=e(4576),r=e(7751),o=e(6980),a=e(4913).f,l=e(9297),u=e(679),d=e(3167),h=e(2603),f=e(5002),p=e(8574),g=e(3724),m=e(6395),w="DOMException",b=r("Error"),S=r(w),C=function(){u(this,T);var U=arguments.length,K=h(U<1?void 0:arguments[0]),tt=h(U<2?void 0:arguments[1],"Error"),Ct=new S(K,tt),vt=new b(K);return vt.name=w,a(Ct,"stack",o(1,p(vt.stack,1))),d(Ct,this,C),Ct},T=C.prototype=S.prototype,_="stack"in new b(w),R="stack"in new S(1,2),M=S&&g&&Object.getOwnPropertyDescriptor(i,w),N=!!M&&!(M.writable&&M.configurable),I=_&&!N&&!R;s({global:!0,constructor:!0,forced:m||I},{DOMException:I?C:S});var G=r(w),X=G.prototype;if(X.constructor!==G){m||a(X,"constructor",o(1,G));for(var z in f)if(l(f,z)){var ot=f[z],q=ot.s;l(G,q)||a(G,q,o(6,ot.c))}}},4603:(n,t,e)=>{var s=e(6840),i=e(9504),r=e(655),o=e(2812),a=URLSearchParams,l=a.prototype,u=i(l.append),d=i(l.delete),h=i(l.forEach),f=i([].push),p=new a("a=1&a=2&b=3");p.delete("a",1),p.delete("b",void 0),p+""!="a=2"&&s(l,"delete",function(g){var m=arguments.length,w=m<2?void 0:arguments[1];if(m&&w===void 0)return d(this,g);var b=[];h(this,function(I,G){f(b,{key:G,value:I})}),o(m,1);for(var S=r(g),C=r(w),T=0,_=0,R=!1,M=b.length,N;T<M;)N=b[T++],R||N.key===S?(R=!0,d(this,N.key)):_++;for(;_<M;)N=b[_++],N.key===S&&N.value===C||u(this,N.key,N.value)},{enumerable:!0,unsafe:!0})},7566:(n,t,e)=>{var s=e(6840),i=e(9504),r=e(655),o=e(2812),a=URLSearchParams,l=a.prototype,u=i(l.getAll),d=i(l.has),h=new a("a=1");(h.has("a",2)||!h.has("a",void 0))&&s(l,"has",function(p){var g=arguments.length,m=g<2?void 0:arguments[1];if(g&&m===void 0)return d(this,p);var w=u(this,p);o(g,1);for(var b=r(m),S=0;S<w.length;)if(w[S++]===b)return!0;return!1},{enumerable:!0,unsafe:!0})},8721:(n,t,e)=>{var s=e(3724),i=e(9504),r=e(2106),o=URLSearchParams.prototype,a=i(o.forEach);s&&!("size"in o)&&r(o,"size",{get:function(){var u=0;return a(this,function(){u++}),u},configurable:!0,enumerable:!0})}},d0={};function Qt(n){var t=d0[n];if(t!==void 0)return t.exports;var e=d0[n]={exports:{}};return UC[n].call(e.exports,e,e.exports,Qt),e.exports}Qt.d=(n,t)=>{for(var e in t)Qt.o(t,e)&&!Qt.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})};Qt.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);var Ft=globalThis.pdfjsLib={};Qt.d(Ft,{AbortException:()=>mo,AnnotationEditorLayer:()=>rv,AnnotationEditorParamsType:()=>Jt,AnnotationEditorType:()=>Gt,AnnotationEditorUIManager:()=>Ga,AnnotationLayer:()=>Fk,AnnotationMode:()=>Dr,ColorPicker:()=>df,DOMSVGFactory:()=>Uv,DrawLayer:()=>lv,FeatureTest:()=>js,GlobalWorkerOptions:()=>vr,ImageKind:()=>bh,InvalidPDFException:()=>Qp,MissingPDFException:()=>bu,OPS:()=>Fn,OutputScale:()=>tg,PDFDataRangeTransport:()=>wb,PDFDateString:()=>$v,PDFWorker:()=>ml,PasswordResponses:()=>WC,PermissionFlag:()=>zC,PixelsPerInch:()=>yo,RenderingCancelledException:()=>Nv,TextLayer:()=>wu,TouchManager:()=>cf,UnexpectedResponseException:()=>of,Util:()=>Pt,VerbosityLevel:()=>Zf,XfaLayer:()=>xb,build:()=>mk,createValidAbsoluteUrl:()=>JC,fetchData:()=>ep,getDocument:()=>lk,getFilenameFromUrl:()=>r_,getPdfFilenameFromUrl:()=>o_,getXfaPageViewport:()=>a_,isDataScheme:()=>sp,isPdfFile:()=>Fv,noContextMenu:()=>ni,normalizeUnicode:()=>s_,setLayerDimensions:()=>Va,shadow:()=>Yt,stopEvent:()=>fn,version:()=>vk});Qt(4114);Qt(6573);Qt(8100);Qt(7936);Qt(7467);Qt(4732);Qt(9577);Qt(5247);Qt(4979);Qt(4603);Qt(7566);Qt(8721);const ks=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),by=[1,0,0,1,0,0],Zp=[.001,0,0,.001,0,0],VC=1e7,Cp=1.35,un={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Dr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},GC="pdfjs_internal_editor_",Gt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Jt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},zC={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ps={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},bh={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ze={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Lc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Zf={ERRORS:0,WARNINGS:1,INFOS:5},Fn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},WC={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Qf=Zf.WARNINGS;function KC(n){Number.isInteger(n)&&(Qf=n)}function XC(){return Qf}function qf(n){Qf>=Zf.INFOS&&console.log(`Info: ${n}`)}function $t(n){Qf>=Zf.WARNINGS&&console.log(`Warning: ${n}`)}function ye(n){throw new Error(n)}function Be(n,t){n||ye(t)}function YC(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function JC(n,t=null,e=null){if(!n)return null;try{if(e&&typeof n=="string"){if(e.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(e.tryConvertEncoding)try{n=e_(n)}catch{}}const s=t?new URL(n,t):new URL(n);if(YC(s))return s}catch{}return null}function Yt(n,t,e,s=!1){return Object.defineProperty(n,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const xo=function(){function t(e,s){this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t}();class h0 extends xo{constructor(t,e){super(t,"PasswordException"),this.code=e}}class _p extends xo{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Qp extends xo{constructor(t){super(t,"InvalidPDFException")}}class bu extends xo{constructor(t){super(t,"MissingPDFException")}}class of extends xo{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class ZC extends xo{constructor(t){super(t,"FormatError")}}class mo extends xo{constructor(t){super(t,"AbortException")}}function wy(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&ye("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<t;i+=e){const r=Math.min(i+e,t),o=n.subarray(i,r);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function tp(n){typeof n!="string"&&ye("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=n.charCodeAt(s)&255;return e}function QC(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function Ov(n){const t=Object.create(null);for(const[e,s]of n)t[e]=s;return t}function qC(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function t_(){try{return new Function(""),!0}catch{return!1}}class js{static get isLittleEndian(){return Yt(this,"isLittleEndian",qC())}static get isEvalSupported(){return Yt(this,"isEvalSupported",t_())}static get isOffscreenCanvasSupported(){return Yt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Yt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Yt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Yt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return Yt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const kp=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var yr,wh,qp;class Pt{static makeHexColor(t,e,s){return`#${kp[t]}${kp[e]}${kp[s]}`}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const s=t[0]*e[0]+t[1]*e[2]+e[4],i=t[0]*e[1]+t[1]*e[3]+e[5];return[s,i]}static applyInverseTransform(t,e){const s=e[0]*e[3]-e[1]*e[2],i=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/s,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/s;return[i,r]}static getAxialAlignedBoundingBox(t,e){const s=this.applyTransform(t,e),i=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),o=this.applyTransform([t[2],t[1]],e);return[Math.min(s[0],i[0],r[0],o[0]),Math.min(s[1],i[1],r[1],o[1]),Math.max(s[0],i[0],r[0],o[0]),Math.max(s[1],i[1],r[1],o[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],s=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],o=t[2]*e[1]+t[3]*e[3],a=(s+o)/2,l=Math.sqrt((s+o)**2-4*(s*o-r*i))/2,u=a+l||1,d=a-l||1;return[Math.sqrt(u),Math.sqrt(d)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>i)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[s,r,i,o]}static bezierBoundingBox(t,e,s,i,r,o,a,l,u){return u?(u[0]=Math.min(u[0],t,a),u[1]=Math.min(u[1],e,l),u[2]=Math.max(u[2],t,a),u[3]=Math.max(u[3],e,l)):u=[Math.min(t,a),Math.min(e,l),Math.max(t,a),Math.max(e,l)],x(this,yr,qp).call(this,t,s,r,a,e,i,o,l,3*(-t+3*(s-r)+a),6*(t-2*s+r),3*(s-t),u),x(this,yr,qp).call(this,t,s,r,a,e,i,o,l,3*(-e+3*(i-o)+l),6*(e-2*i+o),3*(i-e),u),u}}yr=new WeakSet,wh=function(t,e,s,i,r,o,a,l,u,d){if(u<=0||u>=1)return;const h=1-u,f=u*u,p=f*u,g=h*(h*(h*t+3*u*e)+3*f*s)+p*i,m=h*(h*(h*r+3*u*o)+3*f*a)+p*l;d[0]=Math.min(d[0],g),d[1]=Math.min(d[1],m),d[2]=Math.max(d[2],g),d[3]=Math.max(d[3],m)},qp=function(t,e,s,i,r,o,a,l,u,d,h,f){if(Math.abs(u)<1e-12){Math.abs(d)>=1e-12&&x(this,yr,wh).call(this,t,e,s,i,r,o,a,l,-h/d,f);return}const p=d**2-4*h*u;if(p<0)return;const g=Math.sqrt(p),m=2*u;x(this,yr,wh).call(this,t,e,s,i,r,o,a,l,(-d+g)/m,f),x(this,yr,wh).call(this,t,e,s,i,r,o,a,l,(-d-g)/m,f)},A(Pt,yr);function e_(n){return decodeURIComponent(escape(n))}let Tp=null,f0=null;function s_(n){return Tp||(Tp=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,f0=new Map([["","t"]])),n.replaceAll(Tp,(t,e,s)=>e?e.normalize("NFKC"):f0.get(s))}function n_(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),wy(n)}const Dv="pdfjs_internal_id_";function i_(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(wy(n))}Qt(4628);Qt(7642);Qt(8004);Qt(3853);Qt(5876);Qt(2475);Qt(5024);Qt(1698);Qt(1454);Qt(8992);Qt(4743);Qt(3215);Qt(7550);Qt(8335);const Di="http://www.w3.org/2000/svg",Mo=class Mo{};kt(Mo,"CSS",96),kt(Mo,"PDF",72),kt(Mo,"PDF_TO_CSS_UNITS",Mo.CSS/Mo.PDF);let yo=Mo;async function ep(n,t="text"){if($c(n,document.baseURI)){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class qd{constructor({viewBox:t,userUnit:e,scale:s,rotation:i,offsetX:r=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=t,this.userUnit=e,this.scale=s,this.rotation=i,this.offsetX=r,this.offsetY=o,s*=e;const l=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let d,h,f,p;switch(i%=360,i<0&&(i+=360),i){case 180:d=-1,h=0,f=0,p=1;break;case 90:d=0,h=1,f=1,p=0;break;case 270:d=0,h=-1,f=-1,p=0;break;case 0:d=1,h=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,p=-p);let g,m,w,b;d===0?(g=Math.abs(u-t[1])*s+r,m=Math.abs(l-t[0])*s+o,w=(t[3]-t[1])*s,b=(t[2]-t[0])*s):(g=Math.abs(l-t[0])*s+r,m=Math.abs(u-t[1])*s+o,w=(t[2]-t[0])*s,b=(t[3]-t[1])*s),this.transform=[d*s,h*s,f*s,p*s,g-d*s*l-f*s*u,m-h*s*l-p*s*u],this.width=w,this.height=b}get rawDims(){const{userUnit:t,viewBox:e}=this,s=e.map(i=>i*t);return Yt(this,"rawDims",{pageWidth:s[2]-s[0],pageHeight:s[3]-s[1],pageX:s[0],pageY:s[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new qd({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){return Pt.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=Pt.applyTransform([t[0],t[1]],this.transform),s=Pt.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){return Pt.applyInverseTransform([t,e],this.transform)}}class Nv extends xo{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function sp(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function Fv(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function r_(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function o_(n,t="document.pdf"){if(typeof n!="string")return t;if(sp(n))return $t('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=e.exec(n);let r=s.exec(i[1])||s.exec(i[2])||s.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=s.exec(decodeURIComponent(r))[0]}catch{}return r||t}class p0{constructor(){kt(this,"started",Object.create(null));kt(this,"times",[])}time(t){t in this.started&&$t(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||$t(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:i,end:r}of this.times)t.push(`${s.padEnd(e)} ${r-i}ms
`);return t.join("")}}function $c(n,t){try{const{protocol:e}=t?new URL(n,t):new URL(n);return e==="http:"||e==="https:"}catch{return!1}}function ni(n){n.preventDefault()}function fn(n){n.preventDefault(),n.stopPropagation()}var xu;class $v{static toDateObject(t){if(!t||typeof t!="string")return null;c(this,xu)||y(this,xu,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=c(this,xu).exec(t);if(!e)return null;const s=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const u=e[7]||"Z";let d=parseInt(e[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(e[9],10)||0;return h=h>=0&&h<=59?h:0,u==="-"?(o+=d,a+=h):u==="+"&&(o-=d,a-=h),new Date(Date.UTC(s,i,r,o,a,l))}}xu=new WeakMap,A($v,xu);function a_(n,{scale:t=1,rotation:e=0}){const{width:s,height:i}=n.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new qd({viewBox:r,userUnit:1,scale:t,rotation:e})}function Bv(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):($t(`Not a valid color format: "${n}"`),[0,0,0])}function l_(n){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of n.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;n.set(e,Bv(s))}t.remove()}function Se(n){const{a:t,b:e,c:s,d:i,e:r,f:o}=n.getTransform();return[t,e,s,i,r,o]}function oi(n){const{a:t,b:e,c:s,d:i,e:r,f:o}=n.getTransform().invertSelf();return[t,e,s,i,r,o]}function Va(n,t,e=!1,s=!0){if(t instanceof qd){const{pageWidth:i,pageHeight:r}=t.rawDims,{style:o}=n,a=js.isCSSRoundSupported,l=`var(--scale-factor) * ${i}px`,u=`var(--scale-factor) * ${r}px`,d=a?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,h=a?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!e||t.rotation%180===0?(o.width=d,o.height=h):(o.width=h,o.height=d)}s&&n.setAttribute("data-main-rotation",t.rotation)}class tg{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Nr,Do,$n,No,Su,Eu,pf,Ay,Hs,xy,Sy,Ah,Ey,sg;const Bi=class Bi{constructor(t){A(this,Hs);A(this,Nr,null);A(this,Do,null);A(this,$n);A(this,No,null);A(this,Su,null);y(this,$n,t),c(Bi,Eu)||y(Bi,Eu,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=y(this,Nr,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=c(this,$n)._uiManager._signal;t.addEventListener("contextmenu",ni,{signal:e}),t.addEventListener("pointerdown",x(Bi,pf,Ay),{signal:e});const s=y(this,No,document.createElement("div"));s.className="buttons",t.append(s);const i=c(this,$n).toolbarPosition;if(i){const{style:r}=t,o=c(this,$n)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return x(this,Hs,Ey).call(this),t}get div(){return c(this,Nr)}hide(){var t;c(this,Nr).classList.add("hidden"),(t=c(this,Do))==null||t.hideDropdown()}show(){var t;c(this,Nr).classList.remove("hidden"),(t=c(this,Su))==null||t.shown()}async addAltText(t){const e=await t.render();x(this,Hs,Ah).call(this,e),c(this,No).prepend(e,c(this,Hs,sg)),y(this,Su,t)}addColorPicker(t){y(this,Do,t);const e=t.renderButton();x(this,Hs,Ah).call(this,e),c(this,No).prepend(e,c(this,Hs,sg))}remove(){var t;c(this,Nr).remove(),(t=c(this,Do))==null||t.destroy(),y(this,Do,null)}};Nr=new WeakMap,Do=new WeakMap,$n=new WeakMap,No=new WeakMap,Su=new WeakMap,Eu=new WeakMap,pf=new WeakSet,Ay=function(t){t.stopPropagation()},Hs=new WeakSet,xy=function(t){c(this,$n)._focusEventsAllowed=!1,fn(t)},Sy=function(t){c(this,$n)._focusEventsAllowed=!0,fn(t)},Ah=function(t){const e=c(this,$n)._uiManager._signal;t.addEventListener("focusin",x(this,Hs,xy).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",x(this,Hs,Sy).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",ni,{signal:e})},Ey=function(){const{editorType:t,_uiManager:e}=c(this,$n),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",c(Bi,Eu)[t]),x(this,Hs,Ah).call(this,s),s.addEventListener("click",i=>{e.delete()},{signal:e._signal}),c(this,No).append(s)},sg=function(){const t=document.createElement("div");return t.className="divider",t},A(Bi,pf),A(Bi,Eu,null);let eg=Bi;var Cu,Fo,$o,bo,Cy,_y,ky;class c_{constructor(t){A(this,bo);A(this,Cu,null);A(this,Fo,null);A(this,$o);y(this,$o,t)}show(t,e,s){const[i,r]=x(this,bo,_y).call(this,e,s),{style:o}=c(this,Fo)||y(this,Fo,x(this,bo,Cy).call(this));t.append(c(this,Fo)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,Fo).remove()}}Cu=new WeakMap,Fo=new WeakMap,$o=new WeakMap,bo=new WeakSet,Cy=function(){const t=y(this,Fo,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",ni,{signal:c(this,$o)._signal});const e=y(this,Cu,document.createElement("div"));return e.className="buttons",t.append(e),x(this,bo,ky).call(this),t},_y=function(t,e){let s=0,i=0;for(const r of t){const o=r.y+r.height;if(o<s)continue;const a=r.x+(e?r.width:0);if(o>s){i=a,s=o;continue}e?a>i&&(i=a):a<i&&(i=a)}return[e?1-i:i,s]},ky=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=c(this,$o)._signal;t.addEventListener("contextmenu",ni,{signal:s}),t.addEventListener("click",()=>{c(this,$o).highlightSelection("floating_button")},{signal:s}),c(this,Cu).append(t)};function af(n,t,e){for(const s of e)t.addEventListener(s,n[s].bind(n))}var gf;class u_{constructor(){A(this,gf,0)}get id(){return`${GC}${Ts(this,gf)._++}`}}gf=new WeakMap;var yl,_u,ms,bl,xh;const Gv=class Gv{constructor(){A(this,bl);A(this,yl,n_());A(this,_u,0);A(this,ms,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Yt(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:s,size:i,type:r}=t;return x(this,bl,xh).call(this,`${e}_${s}_${i}_${r}`,t)}async getFromUrl(t){return x(this,bl,xh).call(this,t,t)}async getFromBlob(t,e){const s=await e;return x(this,bl,xh).call(this,t,s)}async getFromId(t){c(this,ms)||y(this,ms,new Map);const e=c(this,ms).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:s}=e;return delete e.blobPromise,this.getFromBlob(e.id,s)}return this.getFromUrl(e.url)}getFromCanvas(t,e){c(this,ms)||y(this,ms,new Map);let s=c(this,ms).get(t);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${c(this,yl)}_${Ts(this,_u)._++}`,refCounter:1,isSvg:!1},c(this,ms).set(t,s),c(this,ms).set(s.id,s),s}getSvgUrl(t){const e=c(this,ms).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var i;c(this,ms)||y(this,ms,new Map);const e=c(this,ms).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:s}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),e.blobPromise=r.convertToBlob()}(i=s.close)==null||i.call(s),e.bitmap=null}isValidId(t){return t.startsWith(`image_${c(this,yl)}_`)}};yl=new WeakMap,_u=new WeakMap,ms=new WeakMap,bl=new WeakSet,xh=async function(t,e){c(this,ms)||y(this,ms,new Map);let s=c(this,ms).get(t);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${c(this,yl)}_${Ts(this,_u)._++}`,refCounter:0,isSvg:!1});let i;if(typeof e=="string"?(s.url=e,i=await ep(e,"blob")):e instanceof File?i=s.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const r=Gv._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((u,d)=>{a.onload=()=>{s.bitmap=a,s.isSvg=!0,u()},o.onload=async()=>{const h=s.svgUrl=o.result;a.src=await r?`${h}#svgView(preserveAspectRatio(none))`:h},a.onerror=o.onerror=d});o.readAsDataURL(i),await l}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){$t(i),s=null}return c(this,ms).set(t,s),s&&c(this,ms).set(s.id,s),s};let ng=Gv;var Le,Fr,ku,Ce;class d_{constructor(t=128){A(this,Le,[]);A(this,Fr,!1);A(this,ku);A(this,Ce,-1);y(this,ku,t)}add({cmd:t,undo:e,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(i&&t(),c(this,Fr))return;const l={cmd:t,undo:e,post:s,type:r};if(c(this,Ce)===-1){c(this,Le).length>0&&(c(this,Le).length=0),y(this,Ce,0),c(this,Le).push(l);return}if(o&&c(this,Le)[c(this,Ce)].type===r){a&&(l.undo=c(this,Le)[c(this,Ce)].undo),c(this,Le)[c(this,Ce)]=l;return}const u=c(this,Ce)+1;u===c(this,ku)?c(this,Le).splice(0,1):(y(this,Ce,u),u<c(this,Le).length&&c(this,Le).splice(u)),c(this,Le).push(l)}undo(){if(c(this,Ce)===-1)return;y(this,Fr,!0);const{undo:t,post:e}=c(this,Le)[c(this,Ce)];t(),e==null||e(),y(this,Fr,!1),y(this,Ce,c(this,Ce)-1)}redo(){if(c(this,Ce)<c(this,Le).length-1){y(this,Ce,c(this,Ce)+1),y(this,Fr,!0);const{cmd:t,post:e}=c(this,Le)[c(this,Ce)];t(),e==null||e(),y(this,Fr,!1)}}hasSomethingToUndo(){return c(this,Ce)!==-1}hasSomethingToRedo(){return c(this,Ce)<c(this,Le).length-1}cleanType(t){if(c(this,Ce)!==-1){for(let e=c(this,Ce);e>=0;e--)if(c(this,Le)[e].type!==t){c(this,Le).splice(e+1,c(this,Ce)-e),y(this,Ce,e);return}c(this,Le).length=0,y(this,Ce,-1)}}destroy(){y(this,Le,null)}}Le=new WeakMap,Fr=new WeakMap,ku=new WeakMap,Ce=new WeakMap;var vf,Ty;class th{constructor(t){A(this,vf);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=js.platform;for(const[s,i,r={}]of t)for(const o of s){const a=o.startsWith("mac+");e&&a?(this.callbacks.set(o.slice(4),{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!a&&(this.callbacks.set(o,{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(x(this,vf,Ty).call(this,e));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:o=[],checker:a=null}}=s;a&&!a(t,e)||(i.bind(t,...o,e)(),r||fn(e))}}vf=new WeakSet,Ty=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const mf=class mf{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return l_(t),Yt(this,"_colors",t)}convert(t){const e=Bv(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,i]of this._colors)if(i.every((r,o)=>r===e[o]))return mf._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?Pt.makeHexColor(...e):t}};kt(mf,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ig=mf;var wl,Zs,Ke,rs,Al,Ui,xl,bn,$r,Bo,Sl,jo,di,Bn,Ho,Tu,Pu,El,Ru,hi,Br,Cl,jr,fi,yf,Hr,Iu,Ur,Uo,Mu,Lu,Qe,ae,Vi,Vo,Ou,Du,Vr,pi,Gi,Nu,wn,bt,Sh,rg,Py,Ry,Eh,Iy,My,Ly,og,Oy,ag,lg,Dy,Rs,Ni,Ny,Fy,cg,$y,Bc,ug;const ul=class ul{constructor(t,e,s,i,r,o,a,l,u,d,h,f,p){A(this,bt);A(this,wl,new AbortController);A(this,Zs,null);A(this,Ke,new Map);A(this,rs,new Map);A(this,Al,null);A(this,Ui,null);A(this,xl,null);A(this,bn,new d_);A(this,$r,null);A(this,Bo,null);A(this,Sl,0);A(this,jo,new Set);A(this,di,null);A(this,Bn,null);A(this,Ho,new Set);kt(this,"_editorUndoBar",null);A(this,Tu,!1);A(this,Pu,!1);A(this,El,!1);A(this,Ru,null);A(this,hi,null);A(this,Br,null);A(this,Cl,null);A(this,jr,!1);A(this,fi,null);A(this,yf,new u_);A(this,Hr,!1);A(this,Iu,!1);A(this,Ur,null);A(this,Uo,null);A(this,Mu,null);A(this,Lu,null);A(this,Qe,Gt.NONE);A(this,ae,new Set);A(this,Vi,null);A(this,Vo,null);A(this,Ou,null);A(this,Du,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});A(this,Vr,[0,0]);A(this,pi,null);A(this,Gi,null);A(this,Nu,null);A(this,wn,null);const g=this._signal=c(this,wl).signal;y(this,Gi,t),y(this,Nu,e),y(this,Al,s),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:g}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),i._on("setpreference",this.onSetPreference.bind(this),{signal:g}),i._on("switchannotationeditorparams",m=>this.updateParams(m.type,m.value),{signal:g}),x(this,bt,Iy).call(this),x(this,bt,Dy).call(this),x(this,bt,og).call(this),y(this,Ui,r.annotationStorage),y(this,Ru,r.filterFactory),y(this,Vo,o),y(this,Cl,a||null),y(this,Tu,l),y(this,Pu,u),y(this,El,d),y(this,Lu,h||null),this.viewParameters={realScale:yo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=f||null,this._supportsPinchToZoom=p!==!1}static get _keyboardManager(){const t=ul.prototype,e=o=>c(o,Gi).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Yt(this,"_keyboardManager",new th([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&c(o,Gi).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&c(o,Gi).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,s,i,r;(t=c(this,wn))==null||t.resolve(),y(this,wn,null),(e=c(this,wl))==null||e.abort(),y(this,wl,null),this._signal=null;for(const o of c(this,rs).values())o.destroy();c(this,rs).clear(),c(this,Ke).clear(),c(this,Ho).clear(),y(this,Zs,null),c(this,ae).clear(),c(this,bn).destroy(),(s=c(this,Al))==null||s.destroy(),(i=c(this,fi))==null||i.hide(),y(this,fi,null),c(this,hi)&&(clearTimeout(c(this,hi)),y(this,hi,null)),c(this,pi)&&(clearTimeout(c(this,pi)),y(this,pi,null)),(r=this._editorUndoBar)==null||r.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return c(this,Lu)}get useNewAltTextFlow(){return c(this,Pu)}get useNewAltTextWhenAddingImage(){return c(this,El)}get hcmFilter(){return Yt(this,"hcmFilter",c(this,Vo)?c(this,Ru).addHCMFilter(c(this,Vo).foreground,c(this,Vo).background):"none")}get direction(){return Yt(this,"direction",getComputedStyle(c(this,Gi)).direction)}get highlightColors(){return Yt(this,"highlightColors",c(this,Cl)?new Map(c(this,Cl).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Yt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),y(this,Bo,t)}setMainHighlightColorPicker(t){y(this,Mu,t)}editAltText(t,e=!1){var s;(s=c(this,Al))==null||s.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":y(this,El,e);break}}onPageChanging({pageNumber:t}){y(this,Sl,t-1)}focusMainContainer(){c(this,Gi).focus()}findParent(t,e){for(const s of c(this,rs).values()){const{x:i,y:r,width:o,height:a}=s.div.getBoundingClientRect();if(t>=i&&t<=i+o&&e>=r&&e<=r+a)return s}return null}disableUserSelect(t=!1){c(this,Nu).classList.toggle("noUserSelect",t)}addShouldRescale(t){c(this,Ho).add(t)}removeShouldRescale(t){c(this,Ho).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*yo.PDF_TO_CSS_UNITS;for(const s of c(this,Ho))s.onScaleChanging();(e=c(this,Bo))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:o}=e,a=e.toString(),u=x(this,bt,Sh).call(this,e).closest(".textLayer"),d=this.getSelectionBoxes(u);if(!d)return;e.empty();const h=x(this,bt,rg).call(this,u),f=c(this,Qe)===Gt.NONE,p=()=>{h==null||h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:d,anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:o,text:a}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(Gt.HIGHLIGHT,p);return}p()}addToAnnotationStorage(t){!t.isEmpty()&&c(this,Ui)&&!c(this,Ui).has(t.id)&&c(this,Ui).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,c(this,jr)&&(y(this,jr,!1),x(this,bt,Eh).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of c(this,ae))if(e.div.contains(t)){y(this,Uo,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!c(this,Uo))return;const[t,e]=c(this,Uo);y(this,Uo,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){x(this,bt,og).call(this),x(this,bt,ag).call(this)}removeEditListeners(){x(this,bt,Oy).call(this),x(this,bt,lg).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of c(this,Bn))if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of c(this,Bn))if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var s;if(t.preventDefault(),(s=c(this,Zs))==null||s.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of c(this,ae)){const r=i.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of c(this,Bn))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){$t(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const l of s){const u=await i.deserialize(l);if(!u)return;r.push(u)}const o=()=>{for(const l of r)x(this,bt,cg).call(this,l);x(this,bt,ug).call(this,r)},a=()=>{for(const l of r)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){$t(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,Qe)!==Gt.NONE&&!this.isEditorHandlingKeyboard&&ul._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,jr)&&(y(this,jr,!1),x(this,bt,Eh).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(x(this,bt,My).call(this),x(this,bt,ag).call(this),x(this,bt,Rs).call(this,{isEditing:c(this,Qe)!==Gt.NONE,isEmpty:x(this,bt,Bc).call(this),hasSomethingToUndo:c(this,bn).hasSomethingToUndo(),hasSomethingToRedo:c(this,bn).hasSomethingToRedo(),hasSelectedEditor:!1})):(x(this,bt,Ly).call(this),x(this,bt,lg).call(this),x(this,bt,Rs).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!c(this,Bn)){y(this,Bn,t);for(const e of c(this,Bn))x(this,bt,Ni).call(this,e.defaultPropertiesToUpdate)}}getId(){return c(this,yf).id}get currentLayer(){return c(this,rs).get(c(this,Sl))}getLayer(t){return c(this,rs).get(t)}get currentPageIndex(){return c(this,Sl)}addLayer(t){c(this,rs).set(t.pageIndex,t),c(this,Hr)?t.enable():t.disable()}removeLayer(t){c(this,rs).delete(t.pageIndex)}async updateMode(t,e=null,s=!1){var i;if(c(this,Qe)!==t&&!(c(this,wn)&&(await c(this,wn).promise,!c(this,wn)))){if(y(this,wn,Promise.withResolvers()),y(this,Qe,t),t===Gt.NONE){this.setEditingState(!1),x(this,bt,Fy).call(this),(i=this._editorUndoBar)==null||i.hide(),c(this,wn).resolve();return}this.setEditingState(!0),await x(this,bt,Ny).call(this),this.unselectAll();for(const r of c(this,rs).values())r.updateMode(t);if(!e){s&&this.addNewEditorFromKeyboard(),c(this,wn).resolve();return}for(const r of c(this,Ke).values())r.annotationElementId===e?(this.setSelected(r),r.enterInEditMode()):r.unselect();c(this,wn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==c(this,Qe)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var s;if(c(this,Bn)){switch(t){case Jt.CREATE:this.currentLayer.addNewEditor();return;case Jt.HIGHLIGHT_DEFAULT_COLOR:(s=c(this,Mu))==null||s.updateColor(e);break;case Jt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,Ou)||y(this,Ou,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const i of c(this,ae))i.updateParams(t,e);for(const i of c(this,Bn))i.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){var r;for(const o of c(this,Ke).values())o.editorType===t&&o.show(e);(((r=c(this,Ou))==null?void 0:r.get(Jt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&x(this,bt,Ni).call(this,[[Jt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(c(this,Iu)!==t){y(this,Iu,t);for(const e of c(this,rs).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const s of c(this,Ke).values())s.pageIndex===t&&e.push(s);return e}getEditor(t){return c(this,Ke).get(t)}addEditor(t){c(this,Ke).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(c(this,hi)&&clearTimeout(c(this,hi)),y(this,hi,setTimeout(()=>{this.focusMainContainer(),y(this,hi,null)},0))),c(this,Ke).delete(t.id),this.unselect(t),(!t.annotationElementId||!c(this,jo).has(t.annotationElementId))&&((e=c(this,Ui))==null||e.remove(t.id))}addDeletedAnnotationElement(t){c(this,jo).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return c(this,jo).has(t)}removeDeletedAnnotationElement(t){c(this,jo).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){c(this,Zs)!==t&&(y(this,Zs,t),t&&x(this,bt,Ni).call(this,t.propertiesToUpdate))}updateUI(t){c(this,bt,$y)===t&&x(this,bt,Ni).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){x(this,bt,Ni).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(c(this,ae).has(t)){c(this,ae).delete(t),t.unselect(),x(this,bt,Rs).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,ae).add(t),t.select(),x(this,bt,Ni).call(this,t.propertiesToUpdate),x(this,bt,Rs).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=c(this,Bo))==null||e.commitOrRemove();for(const s of c(this,ae))s!==t&&s.unselect();c(this,ae).clear(),c(this,ae).add(t),t.select(),x(this,bt,Ni).call(this,t.propertiesToUpdate),x(this,bt,Rs).call(this,{hasSelectedEditor:!0})}isSelected(t){return c(this,ae).has(t)}get firstSelectedEditor(){return c(this,ae).values().next().value}unselect(t){t.unselect(),c(this,ae).delete(t),x(this,bt,Rs).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,ae).size!==0}get isEnterHandled(){return c(this,ae).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;c(this,bn).undo(),x(this,bt,Rs).call(this,{hasSomethingToUndo:c(this,bn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:x(this,bt,Bc).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){c(this,bn).redo(),x(this,bt,Rs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,bn).hasSomethingToRedo(),isEmpty:x(this,bt,Bc).call(this)})}addCommands(t){c(this,bn).add(t),x(this,bt,Rs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:x(this,bt,Bc).call(this)})}cleanUndoStack(t){c(this,bn).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...c(this,ae)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(i,e.length===1?e[0].editorType:e.length);for(const a of e)a.remove()},i=()=>{for(const o of e)x(this,bt,cg).call(this,o)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){var t;(t=c(this,Zs))==null||t.commitOrRemove()}hasSomethingToControl(){return c(this,Zs)||this.hasSelection}selectAll(){for(const t of c(this,ae))t.commit();x(this,bt,ug).call(this,c(this,Ke).values())}unselectAll(){var t;if(!(c(this,Zs)&&(c(this,Zs).commitOrRemove(),c(this,Qe)!==Gt.NONE))&&!((t=c(this,Bo))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of c(this,ae))e.unselect();c(this,ae).clear(),x(this,bt,Rs).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;c(this,Vr)[0]+=t,c(this,Vr)[1]+=e;const[i,r]=c(this,Vr),o=[...c(this,ae)],a=1e3;c(this,pi)&&clearTimeout(c(this,pi)),y(this,pi,setTimeout(()=>{y(this,pi,null),c(this,Vr)[0]=c(this,Vr)[1]=0,this.addCommands({cmd:()=>{for(const l of o)c(this,Ke).has(l.id)&&l.translateInPage(i,r)},undo:()=>{for(const l of o)c(this,Ke).has(l.id)&&l.translateInPage(-i,-r)},mustExec:!1})},a));for(const l of o)l.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),y(this,di,new Map);for(const t of c(this,ae))c(this,di).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,di))return!1;this.disableUserSelect(!1);const t=c(this,di);y(this,di,null);let e=!1;for(const[{x:i,y:r,pageIndex:o},a]of t)a.newX=i,a.newY=r,a.newPageIndex=o,e||(e=i!==a.savedX||r!==a.savedY||o!==a.savedPageIndex);if(!e)return!1;const s=(i,r,o,a)=>{if(c(this,Ke).has(i.id)){const l=c(this,rs).get(a);l?i._setParentAndPosition(l,r,o):(i.pageIndex=a,i.x=r,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:o,newPageIndex:a}]of t)s(i,r,o,a)},undo:()=>{for(const[i,{savedX:r,savedY:o,savedPageIndex:a}]of t)s(i,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(c(this,di))for(const s of c(this,di).keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||c(this,ae).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return c(this,Zs)===t}getActive(){return c(this,Zs)}getMode(){return c(this,Qe)}get imageManager(){return Yt(this,"imageManager",new ng)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let u=0,d=e.rangeCount;u<d;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:o}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(u,d,h,f)=>({x:(d-i)/o,y:1-(u+h-s)/r,width:f/o,height:h/r});break;case"180":a=(u,d,h,f)=>({x:1-(u+h-s)/r,y:1-(d+f-i)/o,width:h/r,height:f/o});break;case"270":a=(u,d,h,f)=>({x:1-(d+f-i)/o,y:(u-s)/r,width:f/o,height:h/r});break;default:a=(u,d,h,f)=>({x:(u-s)/r,y:(d-i)/o,width:h/r,height:f/o});break}const l=[];for(let u=0,d=e.rangeCount;u<d;u++){const h=e.getRangeAt(u);if(!h.collapsed)for(const{x:f,y:p,width:g,height:m}of h.getClientRects())g===0||m===0||l.push(a(f,p,g,m))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:e}){(c(this,xl)||y(this,xl,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=c(this,xl))==null||e.delete(t)}renderAnnotationElement(t){var i;const e=(i=c(this,xl))==null?void 0:i.get(t.data.id);if(!e)return;const s=c(this,Ui).getRawValue(e);s&&(c(this,Qe)===Gt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}};wl=new WeakMap,Zs=new WeakMap,Ke=new WeakMap,rs=new WeakMap,Al=new WeakMap,Ui=new WeakMap,xl=new WeakMap,bn=new WeakMap,$r=new WeakMap,Bo=new WeakMap,Sl=new WeakMap,jo=new WeakMap,di=new WeakMap,Bn=new WeakMap,Ho=new WeakMap,Tu=new WeakMap,Pu=new WeakMap,El=new WeakMap,Ru=new WeakMap,hi=new WeakMap,Br=new WeakMap,Cl=new WeakMap,jr=new WeakMap,fi=new WeakMap,yf=new WeakMap,Hr=new WeakMap,Iu=new WeakMap,Ur=new WeakMap,Uo=new WeakMap,Mu=new WeakMap,Lu=new WeakMap,Qe=new WeakMap,ae=new WeakMap,Vi=new WeakMap,Vo=new WeakMap,Ou=new WeakMap,Du=new WeakMap,Vr=new WeakMap,pi=new WeakMap,Gi=new WeakMap,Nu=new WeakMap,wn=new WeakMap,bt=new WeakSet,Sh=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},rg=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of c(this,rs).values())if(s.hasTextLayer(t))return s;return null},Py=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=x(this,bt,Sh).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(c(this,fi)||y(this,fi,new c_(this)),c(this,fi).show(s,i,this.direction==="ltr"))},Ry=function(){var r,o,a;const t=document.getSelection();if(!t||t.isCollapsed){c(this,Vi)&&((r=c(this,fi))==null||r.hide(),y(this,Vi,null),x(this,bt,Rs).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===c(this,Vi))return;const i=x(this,bt,Sh).call(this,t).closest(".textLayer");if(!i){c(this,Vi)&&((o=c(this,fi))==null||o.hide(),y(this,Vi,null),x(this,bt,Rs).call(this,{hasSelectedText:!1}));return}if((a=c(this,fi))==null||a.hide(),y(this,Vi,e),x(this,bt,Rs).call(this,{hasSelectedText:!0}),!(c(this,Qe)!==Gt.HIGHLIGHT&&c(this,Qe)!==Gt.NONE)&&(c(this,Qe)===Gt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),y(this,jr,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=c(this,Qe)===Gt.HIGHLIGHT?x(this,bt,rg).call(this,i):null;l==null||l.toggleDrawing();const u=new AbortController,d=this.combinedSignal(u),h=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),f.type==="pointerup"&&x(this,bt,Eh).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("blur",h,{signal:d})}},Eh=function(t=""){c(this,Qe)===Gt.HIGHLIGHT?this.highlightSelection(t):c(this,Tu)&&x(this,bt,Py).call(this)},Iy=function(){document.addEventListener("selectionchange",x(this,bt,Ry).bind(this),{signal:this._signal})},My=function(){if(c(this,Br))return;y(this,Br,new AbortController);const t=this.combinedSignal(c(this,Br));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},Ly=function(){var t;(t=c(this,Br))==null||t.abort(),y(this,Br,null)},og=function(){if(c(this,Ur))return;y(this,Ur,new AbortController);const t=this.combinedSignal(c(this,Ur));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},Oy=function(){var t;(t=c(this,Ur))==null||t.abort(),y(this,Ur,null)},ag=function(){if(c(this,$r))return;y(this,$r,new AbortController);const t=this.combinedSignal(c(this,$r));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},lg=function(){var t;(t=c(this,$r))==null||t.abort(),y(this,$r,null)},Dy=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Rs=function(t){Object.entries(t).some(([s,i])=>c(this,Du)[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,Du),t)}),c(this,Qe)===Gt.HIGHLIGHT&&t.hasSelectedEditor===!1&&x(this,bt,Ni).call(this,[[Jt.HIGHLIGHT_FREE,!0]]))},Ni=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},Ny=async function(){if(!c(this,Hr)){y(this,Hr,!0);const t=[];for(const e of c(this,rs).values())t.push(e.enable());await Promise.all(t);for(const e of c(this,Ke).values())e.enable()}},Fy=function(){if(this.unselectAll(),c(this,Hr)){y(this,Hr,!1);for(const t of c(this,rs).values())t.disable();for(const t of c(this,Ke).values())t.disable()}},cg=function(t){const e=c(this,rs).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},$y=function(){let t=null;for(t of c(this,ae));return t},Bc=function(){if(c(this,Ke).size===0)return!0;if(c(this,Ke).size===1)for(const t of c(this,Ke).values())return t.isEmpty();return!1},ug=function(t){for(const e of c(this,ae))e.unselect();c(this,ae).clear();for(const e of t)e.isEmpty()||(c(this,ae).add(e),e.select());x(this,bt,Rs).call(this,{hasSelectedEditor:this.hasSelection})},kt(ul,"TRANSLATE_SMALL",1),kt(ul,"TRANSLATE_BIG",10);let Ga=ul;var qe,gi,jn,_l,vi,Qs,kl,mi,Ws,zi,Go,yi,Gr,Zn,jc,Ch;const Is=class Is{constructor(t){A(this,Zn);A(this,qe,null);A(this,gi,!1);A(this,jn,null);A(this,_l,null);A(this,vi,null);A(this,Qs,null);A(this,kl,!1);A(this,mi,null);A(this,Ws,null);A(this,zi,null);A(this,Go,null);A(this,yi,!1);y(this,Ws,t),y(this,yi,t._uiManager.useNewAltTextFlow),c(Is,Gr)||y(Is,Gr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Is._l10n??(Is._l10n=t)}async render(){const t=y(this,jn,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=y(this,_l,document.createElement("span"));t.append(e),c(this,yi)?(t.classList.add("new"),t.setAttribute("data-l10n-id",c(Is,Gr).missing),e.setAttribute("data-l10n-id",c(Is,Gr)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=c(this,Ws)._uiManager._signal;t.addEventListener("contextmenu",ni,{signal:s}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),c(this,Ws)._uiManager.editAltText(c(this,Ws)),c(this,yi)&&c(this,Ws)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,Zn,jc)}})};return t.addEventListener("click",i,{capture:!0,signal:s}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(y(this,kl,!0),i(r))},{signal:s}),await x(this,Zn,Ch).call(this),t}finish(){c(this,jn)&&(c(this,jn).focus({focusVisible:c(this,kl)}),y(this,kl,!1))}isEmpty(){return c(this,yi)?c(this,qe)===null:!c(this,qe)&&!c(this,gi)}hasData(){return c(this,yi)?c(this,qe)!==null||!!c(this,zi):this.isEmpty()}get guessedText(){return c(this,zi)}async setGuessedText(t){c(this,qe)===null&&(y(this,zi,t),y(this,Go,await Is._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),x(this,Zn,Ch).call(this))}toggleAltTextBadge(t=!1){var e;if(!c(this,yi)||c(this,qe)){(e=c(this,mi))==null||e.remove(),y(this,mi,null);return}if(!c(this,mi)){const s=y(this,mi,document.createElement("div"));s.className="noAltTextBadge",c(this,Ws).div.append(s)}c(this,mi).classList.toggle("hidden",!t)}serialize(t){let e=c(this,qe);return!t&&c(this,zi)===e&&(e=c(this,Go)),{altText:e,decorative:c(this,gi),guessedText:c(this,zi),textWithDisclaimer:c(this,Go)}}get data(){return{altText:c(this,qe),decorative:c(this,gi)}}set data({altText:t,decorative:e,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(y(this,zi,s),y(this,Go,i)),!(c(this,qe)===t&&c(this,gi)===e)&&(r||(y(this,qe,t),y(this,gi,e)),x(this,Zn,Ch).call(this))}toggle(t=!1){c(this,jn)&&(!t&&c(this,Qs)&&(clearTimeout(c(this,Qs)),y(this,Qs,null)),c(this,jn).disabled=!t)}shown(){c(this,Ws)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,Zn,jc)}})}destroy(){var t,e;(t=c(this,jn))==null||t.remove(),y(this,jn,null),y(this,_l,null),y(this,vi,null),(e=c(this,mi))==null||e.remove(),y(this,mi,null)}};qe=new WeakMap,gi=new WeakMap,jn=new WeakMap,_l=new WeakMap,vi=new WeakMap,Qs=new WeakMap,kl=new WeakMap,mi=new WeakMap,Ws=new WeakMap,zi=new WeakMap,Go=new WeakMap,yi=new WeakMap,Gr=new WeakMap,Zn=new WeakSet,jc=function(){return c(this,qe)&&"added"||c(this,qe)===null&&this.guessedText&&"review"||"missing"},Ch=async function(){var i,r,o;const t=c(this,jn);if(!t)return;if(c(this,yi)){if(t.classList.toggle("done",!!c(this,qe)),t.setAttribute("data-l10n-id",c(Is,Gr)[c(this,Zn,jc)]),(i=c(this,_l))==null||i.setAttribute("data-l10n-id",c(Is,Gr)[`${c(this,Zn,jc)}-label`]),!c(this,qe)){(r=c(this,vi))==null||r.remove();return}}else{if(!c(this,qe)&&!c(this,gi)){t.classList.remove("done"),(o=c(this,vi))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=c(this,vi);if(!e){y(this,vi,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${c(this,Ws).id}`;const a=100,l=c(this,Ws)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(c(this,Qs)),y(this,Qs,null)},{once:!0}),t.addEventListener("mouseenter",()=>{y(this,Qs,setTimeout(()=>{y(this,Qs,null),c(this,vi).classList.add("show"),c(this,Ws)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),t.addEventListener("mouseleave",()=>{var u;c(this,Qs)&&(clearTimeout(c(this,Qs)),y(this,Qs,null)),(u=c(this,vi))==null||u.classList.remove("show")},{signal:l})}c(this,gi)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=c(this,qe)),e.parentNode||t.append(e);const s=c(this,Ws).getImageForAltText();s==null||s.setAttribute("aria-describedby",e.id)},A(Is,Gr,null),kt(Is,"_l10n",null);let lf=Is;var Fu,zo,$u,Bu,ju,Hu,Uu,Tl,Wi,Wo,zr,Sr,By,jy,dg;const zv=class zv{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:o=null,signal:a}){A(this,Sr);A(this,Fu);A(this,zo,!1);A(this,$u,null);A(this,Bu);A(this,ju);A(this,Hu);A(this,Uu);A(this,Tl);A(this,Wi,null);A(this,Wo);A(this,zr,null);y(this,Fu,t),y(this,$u,s),y(this,Bu,e),y(this,ju,i),y(this,Hu,r),y(this,Uu,o),y(this,Wo,new AbortController),y(this,Tl,AbortSignal.any([a,c(this,Wo).signal])),t.addEventListener("touchstart",x(this,Sr,By).bind(this),{passive:!1,signal:c(this,Tl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return Yt(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var t;(t=c(this,Wo))==null||t.abort(),y(this,Wo,null)}};Fu=new WeakMap,zo=new WeakMap,$u=new WeakMap,Bu=new WeakMap,ju=new WeakMap,Hu=new WeakMap,Uu=new WeakMap,Tl=new WeakMap,Wi=new WeakMap,Wo=new WeakMap,zr=new WeakMap,Sr=new WeakSet,By=function(t){var i,r,o;if((i=c(this,Bu))!=null&&i.call(this)||t.touches.length<2)return;if(!c(this,zr)){y(this,zr,new AbortController);const a=AbortSignal.any([c(this,Tl),c(this,zr).signal]),l=c(this,Fu),u={signal:a,passive:!1};l.addEventListener("touchmove",x(this,Sr,jy).bind(this),u),l.addEventListener("touchend",x(this,Sr,dg).bind(this),u),l.addEventListener("touchcancel",x(this,Sr,dg).bind(this),u),(r=c(this,ju))==null||r.call(this)}if(fn(t),t.touches.length!==2||(o=c(this,$u))!=null&&o.call(this)){y(this,Wi,null);return}let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]),y(this,Wi,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:s.screenX,touch1Y:s.screenY})},jy=function(t){var T;if(!c(this,Wi)||t.touches.length!==2)return;let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]);const{screenX:i,screenY:r}=e,{screenX:o,screenY:a}=s,l=c(this,Wi),{touch0X:u,touch0Y:d,touch1X:h,touch1Y:f}=l,p=h-u,g=f-d,m=o-i,w=a-r,b=Math.hypot(m,w)||1,S=Math.hypot(p,g)||1;if(!c(this,zo)&&Math.abs(S-b)<=zv.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=r,l.touch1X=o,l.touch1Y=a,t.preventDefault(),!c(this,zo)){y(this,zo,!0);return}const C=[(i+o)/2,(r+a)/2];(T=c(this,Hu))==null||T.call(this,C,S,b)},dg=function(t){var e;c(this,zr).abort(),y(this,zr,null),(e=c(this,Uu))==null||e.call(this),c(this,Wi)&&(t.preventDefault(),y(this,Wi,null),y(this,zo,!1))};let cf=zv;var Ko,Hn,Ae,Pl,Wr,Vu,Xo,os,Yo,Ki,Kr,Gu,Jo,qs,zu,Zo,Xi,bi,Rl,Il,An,Qo,Wu,bf,Ot,hg,Ku,fg,_h,Hy,Uy,pg,kh,gg,Vy,Gy,zy,vg,Wy,mg,Ky,Xy,Yy,yg,Hc;const zt=class zt{constructor(t){A(this,Ot);A(this,Ko,null);A(this,Hn,null);A(this,Ae,null);A(this,Pl,!1);A(this,Wr,null);A(this,Vu,"");A(this,Xo,!1);A(this,os,null);A(this,Yo,null);A(this,Ki,null);A(this,Kr,null);A(this,Gu,"");A(this,Jo,!1);A(this,qs,null);A(this,zu,!1);A(this,Zo,!1);A(this,Xi,!1);A(this,bi,null);A(this,Rl,0);A(this,Il,0);A(this,An,null);A(this,Qo,null);kt(this,"_editToolbar",null);kt(this,"_initialOptions",Object.create(null));kt(this,"_initialData",null);kt(this,"_isVisible",!0);kt(this,"_uiManager",null);kt(this,"_focusEventsAllowed",!0);A(this,Wu,!1);A(this,bf,zt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,o];const[a,l]=this.parentDimensions;this.x=t.x/a,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=zt.prototype._resizeWithKeyboard,e=Ga.TRANSLATE_SMALL,s=Ga.TRANSLATE_BIG;return Yt(this,"_resizerKeyboardManager",new th([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],zt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Yt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new h_({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(zt._l10n??(zt._l10n=t),zt._l10nResizer||(zt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),zt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);zt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){ye("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,Wu)}set _isDraggable(t){var e;y(this,Wu,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,bf)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):x(this,Ot,Hc).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(c(this,Jo)?y(this,Jo,!1):this.parent.setSelected(this))}focusout(t){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,i){const[r,o]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(t+s)/r,this.y=(e+i)/o,this.fixAndSetPosition()}translate(t,e){x(this,Ot,hg).call(this,this.parentDimensions,t,e)}translateInPage(t,e){c(this,qs)||y(this,qs,[this.x,this.y,this.width,this.height]),x(this,Ot,hg).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){c(this,qs)||y(this,qs,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[i,r]}=this;if(this.x+=t/i,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,u]=this.getBaseTranslation();o+=l,a+=u;const{style:d}=s;d.left=`${(100*o).toFixed(2)}%`,d.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),s.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!c(this,qs)&&(c(this,qs)[0]!==this.x||c(this,qs)[1]!==this.y)}get _hasBeenResized(){return!!c(this,qs)&&(c(this,qs)[2]!==this.width||c(this,qs)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=zt,i=s/t,r=s/e;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[s,i]}=this;let{x:r,y:o,width:a,height:l}=this;if(a*=s,l*=i,r*=s,o*=i,this._mustFixPosition)switch(t){case 0:r=Math.max(0,Math.min(s-a,r)),o=Math.max(0,Math.min(i-l,o));break;case 90:r=Math.max(0,Math.min(s-l,r)),o=Math.min(i,Math.max(a,o));break;case 180:r=Math.min(s,Math.max(a,r)),o=Math.min(i,Math.max(l,o));break;case 270:r=Math.min(s,Math.max(l,r)),o=Math.max(0,Math.min(i-a,o));break}this.x=r/=s,this.y=o/=i;const[u,d]=this.getBaseTranslation();r+=u,o+=d,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var s;return x(s=zt,Ku,fg).call(s,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var s;return x(s=zt,Ku,fg).call(s,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this;return[e*t,s*t]}setDims(t,e){const[s,i]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/s).toFixed(2)}%`,c(this,Xo)||(r.height=`${(100*e/i).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:s}=t,i=s.endsWith("%"),r=!c(this,Xo)&&e.endsWith("%");if(i&&r)return;const[o,a]=this.parentDimensions;i||(t.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!c(this,Xo)&&!r&&(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=c(this,Ae))==null||t.finish()}async addEditToolbar(){return this._editToolbar||c(this,Zo)?this._editToolbar:(this._editToolbar=new eg(this),this.div.append(this._editToolbar.render()),c(this,Ae)&&await this._editToolbar.addAltText(c(this,Ae)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=c(this,Ae))==null||t.destroy())}addContainer(t){var s;const e=(s=this._editToolbar)==null?void 0:s.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){c(this,Ae)||(lf.initialize(zt._l10n),y(this,Ae,new lf(this)),c(this,Ko)&&(c(this,Ae).data=c(this,Ko),y(this,Ko,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=c(this,Ae))==null?void 0:t.data}set altTextData(t){c(this,Ae)&&(c(this,Ae).data=t)}get guessedAltText(){var t;return(t=c(this,Ae))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=c(this,Ae))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=c(this,Ae))==null?void 0:e.serialize(t)}hasAltText(){return!!c(this,Ae)&&!c(this,Ae).isEmpty()}hasAltTextData(){var t;return((t=c(this,Ae))==null?void 0:t.hasData())??!1}render(){var r;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=c(this,Pl)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),x(this,Ot,mg).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),af(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,Qo)||y(this,Qo,new cf({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:x(this,Ot,Vy).bind(this),onPinching:x(this,Ot,Gy).bind(this),onPinchEnd:x(this,Ot,zy).bind(this),signal:this._uiManager._signal}))),(r=this._uiManager._editorUndoBar)==null||r.hide(),this.div}pointerdown(t){const{isMac:e}=js.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(y(this,Jo,!0),this._isDraggable){x(this,Ot,Wy).call(this,t);return}x(this,Ot,vg).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,bi)&&clearTimeout(c(this,bi)),y(this,bi,setTimeout(()=>{var t;y(this,bi,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,s=this.rotation){const i=this.parentScale,[r,o]=this.pageDimensions,[a,l]=this.pageTranslation,u=t/i,d=e/i,h=this.x*r,f=this.y*o,p=this.width*r,g=this.height*o;switch(s){case 0:return[h+u+a,o-f-d-g+l,h+u+p+a,o-f-d+l];case 90:return[h+d+a,o-f+u+l,h+d+g+a,o-f+u+p+l];case 180:return[h-u-p+a,o-f+d+l,h-u+a,o-f+d+g+l];case 270:return[h-d-g+a,o-f-u-p+l,h-d+a,o-f-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,i,r,o]=t,a=r-s,l=o-i;switch(this.rotation){case 0:return[s,e-o,a,l];case 90:return[s,e-i,l,a];case 180:return[r,e-i,a,l];case 270:return[r,e-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){y(this,Zo,!0)}disableEditMode(){y(this,Zo,!1)}isInEditMode(){return c(this,Zo)}shouldGetKeyboardEvents(){return c(this,Xi)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&i>0&&t<r&&s>0}rebuild(){x(this,Ot,mg).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){ye("An editor must be serializable")}static async deserialize(t,e,s){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s});i.rotation=t.rotation,y(i,Ko,t.accessibilityData);const[r,o]=i.pageDimensions,[a,l,u,d]=i.getRectInCurrentCoords(t.rect,o);return i.x=a/r,i.y=l/o,i.width=u/r,i.height=d/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=c(this,Kr))==null||t.abort(),y(this,Kr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,bi)&&(clearTimeout(c(this,bi)),y(this,bi,null)),x(this,Ot,Hc).call(this),this.removeEditToolbar(),c(this,An)){for(const s of c(this,An).values())clearTimeout(s);y(this,An,null)}this.parent=null,(e=c(this,Qo))==null||e.destroy(),y(this,Qo,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(x(this,Ot,Hy).call(this),c(this,os).classList.remove("hidden"),af(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),y(this,Ki,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=c(this,os).children;if(!c(this,Hn)){y(this,Hn,Array.from(e));const o=x(this,Ot,Ky).bind(this),a=x(this,Ot,Xy).bind(this),l=this._uiManager._signal;for(const u of c(this,Hn)){const d=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:l}),u.addEventListener("blur",a,{signal:l}),u.addEventListener("focus",x(this,Ot,Yy).bind(this,d),{signal:l}),u.setAttribute("data-l10n-id",zt._l10nResizer[d])}}const s=c(this,Hn)[0];let i=0;for(const o of e){if(o===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(c(this,Hn).length/4);if(r!==i){if(r<i)for(let a=0;a<i-r;a++)c(this,os).append(c(this,os).firstChild);else if(r>i)for(let a=0;a<r-i;a++)c(this,os).firstChild.before(c(this,os).lastChild);let o=0;for(const a of e){const u=c(this,Hn)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",zt._l10nResizer[u])}}x(this,Ot,yg).call(this,0),y(this,Xi,!0),c(this,os).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){c(this,Xi)&&x(this,Ot,gg).call(this,c(this,Gu),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){x(this,Ot,Hc).call(this),this.div.focus()}select(){var t,e,s;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(s=c(this,Ae))==null||s.toggleAltTextBadge(!1)}unselect(){var t,e,s,i,r;(t=c(this,os))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=c(this,Ae))==null||r.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return c(this,zu)}set isEditing(t){y(this,zu,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){y(this,Xo,!0);const s=t/e,{style:i}=this.div;i.aspectRatio=s,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){c(this,An)||y(this,An,new Map);const{action:s}=t;let i=c(this,An).get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),c(this,An).delete(s),c(this,An).size===0&&y(this,An,null)},zt._telemetryTimeout),c(this,An).set(s,i);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),y(this,Pl,!1)}disable(){this.div&&(this.div.tabIndex=-1),y(this,Pl,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Ko=new WeakMap,Hn=new WeakMap,Ae=new WeakMap,Pl=new WeakMap,Wr=new WeakMap,Vu=new WeakMap,Xo=new WeakMap,os=new WeakMap,Yo=new WeakMap,Ki=new WeakMap,Kr=new WeakMap,Gu=new WeakMap,Jo=new WeakMap,qs=new WeakMap,zu=new WeakMap,Zo=new WeakMap,Xi=new WeakMap,bi=new WeakMap,Rl=new WeakMap,Il=new WeakMap,An=new WeakMap,Qo=new WeakMap,Wu=new WeakMap,bf=new WeakMap,Ot=new WeakSet,hg=function([t,e],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Ku=new WeakSet,fg=function(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},_h=function(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}},Hy=function(){if(c(this,os))return;y(this,os,document.createElement("div")),c(this,os).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const i=document.createElement("div");c(this,os).append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",x(this,Ot,Uy).bind(this,s),{signal:e}),i.addEventListener("contextmenu",ni,{signal:e}),i.tabIndex=-1}this.div.prepend(c(this,os))},Uy=function(t,e){var d;e.preventDefault();const{isMac:s}=js.platform;if(e.button!==0||e.ctrlKey&&s)return;(d=c(this,Ae))==null||d.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,y(this,Yo,[e.screenX,e.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",x(this,Ot,gg).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",fn,{passive:!1,signal:o}),window.addEventListener("contextmenu",ni,{signal:o}),y(this,Ki,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const u=()=>{var h;r.abort(),this.parent.togglePointerEvents(!0),(h=c(this,Ae))==null||h.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=l,x(this,Ot,kh).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},pg=function(t,e,s,i){this.width=s,this.height=i,this.x=t,this.y=e;const[r,o]=this.parentDimensions;this.setDims(r*s,o*i),this.fixAndSetPosition(),this._onResized()},kh=function(){if(!c(this,Ki))return;const{savedX:t,savedY:e,savedWidth:s,savedHeight:i}=c(this,Ki);y(this,Ki,null);const r=this.x,o=this.y,a=this.width,l=this.height;r===t&&o===e&&a===s&&l===i||this.addCommands({cmd:x(this,Ot,pg).bind(this,r,o,a,l),undo:x(this,Ot,pg).bind(this,t,e,s,i),mustExec:!0})},gg=function(t,e){const[s,i]=this.parentDimensions,r=this.x,o=this.y,a=this.width,l=this.height,u=zt.MIN_SIZE/s,d=zt.MIN_SIZE/i,h=x(this,Ot,_h).call(this,this.rotation),f=(U,K)=>[h[0]*U+h[2]*K,h[1]*U+h[3]*K],p=x(this,Ot,_h).call(this,360-this.rotation),g=(U,K)=>[p[0]*U+p[2]*K,p[1]*U+p[3]*K];let m,w,b=!1,S=!1;switch(t){case"topLeft":b=!0,m=(U,K)=>[0,0],w=(U,K)=>[U,K];break;case"topMiddle":m=(U,K)=>[U/2,0],w=(U,K)=>[U/2,K];break;case"topRight":b=!0,m=(U,K)=>[U,0],w=(U,K)=>[0,K];break;case"middleRight":S=!0,m=(U,K)=>[U,K/2],w=(U,K)=>[0,K/2];break;case"bottomRight":b=!0,m=(U,K)=>[U,K],w=(U,K)=>[0,0];break;case"bottomMiddle":m=(U,K)=>[U/2,K],w=(U,K)=>[U/2,0];break;case"bottomLeft":b=!0,m=(U,K)=>[0,K],w=(U,K)=>[U,0];break;case"middleLeft":S=!0,m=(U,K)=>[0,K/2],w=(U,K)=>[U,K/2];break}const C=m(a,l),T=w(a,l);let _=f(...T);const R=zt._round(r+_[0]),M=zt._round(o+_[1]);let N=1,I=1,G,X;if(e.fromKeyboard)({deltaX:G,deltaY:X}=e);else{const{screenX:U,screenY:K}=e,[tt,Ct]=c(this,Yo);[G,X]=this.screenToPageTranslation(U-tt,K-Ct),c(this,Yo)[0]=U,c(this,Yo)[1]=K}if([G,X]=g(G/s,X/i),b){const U=Math.hypot(a,l);N=I=Math.max(Math.min(Math.hypot(T[0]-C[0]-G,T[1]-C[1]-X)/U,1/a,1/l),u/a,d/l)}else S?N=Math.max(u,Math.min(1,Math.abs(T[0]-C[0]-G)))/a:I=Math.max(d,Math.min(1,Math.abs(T[1]-C[1]-X)))/l;const z=zt._round(a*N),ot=zt._round(l*I);_=f(...w(z,ot));const q=R-_[0],nt=M-_[1];c(this,qs)||y(this,qs,[this.x,this.y,this.width,this.height]),this.width=z,this.height=ot,this.x=q,this.y=nt,this.setDims(s*z,i*ot),this.fixAndSetPosition(),this._onResizing()},Vy=function(){var t;y(this,Ki,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=c(this,Ae))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},Gy=function(t,e,s){let r=.7*(s/e)+1-.7;if(r===1)return;const o=x(this,Ot,_h).call(this,this.rotation),a=(R,M)=>[o[0]*R+o[2]*M,o[1]*R+o[3]*M],[l,u]=this.parentDimensions,d=this.x,h=this.y,f=this.width,p=this.height,g=zt.MIN_SIZE/l,m=zt.MIN_SIZE/u;r=Math.max(Math.min(r,1/f,1/p),g/f,m/p);const w=zt._round(f*r),b=zt._round(p*r);if(w===f&&b===p)return;c(this,qs)||y(this,qs,[d,h,f,p]);const S=a(f/2,p/2),C=zt._round(d+S[0]),T=zt._round(h+S[1]),_=a(w/2,b/2);this.x=C-_[0],this.y=T-_[1],this.width=w,this.height=b,this.setDims(l*w,u*b),this.fixAndSetPosition(),this._onResizing()},zy=function(){var t;(t=c(this,Ae))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),x(this,Ot,kh).call(this)},vg=function(t){const{isMac:e}=js.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},Wy=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:r},a=u=>{i.abort(),y(this,Wr,null),y(this,Jo,!1),this._uiManager.endDragSession()||x(this,Ot,vg).call(this,u),s&&this._onStopDragging()};e&&(y(this,Rl,t.clientX),y(this,Il,t.clientY),y(this,Wr,t.pointerId),y(this,Vu,t.pointerType),window.addEventListener("pointermove",u=>{s||(s=!0,this._onStartDragging());const{clientX:d,clientY:h,pointerId:f}=u;if(f!==c(this,Wr)){fn(u);return}const[p,g]=this.screenToPageTranslation(d-c(this,Rl),h-c(this,Il));y(this,Rl,d),y(this,Il,h),this._uiManager.dragSelectedEditors(p,g)},o),window.addEventListener("touchmove",fn,o),window.addEventListener("pointerdown",u=>{u.pointerType===c(this,Vu)&&(c(this,Qo)||u.isPrimary)&&a(u),fn(u)},o));const l=u=>{if(!c(this,Wr)||c(this,Wr)===u.pointerId){a(u);return}fn(u)};window.addEventListener("pointerup",l,{signal:r}),window.addEventListener("blur",l,{signal:r})},mg=function(){if(c(this,Kr)||!this.div)return;y(this,Kr,new AbortController);const t=this._uiManager.combinedSignal(c(this,Kr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},Ky=function(t){zt._resizerKeyboardManager.exec(this,t)},Xy=function(t){var e;c(this,Xi)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==c(this,os)&&x(this,Ot,Hc).call(this)},Yy=function(t){y(this,Gu,c(this,Xi)?t:"")},yg=function(t){if(c(this,Hn))for(const e of c(this,Hn))e.tabIndex=t},Hc=function(){y(this,Xi,!1),x(this,Ot,yg).call(this,-1),x(this,Ot,kh).call(this)},A(zt,Ku),kt(zt,"_l10n",null),kt(zt,"_l10nResizer",null),kt(zt,"_borderLineWidth",-1),kt(zt,"_colorManager",new ig),kt(zt,"_zIndex",1),kt(zt,"_telemetryTimeout",1e3);let ke=zt;class h_ extends ke{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const g0=3285377520,yn=4294901760,ai=65535;class Jy{constructor(t){this.h1=t?t&4294967295:g0,this.h2=t?t&4294967295:g0}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let m=0,w=t.length;m<w;m++){const b=t.charCodeAt(m);b<=255?e[s++]=b:(e[s++]=b>>>8,e[s++]=b&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,o=new Uint32Array(e.buffer,0,i);let a=0,l=0,u=this.h1,d=this.h2;const h=3432918353,f=461845907,p=h&ai,g=f&ai;for(let m=0;m<i;m++)m&1?(a=o[m],a=a*h&yn|a*p&ai,a=a<<15|a>>>17,a=a*f&yn|a*g&ai,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(l=o[m],l=l*h&yn|l*p&ai,l=l<<15|l>>>17,l=l*f&yn|l*g&ai,d^=l,d=d<<13|d>>>19,d=d*5+3864292196);switch(a=0,r){case 3:a^=e[i*4+2]<<16;case 2:a^=e[i*4+1]<<8;case 1:a^=e[i*4],a=a*h&yn|a*p&ai,a=a<<15|a>>>17,a=a*f&yn|a*g&ai,i&1?u^=a:d^=a}this.h1=u,this.h2=d}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&yn|t*36045&ai,e=e*4283543511&yn|((e<<16|t>>>16)*2950163797&yn)>>>16,t^=e>>>1,t=t*444984403&yn|t*60499&ai,e=e*3301882366&yn|((e<<16|t>>>16)*3120437893&yn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const bg=Object.freeze({map:null,hash:"",transfer:void 0});var qo,ta,ts,wf,Zy;class jv{constructor(){A(this,wf);A(this,qo,!1);A(this,ta,null);A(this,ts,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=c(this,ts).get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return c(this,ts).get(t)}remove(t){if(c(this,ts).delete(t),c(this,ts).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of c(this,ts).values())if(e instanceof ke)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=c(this,ts).get(t);let i=!1;if(s!==void 0)for(const[r,o]of Object.entries(e))s[r]!==o&&(i=!0,s[r]=o);else i=!0,c(this,ts).set(t,e);i&&x(this,wf,Zy).call(this),e instanceof ke&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return c(this,ts).has(t)}getAll(){return c(this,ts).size>0?Ov(c(this,ts)):null}setAll(t){for(const[e,s]of Object.entries(t))this.setValue(e,s)}get size(){return c(this,ts).size}resetModified(){c(this,qo)&&(y(this,qo,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Qy(this)}get serializable(){if(c(this,ts).size===0)return bg;const t=new Map,e=new Jy,s=[],i=Object.create(null);let r=!1;for(const[o,a]of c(this,ts)){const l=a instanceof ke?a.serialize(!1,i):a;l&&(t.set(o,l),e.update(`${o}:${JSON.stringify(l)}`),r||(r=!!l.bitmap))}if(r)for(const o of t.values())o.bitmap&&s.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:bg}get editorStats(){let t=null;const e=new Map;for(const s of c(this,ts).values()){if(!(s instanceof ke))continue;const i=s.telemetryFinalData;if(!i)continue;const{type:r}=i;e.has(r)||e.set(r,Object.getPrototypeOf(s).constructor),t||(t=Object.create(null));const o=t[r]||(t[r]=new Map);for(const[a,l]of Object.entries(i)){if(a==="type")continue;let u=o.get(a);u||(u=new Map,o.set(a,u));const d=u.get(l)??0;u.set(l,d+1)}}for(const[s,i]of e)t[s]=i.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){y(this,ta,null)}get modifiedIds(){if(c(this,ta))return c(this,ta);const t=[];for(const e of c(this,ts).values())!(e instanceof ke)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return y(this,ta,{ids:new Set(t),hash:t.join(",")})}}qo=new WeakMap,ta=new WeakMap,ts=new WeakMap,wf=new WeakSet,Zy=function(){c(this,qo)||(y(this,qo,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Xu;class Qy extends jv{constructor(e){super();A(this,Xu);const{map:s,hash:i,transfer:r}=e.serializable,o=structuredClone(s,r?{transfer:r}:null);y(this,Xu,{map:o,hash:i,transfer:r})}get print(){ye("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,Xu)}get modifiedIds(){return Yt(this,"modifiedIds",{ids:new Set,hash:""})}}Xu=new WeakMap;var Ml;class f_{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){A(this,Ml,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),c(this,Ml).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||c(this,Ml).has(t.loadedName))){if(Be(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:r}=t,o=new FontFace(s,i,r);this.addNativeFontFace(o);try{await o.load(),c(this,Ml).add(s),e==null||e(t)}catch{$t(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}ye("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw $t(`Failed to load font '${s.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Yt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(ks||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Yt(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(Be(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:e,callback:t};return s.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Yt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(T,_){return T.charCodeAt(_)<<24|T.charCodeAt(_+1)<<16|T.charCodeAt(_+2)<<8|T.charCodeAt(_+3)&255}function i(T,_,R,M){const N=T.substring(0,_),I=T.substring(_+R);return N+M+I}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let u=0;function d(T,_){if(++u>30){$t("Load test font never loaded."),_();return}if(l.font="30px "+T,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){_();return}setTimeout(d.bind(null,T,_))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,h.length,h);const g=16,m=1482184792;let w=s(f,g);for(r=0,o=h.length-3;r<o;r+=4)w=w-m+s(h,r)|0;r<h.length&&(w=w-m+s(h+"XXX",r)|0),f=i(f,g,4,QC(w));const b=`url(data:font/opentype;base64,${btoa(f)});`,S=`@font-face {font-family:"${h}";src:${b}}`;this.insertRule(S);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const T of[t.loadedName,h]){const _=this._document.createElement("span");_.textContent="Hi",_.style.fontFamily=T,C.append(_)}this._document.body.append(C),d(h,()=>{C.remove(),e.complete()})}}Ml=new WeakMap;class p_{constructor(t,{disableFontFace:e=!1,fontExtraProperties:s=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in t)this[r]=t[r];this.disableFontFace=e===!0,this.fontExtraProperties=s===!0,this._inspectFont=i}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${i_(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return(s=this._inspectFont)==null||s.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const s=this.loadedName+"_path_"+e;let i;try{i=t.get(s)}catch(o){$t(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[e]=r}}const ch={DATA:1,ERROR:2},Fe={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function v0(){}function Gs(n){if(n instanceof mo||n instanceof Qp||n instanceof bu||n instanceof h0||n instanceof of||n instanceof _p)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||ye('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new mo(n.message);case"InvalidPDFException":return new Qp(n.message);case"MissingPDFException":return new bu(n.message);case"PasswordException":return new h0(n.message,n.code);case"UnexpectedResponseException":return new of(n.message,n.status);case"UnknownErrorException":return new _p(n.message,n.details)}return new _p(n.message,n.toString())}var Ll,In,qy,tb,eb,Th;class Uc{constructor(t,e,s){A(this,In);A(this,Ll,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",x(this,In,qy).bind(this),{signal:c(this,Ll).signal})}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},s)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,s,i){const r=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const d=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:t,streamId:r,data:e,desiredSize:u.desiredSize},i),d.promise},pull:u=>{const d=Promise.withResolvers();return this.streamControllers[r].pullCall=d,l.postMessage({sourceName:o,targetName:a,stream:Fe.PULL,streamId:r,desiredSize:u.desiredSize}),d.promise},cancel:u=>{Be(u instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[r].cancelCall=d,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:Fe.CANCEL,streamId:r,reason:Gs(u)}),d.promise}},s)}destroy(){var t;(t=c(this,Ll))==null||t.abort(),y(this,Ll,null)}}Ll=new WeakMap,In=new WeakSet,qy=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){x(this,In,eb).call(this,t);return}if(t.callback){const s=t.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===ch.DATA)i.resolve(t.data);else if(t.callback===ch.ERROR)i.reject(Gs(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,i=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:s,targetName:i,callback:ch.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:s,targetName:i,callback:ch.ERROR,callbackId:t.callbackId,reason:Gs(o)})});return}if(t.streamId){x(this,In,tb).call(this,t);return}e(t.data)},tb=function(t){const e=t.streamId,s=this.sourceName,i=t.sourceName,r=this.comObj,o=this,a=this.actionHandler[t.action],l={enqueue(u,d=1,h){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=d,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:Fe.ENQUEUE,streamId:e,chunk:u},h)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:Fe.CLOSE,streamId:e}),delete o.streamSinks[e])},error(u){Be(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:Fe.ERROR,streamId:e,reason:Gs(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,Promise.try(a,t.data,l).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Fe.START_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:Fe.START_COMPLETE,streamId:e,reason:Gs(u)})})},eb=function(t){const e=t.streamId,s=this.sourceName,i=t.sourceName,r=this.comObj,o=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case Fe.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(Gs(t.reason));break;case Fe.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(Gs(t.reason));break;case Fe.PULL:if(!a){r.postMessage({sourceName:s,targetName:i,stream:Fe.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,Promise.try(a.onPull||v0).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Fe.PULL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:Fe.PULL_COMPLETE,streamId:e,reason:Gs(u)})});break;case Fe.ENQUEUE:if(Be(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case Fe.CLOSE:if(Be(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),x(this,In,Th).call(this,o,e);break;case Fe.ERROR:Be(o,"error should have stream controller"),o.controller.error(Gs(t.reason)),x(this,In,Th).call(this,o,e);break;case Fe.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(Gs(t.reason)),x(this,In,Th).call(this,o,e);break;case Fe.CANCEL:if(!a)break;const l=Gs(t.reason);Promise.try(a.onCancel||v0,l).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Fe.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:Fe.CANCEL_COMPLETE,streamId:e,reason:Gs(u)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Th=async function(t,e){var s,i,r;await Promise.allSettled([(s=t.startCall)==null?void 0:s.promise,(i=t.pullCall)==null?void 0:i.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var Yu;class sb{constructor({enableHWA:t=!1}){A(this,Yu,!1);y(this,Yu,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!c(this,Yu)})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){ye("Abstract method `_createCanvas` called.")}}Yu=new WeakMap;class g_ extends sb{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}class nb{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){ye("Abstract method `_fetch` called.")}}class ib extends nb{async _fetch(t){const e=await ep(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):tp(e)}}Qt(4520);class rb{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,i,r){return"none"}destroy(t=!1){}}var ea,Ol,Yi,Ji,ys,sa,na,At,gs,Vc,nl,Ph,il,ob,wg,rl,Gc,zc,Ag,Wc;class v_ extends rb{constructor({docId:e,ownerDocument:s=globalThis.document}){super();A(this,At);A(this,ea);A(this,Ol);A(this,Yi);A(this,Ji);A(this,ys);A(this,sa);A(this,na,0);y(this,Ji,e),y(this,ys,s)}addFilter(e){if(!e)return"none";let s=c(this,At,gs).get(e);if(s)return s;const[i,r,o]=x(this,At,Ph).call(this,e),a=e.length===1?i:`${i}${r}${o}`;if(s=c(this,At,gs).get(a),s)return c(this,At,gs).set(e,s),s;const l=`g_${c(this,Ji)}_transfer_map_${Ts(this,na)._++}`,u=x(this,At,il).call(this,l);c(this,At,gs).set(e,u),c(this,At,gs).set(a,u);const d=x(this,At,rl).call(this,l);return x(this,At,zc).call(this,i,r,o,d),u}addHCMFilter(e,s){var g;const i=`${e}-${s}`,r="base";let o=c(this,At,Vc).get(r);if((o==null?void 0:o.key)===i||(o?((g=o.filter)==null||g.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},c(this,At,Vc).set(r,o)),!e||!s))return o.url;const a=x(this,At,Wc).call(this,e);e=Pt.makeHexColor(...a);const l=x(this,At,Wc).call(this,s);if(s=Pt.makeHexColor(...l),c(this,At,nl).style.color="",e==="#000000"&&s==="#ffffff"||e===s)return o.url;const u=new Array(256);for(let m=0;m<=255;m++){const w=m/255;u[m]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const d=u.join(","),h=`g_${c(this,Ji)}_hcm_filter`,f=o.filter=x(this,At,rl).call(this,h);x(this,At,zc).call(this,d,d,d,f),x(this,At,wg).call(this,f);const p=(m,w)=>{const b=a[m]/255,S=l[m]/255,C=new Array(w+1);for(let T=0;T<=w;T++)C[T]=b+T/w*(S-b);return C.join(",")};return x(this,At,zc).call(this,p(0,5),p(1,5),p(2,5),f),o.url=x(this,At,il).call(this,h),o.url}addAlphaFilter(e){let s=c(this,At,gs).get(e);if(s)return s;const[i]=x(this,At,Ph).call(this,[e]),r=`alpha_${i}`;if(s=c(this,At,gs).get(r),s)return c(this,At,gs).set(e,s),s;const o=`g_${c(this,Ji)}_alpha_map_${Ts(this,na)._++}`,a=x(this,At,il).call(this,o);c(this,At,gs).set(e,a),c(this,At,gs).set(r,a);const l=x(this,At,rl).call(this,o);return x(this,At,Ag).call(this,i,l),a}addLuminosityFilter(e){let s=c(this,At,gs).get(e||"luminosity");if(s)return s;let i,r;if(e?([i]=x(this,At,Ph).call(this,[e]),r=`luminosity_${i}`):r="luminosity",s=c(this,At,gs).get(r),s)return c(this,At,gs).set(e,s),s;const o=`g_${c(this,Ji)}_luminosity_map_${Ts(this,na)._++}`,a=x(this,At,il).call(this,o);c(this,At,gs).set(e,a),c(this,At,gs).set(r,a);const l=x(this,At,rl).call(this,o);return x(this,At,ob).call(this,l),e&&x(this,At,Ag).call(this,i,l),a}addHighlightHCMFilter(e,s,i,r,o){var S;const a=`${s}-${i}-${r}-${o}`;let l=c(this,At,Vc).get(e);if((l==null?void 0:l.key)===a||(l?((S=l.filter)==null||S.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},c(this,At,Vc).set(e,l)),!s||!i))return l.url;const[u,d]=[s,i].map(x(this,At,Wc).bind(this));let h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[p,g]=[r,o].map(x(this,At,Wc).bind(this));f<h&&([h,f,p,g]=[f,h,g,p]),c(this,At,nl).style.color="";const m=(C,T,_)=>{const R=new Array(256),M=(f-h)/_,N=C/255,I=(T-C)/(255*_);let G=0;for(let X=0;X<=_;X++){const z=Math.round(h+X*M),ot=N+X*I;for(let q=G;q<=z;q++)R[q]=ot;G=z+1}for(let X=G;X<256;X++)R[X]=R[G-1];return R.join(",")},w=`g_${c(this,Ji)}_hcm_${e}_filter`,b=l.filter=x(this,At,rl).call(this,w);return x(this,At,wg).call(this,b),x(this,At,zc).call(this,m(p[0],g[0],5),m(p[1],g[1],5),m(p[2],g[2],5),b),l.url=x(this,At,il).call(this,w),l.url}destroy(e=!1){var s,i,r,o;e&&((s=c(this,sa))!=null&&s.size)||((i=c(this,Yi))==null||i.parentNode.parentNode.remove(),y(this,Yi,null),(r=c(this,Ol))==null||r.clear(),y(this,Ol,null),(o=c(this,sa))==null||o.clear(),y(this,sa,null),y(this,na,0))}}ea=new WeakMap,Ol=new WeakMap,Yi=new WeakMap,Ji=new WeakMap,ys=new WeakMap,sa=new WeakMap,na=new WeakMap,At=new WeakSet,gs=function(){return c(this,Ol)||y(this,Ol,new Map)},Vc=function(){return c(this,sa)||y(this,sa,new Map)},nl=function(){if(!c(this,Yi)){const e=c(this,ys).createElement("div"),{style:s}=e;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const i=c(this,ys).createElementNS(Di,"svg");i.setAttribute("width",0),i.setAttribute("height",0),y(this,Yi,c(this,ys).createElementNS(Di,"defs")),e.append(i),i.append(c(this,Yi)),c(this,ys).body.append(e)}return c(this,Yi)},Ph=function(e){if(e.length===1){const u=e[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=u[f]/255;const h=d.join(",");return[h,h,h]}const[s,i,r]=e,o=new Array(256),a=new Array(256),l=new Array(256);for(let u=0;u<256;u++)o[u]=s[u]/255,a[u]=i[u]/255,l[u]=r[u]/255;return[o.join(","),a.join(","),l.join(",")]},il=function(e){if(c(this,ea)===void 0){y(this,ea,"");const s=c(this,ys).URL;s!==c(this,ys).baseURI&&(sp(s)?$t('#createUrl: ignore "data:"-URL for performance reasons.'):y(this,ea,s.split("#",1)[0]))}return`url(${c(this,ea)}#${e})`},ob=function(e){const s=c(this,ys).createElementNS(Di,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(s)},wg=function(e){const s=c(this,ys).createElementNS(Di,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(s)},rl=function(e){const s=c(this,ys).createElementNS(Di,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",e),c(this,At,nl).append(s),s},Gc=function(e,s,i){const r=c(this,ys).createElementNS(Di,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),e.append(r)},zc=function(e,s,i,r){const o=c(this,ys).createElementNS(Di,"feComponentTransfer");r.append(o),x(this,At,Gc).call(this,o,"feFuncR",e),x(this,At,Gc).call(this,o,"feFuncG",s),x(this,At,Gc).call(this,o,"feFuncB",i)},Ag=function(e,s){const i=c(this,ys).createElementNS(Di,"feComponentTransfer");s.append(i),x(this,At,Gc).call(this,i,"feFuncA",e)},Wc=function(e){return c(this,At,nl).style.color=e,Bv(getComputedStyle(c(this,At,nl)).getPropertyValue("color"))};class ab{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){ye("Abstract method `_fetch` called.")}}class lb extends ab{async _fetch(t){const e=await ep(t,"arraybuffer");return new Uint8Array(e)}}if(ks){let n;try{const t=process.getBuiltinModule("module").createRequire(import.meta.url);try{n=t("@napi-rs/canvas")}catch(e){$t(`Cannot load "@napi-rs/canvas" package: "${e}".`)}}catch(t){$t(`Cannot access the \`require\` function: "${t}".`)}globalThis.DOMMatrix||(n!=null&&n.DOMMatrix?globalThis.DOMMatrix=n.DOMMatrix:$t("Cannot polyfill `DOMMatrix`, rendering may be broken.")),globalThis.ImageData||(n!=null&&n.ImageData?globalThis.ImageData=n.ImageData:$t("Cannot polyfill `ImageData`, rendering may be broken.")),globalThis.Path2D||(n!=null&&n.Path2D?globalThis.Path2D=n.Path2D:$t("Cannot polyfill `Path2D`, rendering may be broken."))}async function cb(n){const e=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)}class m_ extends rb{}class y_ extends sb{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class b_ extends nb{async _fetch(t){return cb(t)}}class w_ extends ab{async _fetch(t){return cb(t)}}const xs={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function xg(n,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,s),n.clip(i)}class Hv{getPattern(){ye("Abstract method `getPattern` called.")}}class A_ extends Hv{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,i){let r;if(i===xs.STROKE||i===xs.FILL){const o=e.current.getClippedPathBoundingBox(i,Se(t))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,u=e.cachedCanvases.getCanvas("pattern",a,l),d=u.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-o[0],-o[1]),s=Pt.transform(s,[1,0,0,1,o[0],o[1]]),d.transform(...e.baseTransform),this.matrix&&d.transform(...this.matrix),xg(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),r=t.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(s);r.setTransform(h)}else xg(t,this._bbox),r=this._createGradient(t);return r}}function Pp(n,t,e,s,i,r,o,a){const l=t.coords,u=t.colors,d=n.data,h=n.width*4;let f;l[e+1]>l[s+1]&&(f=e,e=s,s=f,f=r,r=o,o=f),l[s+1]>l[i+1]&&(f=s,s=i,i=f,f=o,o=a,a=f),l[e+1]>l[s+1]&&(f=e,e=s,s=f,f=r,r=o,o=f);const p=(l[e]+t.offsetX)*t.scaleX,g=(l[e+1]+t.offsetY)*t.scaleY,m=(l[s]+t.offsetX)*t.scaleX,w=(l[s+1]+t.offsetY)*t.scaleY,b=(l[i]+t.offsetX)*t.scaleX,S=(l[i+1]+t.offsetY)*t.scaleY;if(g>=S)return;const C=u[r],T=u[r+1],_=u[r+2],R=u[o],M=u[o+1],N=u[o+2],I=u[a],G=u[a+1],X=u[a+2],z=Math.round(g),ot=Math.round(S);let q,nt,U,K,tt,Ct,vt,Mt;for(let Rt=z;Rt<=ot;Rt++){if(Rt<w){const L=Rt<g?0:(g-Rt)/(g-w);q=p-(p-m)*L,nt=C-(C-R)*L,U=T-(T-M)*L,K=_-(_-N)*L}else{let L;Rt>S?L=1:w===S?L=0:L=(w-Rt)/(w-S),q=m-(m-b)*L,nt=R-(R-I)*L,U=M-(M-G)*L,K=N-(N-X)*L}let Vt;Rt<g?Vt=0:Rt>S?Vt=1:Vt=(g-Rt)/(g-S),tt=p-(p-b)*Vt,Ct=C-(C-I)*Vt,vt=T-(T-G)*Vt,Mt=_-(_-X)*Vt;const It=Math.round(Math.min(q,tt)),ie=Math.round(Math.max(q,tt));let lt=h*Rt+It*4;for(let L=It;L<=ie;L++)Vt=(q-L)/(q-tt),Vt<0?Vt=0:Vt>1&&(Vt=1),d[lt++]=nt-(nt-Ct)*Vt|0,d[lt++]=U-(U-vt)*Vt|0,d[lt++]=K-(K-Mt)*Vt|0,d[lt++]=255}}function x_(n,t,e){const s=t.coords,i=t.colors;let r,o;switch(t.type){case"lattice":const a=t.verticesPerRow,l=Math.floor(s.length/a)-1,u=a-1;for(r=0;r<l;r++){let d=r*a;for(let h=0;h<u;h++,d++)Pp(n,e,s[d],s[d+1],s[d+a],i[d],i[d+1],i[d+a]),Pp(n,e,s[d+a+1],s[d+1],s[d+a],i[d+a+1],i[d+1],i[d+a])}break;case"triangles":for(r=0,o=s.length;r<o;r+=3)Pp(n,e,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class S_ extends Hv{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,s){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,d=Math.ceil(this._bounds[3])-l,h=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(d*t[1]*1.1)),3e3),p=u/h,g=d/f,m={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/p,scaleY:1/g},w=h+2*2,b=f+2*2,S=s.getCanvas("mesh",w,b),C=S.context,T=C.createImageData(h,f);if(e){const R=T.data;for(let M=0,N=R.length;M<N;M+=4)R[M]=e[0],R[M+1]=e[1],R[M+2]=e[2],R[M+3]=255}for(const R of this._figures)x_(T,R,m);return C.putImageData(T,2,2),{canvas:S.canvas,offsetX:a-2*p,offsetY:l-2*g,scaleX:p,scaleY:g}}getPattern(t,e,s,i){xg(t,this._bbox);let r;if(i===xs.SHADING)r=Pt.singularValueDecompose2dScale(Se(t));else if(r=Pt.singularValueDecompose2dScale(e.baseTransform),this.matrix){const a=Pt.singularValueDecompose2dScale(this.matrix);r=[r[0]*a[0],r[1]*a[1]]}const o=this._createMeshCanvas(r,i===xs.SHADING?null:this._background,e.cachedCanvases);return i!==xs.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class E_ extends Hv{getPattern(){return"hotpink"}}function C_(n){switch(n[0]){case"RadialAxial":return new A_(n);case"Mesh":return new S_(n);case"Dummy":return new E_}throw new Error(`Unknown IR type: ${n[0]}`)}const m0={COLORED:1,UNCOLORED:2},Af=class Af{constructor(t,e,s,i,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=s,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(t){const{bbox:e,operatorList:s,paintType:i,tilingType:r,color:o,canvasGraphicsFactory:a}=this;let{xstep:l,ystep:u}=this;l=Math.abs(l),u=Math.abs(u),qf("TilingType: "+r);const d=e[0],h=e[1],f=e[2],p=e[3],g=f-d,m=p-h,w=Pt.singularValueDecompose2dScale(this.matrix),b=Pt.singularValueDecompose2dScale(this.baseTransform),S=w[0]*b[0],C=w[1]*b[1];let T=g,_=m,R=!1,M=!1;const N=Math.ceil(l*S),I=Math.ceil(u*C),G=Math.ceil(g*S),X=Math.ceil(m*C);N>=G?T=l:R=!0,I>=X?_=u:M=!0;const z=this.getSizeAndScale(T,this.ctx.canvas.width,S),ot=this.getSizeAndScale(_,this.ctx.canvas.height,C),q=t.cachedCanvases.getCanvas("pattern",z.size,ot.size),nt=q.context,U=a.createCanvasGraphics(nt);if(U.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(U,i,o),nt.translate(-z.scale*d,-ot.scale*h),U.transform(z.scale,0,0,ot.scale,0,0),nt.save(),this.clipBbox(U,d,h,f,p),U.baseTransform=Se(U.ctx),U.executeOperatorList(s),U.endDrawing(),nt.restore(),R||M){const K=q.canvas;R&&(T=l),M&&(_=u);const tt=this.getSizeAndScale(T,this.ctx.canvas.width,S),Ct=this.getSizeAndScale(_,this.ctx.canvas.height,C),vt=tt.size,Mt=Ct.size,Rt=t.cachedCanvases.getCanvas("pattern-workaround",vt,Mt),Vt=Rt.context,It=R?Math.floor(g/l):0,ie=M?Math.floor(m/u):0;for(let lt=0;lt<=It;lt++)for(let L=0;L<=ie;L++)Vt.drawImage(K,vt*lt,Mt*L,vt,Mt,0,0,vt,Mt);return{canvas:Rt.canvas,scaleX:tt.scale,scaleY:Ct.scale,offsetX:d,offsetY:h}}return{canvas:q.canvas,scaleX:z.scale,scaleY:ot.scale,offsetX:d,offsetY:h}}getSizeAndScale(t,e,s){const i=Math.max(Af.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*s);return r>=i?r=i:s=r/t,{scale:s,size:r}}clipBbox(t,e,s,i,r){const o=i-e,a=r-s;t.ctx.rect(e,s,o,a),t.current.updateRectMinMax(Se(t.ctx),[e,s,i,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const i=t.ctx,r=t.current;switch(e){case m0.COLORED:const o=this.ctx;i.fillStyle=o.fillStyle,i.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case m0.UNCOLORED:const a=Pt.makeHexColor(s[0],s[1],s[2]);i.fillStyle=a,i.strokeStyle=a,r.fillColor=a,r.strokeColor=a;break;default:throw new ZC(`Unsupported paint type: ${e}`)}}getPattern(t,e,s,i){let r=s;i!==xs.SHADING&&(r=Pt.transform(r,e.baseTransform),this.matrix&&(r=Pt.transform(r,this.matrix)));const o=this.createPatternCanvas(e);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=t.createPattern(o.canvas,"repeat");return l.setTransform(a),l}};kt(Af,"MAX_PATTERN_SIZE",3e3);let Sg=Af;function __({src:n,srcPos:t=0,dest:e,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=js.isLittleEndian?4278190080:255,[l,u]=o?[r,a]:[a,r],d=s>>3,h=s&7,f=n.length;e=new Uint32Array(e.buffer);let p=0;for(let g=0;g<i;g++){for(const w=t+d;t<w;t++){const b=t<f?n[t]:255;e[p++]=b&128?u:l,e[p++]=b&64?u:l,e[p++]=b&32?u:l,e[p++]=b&16?u:l,e[p++]=b&8?u:l,e[p++]=b&4?u:l,e[p++]=b&2?u:l,e[p++]=b&1?u:l}if(h===0)continue;const m=t<f?n[t++]:255;for(let w=0;w<h;w++)e[p++]=m&1<<7-w?u:l}return{srcPos:t,destPos:p}}const y0=16,b0=100,k_=15,w0=10,A0=1e3,Ys=16;function T_(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(s,i){t.translate(s,i),this.__originalTranslate(s,i)},n.scale=function(s,i){t.scale(s,i),this.__originalScale(s,i)},n.transform=function(s,i,r,o,a,l){t.transform(s,i,r,o,a,l),this.__originalTransform(s,i,r,o,a,l)},n.setTransform=function(s,i,r,o,a,l){t.setTransform(s,i,r,o,a,l),this.__originalSetTransform(s,i,r,o,a,l)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(s){t.rotate(s),this.__originalRotate(s)},n.clip=function(s){t.clip(s),this.__originalClip(s)},n.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},n.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},n.bezierCurveTo=function(e,s,i,r,o,a){t.bezierCurveTo(e,s,i,r,o,a),this.__originalBezierCurveTo(e,s,i,r,o,a)},n.rect=function(e,s,i,r){t.rect(e,s,i,r),this.__originalRect(e,s,i,r)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class P_{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,s)):(i=this.canvasFactory.create(e,s),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function uh(n,t,e,s,i,r,o,a,l,u){const[d,h,f,p,g,m]=Se(n);if(h===0&&f===0){const S=o*d+g,C=Math.round(S),T=a*p+m,_=Math.round(T),R=(o+l)*d+g,M=Math.abs(Math.round(R)-C)||1,N=(a+u)*p+m,I=Math.abs(Math.round(N)-_)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(p),C,_),n.drawImage(t,e,s,i,r,0,0,M,I),n.setTransform(d,h,f,p,g,m),[M,I]}if(d===0&&p===0){const S=a*f+g,C=Math.round(S),T=o*h+m,_=Math.round(T),R=(a+u)*f+g,M=Math.abs(Math.round(R)-C)||1,N=(o+l)*h+m,I=Math.abs(Math.round(N)-_)||1;return n.setTransform(0,Math.sign(h),Math.sign(f),0,C,_),n.drawImage(t,e,s,i,r,0,0,I,M),n.setTransform(d,h,f,p,g,m),[I,M]}n.drawImage(t,e,s,i,r,o,a,l,u);const w=Math.hypot(d,h),b=Math.hypot(f,p);return[w*l,b*u]}function R_(n){const{width:t,height:e}=n;if(t>A0||e>A0)return null;const s=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let o=new Uint8Array(r*(e+1)),a,l,u;const d=t+7&-8;let h=new Uint8Array(d*e),f=0;for(const b of n.data){let S=128;for(;S>0;)h[f++]=b&S?0:255,S>>=1}let p=0;for(f=0,h[f]!==0&&(o[0]=1,++p),l=1;l<t;l++)h[f]!==h[f+1]&&(o[l]=h[f]?2:1,++p),f++;for(h[f]!==0&&(o[l]=2,++p),a=1;a<e;a++){f=a*d,u=a*r,h[f-d]!==h[f]&&(o[u]=h[f]?1:8,++p);let b=(h[f]?4:0)+(h[f-d]?8:0);for(l=1;l<t;l++)b=(b>>2)+(h[f+1]?4:0)+(h[f-d+1]?8:0),i[b]&&(o[u+l]=i[b],++p),f++;if(h[f-d]!==h[f]&&(o[u+l]=h[f]?2:4,++p),p>s)return null}for(f=d*(e-1),u=a*r,h[f]!==0&&(o[u]=8,++p),l=1;l<t;l++)h[f]!==h[f+1]&&(o[u+l]=h[f]?4:8,++p),f++;if(h[f]!==0&&(o[u+l]=4,++p),p>s)return null;const g=new Int32Array([0,r,-1,0,-r,0,0,0,1]),m=new Path2D;for(a=0;p&&a<=e;a++){let b=a*r;const S=b+t;for(;b<S&&!o[b];)b++;if(b===S)continue;m.moveTo(b%r,a);const C=b;let T=o[b];do{const _=g[T];do b+=_;while(!o[b]);const R=o[b];R!==5&&R!==10?(T=R,o[b]=0):(T=R&51*T>>4,o[b]&=T>>2|T<<2),m.lineTo(b%r,b/r|0),o[b]||--p}while(C!==b);--a}return h=null,o=null,function(b){b.save(),b.scale(1/t,-1/e),b.translate(0,-e),b.fill(m),b.beginPath(),b.restore()}}class x0{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=by,this.textMatrixScale=1,this.fontMatrix=Zp,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=ps.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,s){[e,s]=Pt.applyTransform([e,s],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(t,e){const s=Pt.applyTransform(e,t),i=Pt.applyTransform(e.slice(2),t),r=Pt.applyTransform([e[0],e[3]],t),o=Pt.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,s[0],i[0],r[0],o[0]),this.minY=Math.min(this.minY,s[1],i[1],r[1],o[1]),this.maxX=Math.max(this.maxX,s[0],i[0],r[0],o[0]),this.maxY=Math.max(this.maxY,s[1],i[1],r[1],o[1])}updateScalingPathMinMax(t,e){Pt.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,s,i,r,o,a,l,u,d){const h=Pt.bezierBoundingBox(e,s,i,r,o,a,l,u,d);d||this.updateRectMinMax(t,h)}getPathBoundingBox(t=xs.FILL,e=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(t===xs.STROKE){e||ye("Stroke bounding box must include transform.");const i=Pt.singularValueDecompose2dScale(e),r=i[0]*this.lineWidth/2,o=i[1]*this.lineWidth/2;s[0]-=r,s[1]-=o,s[2]+=r,s[3]+=o}return s}updateClipFromPath(){const t=Pt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=xs.FILL,e=null){return Pt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function S0(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,s=t.width,i=e%Ys,r=(e-i)/Ys,o=i===0?r:r+1,a=n.createImageData(s,Ys);let l=0,u;const d=t.data,h=a.data;let f,p,g,m;if(t.kind===bh.GRAYSCALE_1BPP){const w=d.byteLength,b=new Uint32Array(h.buffer,0,h.byteLength>>2),S=b.length,C=s+7>>3,T=4294967295,_=js.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(g=f<r?Ys:i,u=0,p=0;p<g;p++){const R=w-l;let M=0;const N=R>C?s:R*8-7,I=N&-8;let G=0,X=0;for(;M<I;M+=8)X=d[l++],b[u++]=X&128?T:_,b[u++]=X&64?T:_,b[u++]=X&32?T:_,b[u++]=X&16?T:_,b[u++]=X&8?T:_,b[u++]=X&4?T:_,b[u++]=X&2?T:_,b[u++]=X&1?T:_;for(;M<N;M++)G===0&&(X=d[l++],G=128),b[u++]=X&G?T:_,G>>=1}for(;u<S;)b[u++]=0;n.putImageData(a,0,f*Ys)}}else if(t.kind===bh.RGBA_32BPP){for(p=0,m=s*Ys*4,f=0;f<r;f++)h.set(d.subarray(l,l+m)),l+=m,n.putImageData(a,0,p),p+=Ys;f<o&&(m=s*i*4,h.set(d.subarray(l,l+m)),n.putImageData(a,0,p))}else if(t.kind===bh.RGB_24BPP)for(g=Ys,m=s*g,f=0;f<o;f++){for(f>=r&&(g=i,m=s*g),u=0,p=m;p--;)h[u++]=d[l++],h[u++]=d[l++],h[u++]=d[l++],h[u++]=255;n.putImageData(a,0,f*Ys)}else throw new Error(`bad image kind: ${t.kind}`)}function E0(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,i=e%Ys,r=(e-i)/Ys,o=i===0?r:r+1,a=n.createImageData(s,Ys);let l=0;const u=t.data,d=a.data;for(let h=0;h<o;h++){const f=h<r?Ys:i;({srcPos:l}=__({src:u,srcPos:l,dest:d,width:s,height:f,nonBlackColor:0})),n.putImageData(a,0,h*Ys)}}function Oc(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)n[s]!==void 0&&(t[s]=n[s]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function dh(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!ks){const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}}function C0(n,t){if(t)return!0;const e=Pt.singularValueDecompose2dScale(n);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*yo.PDF_TO_CSS_UNITS);return e[0]<=s&&e[1]<=s}const I_=["butt","round","square"],M_=["miter","round","bevel"],L_={},_0={};var ii,Eg,Cg,_g;const Wv=class Wv{constructor(t,e,s,i,r,{optionalContentConfig:o,markedContentStack:a=null},l,u){A(this,ii);this.ctx=t,this.current=new x0(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new P_(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,s){const l=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Se(this.compositeCtx))}this.ctx.save(),dh(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Se(this.ctx)}executeOperatorList(t,e,s,i){const r=t.argsArray,o=t.fnArray;let a=e||0;const l=r.length;if(l===a)return a;const u=l-a>w0&&typeof s=="function",d=u?Date.now()+k_:0;let h=0;const f=this.commonObjs,p=this.objs;let g;for(;;){if(i!==void 0&&a===i.nextBreakPoint)return i.breakIt(a,s),a;if(g=o[a],g!==Fn.dependency)this[g].apply(this,r[a]);else for(const m of r[a]){const w=m.startsWith("g_")?f:p;if(!w.has(m))return w.get(m,s),a}if(a++,a===l)return a;if(u&&++h>w0){if(Date.now()>d)return s(),a;h=0}}}endDrawing(){x(this,ii,Eg).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),x(this,ii,Cg).call(this)}_scaleImage(t,e){const s=t.width??t.displayWidth,i=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),a=s,l=i,u="prescale1",d,h;for(;r>2&&a>1||o>2&&l>1;){let f=a,p=l;r>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/f),o>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/p),d=this.cachedCanvases.getCanvas(u,f,p),h=d.context,h.clearRect(0,0,f,p),h.drawImage(t,0,0,a,l,0,0,f,p),t=d.canvas,a=f,l=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:l}}_createMaskCanvas(t){const e=this.ctx,{width:s,height:i}=t,r=this.current.fillColor,o=this.current.patternFill,a=Se(e);let l,u,d,h;if((t.bitmap||t.data)&&t.count>1){const N=t.bitmap||t.data.buffer;u=JSON.stringify(o?a:[a.slice(0,4),r]),l=this._cachedBitmapsMap.get(N),l||(l=new Map,this._cachedBitmapsMap.set(N,l));const I=l.get(u);if(I&&!o){const G=Math.round(Math.min(a[0],a[2])+a[4]),X=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:I,offsetX:G,offsetY:X}}d=I}d||(h=this.cachedCanvases.getCanvas("maskCanvas",s,i),E0(h.context,t));let f=Pt.transform(a,[1/s,0,0,-1/i,0,0]);f=Pt.transform(f,[1,0,0,1,0,-i]);const[p,g,m,w]=Pt.getAxialAlignedBoundingBox([0,0,s,i],f),b=Math.round(m-p)||1,S=Math.round(w-g)||1,C=this.cachedCanvases.getCanvas("fillCanvas",b,S),T=C.context,_=p,R=g;T.translate(-_,-R),T.transform(...f),d||(d=this._scaleImage(h.canvas,oi(T)),d=d.img,l&&o&&l.set(u,d)),T.imageSmoothingEnabled=C0(Se(T),t.interpolate),uh(T,d,0,0,d.width,d.height,0,0,s,i),T.globalCompositeOperation="source-in";const M=Pt.transform(oi(T),[1,0,0,1,-_,-R]);return T.fillStyle=o?r.getPattern(e,this,M,xs.FILL):r,T.fillRect(0,0,s,i),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(u,C.canvas)),{canvas:C.canvas,offsetX:Math.round(_),offsetY:Math.round(R)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=I_[t]}setLineJoin(t){this.ctx.lineJoin=M_[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,s]of t)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,t,e);this.suspendedCtx=this.ctx,this.ctx=i.context;const r=this.ctx;r.setTransform(...Se(this.suspendedCtx)),Oc(this.suspendedCtx,r),T_(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Oc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,i){const r=i[0],o=i[1],a=i[2]-r,l=i[3]-o;a===0||l===0||(this.genericComposeSMask(e.context,s,a,l,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,i,r,o,a,l,u,d,h){let f=t.canvas,p=l-d,g=u-h;if(o){const w=Pt.makeHexColor(...o);if(p<0||g<0||p+s>f.width||g+i>f.height){const b=this.cachedCanvases.getCanvas("maskExtension",s,i),S=b.context;S.drawImage(f,-p,-g),S.globalCompositeOperation="destination-atop",S.fillStyle=w,S.fillRect(0,0,s,i),S.globalCompositeOperation="source-over",f=b.canvas,p=g=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const b=new Path2D;b.rect(p,g,s,i),t.clip(b),t.globalCompositeOperation="destination-atop",t.fillStyle=w,t.fillRect(p,g,s,i),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?e.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(a));const m=new Path2D;m.rect(l,u,s,i),e.clip(m),e.globalCompositeOperation="destination-in",e.drawImage(f,p,g,s,i,l,u,s,i),e.restore()}save(){this.inSMaskMode?(Oc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Oc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,s,i,r,o){this.ctx.transform(t,e,s,i,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s){const i=this.ctx,r=this.current;let o=r.x,a=r.y,l,u;const d=Se(i),h=d[0]===0&&d[3]===0||d[1]===0&&d[2]===0,f=h?s.slice(0):null;for(let p=0,g=0,m=t.length;p<m;p++)switch(t[p]|0){case Fn.rectangle:o=e[g++],a=e[g++];const w=e[g++],b=e[g++],S=o+w,C=a+b;i.moveTo(o,a),w===0||b===0?i.lineTo(S,C):(i.lineTo(S,a),i.lineTo(S,C),i.lineTo(o,C)),h||r.updateRectMinMax(d,[o,a,S,C]),i.closePath();break;case Fn.moveTo:o=e[g++],a=e[g++],i.moveTo(o,a),h||r.updatePathMinMax(d,o,a);break;case Fn.lineTo:o=e[g++],a=e[g++],i.lineTo(o,a),h||r.updatePathMinMax(d,o,a);break;case Fn.curveTo:l=o,u=a,o=e[g+4],a=e[g+5],i.bezierCurveTo(e[g],e[g+1],e[g+2],e[g+3],o,a),r.updateCurvePathMinMax(d,l,u,e[g],e[g+1],e[g+2],e[g+3],o,a,f),g+=6;break;case Fn.curveTo2:l=o,u=a,i.bezierCurveTo(o,a,e[g],e[g+1],e[g+2],e[g+3]),r.updateCurvePathMinMax(d,l,u,o,a,e[g],e[g+1],e[g+2],e[g+3],f),o=e[g+2],a=e[g+3],g+=4;break;case Fn.curveTo3:l=o,u=a,o=e[g+2],a=e[g+3],i.bezierCurveTo(e[g],e[g+1],o,a,o,a),r.updateCurvePathMinMax(d,l,u,e[g],e[g+1],o,a,o,a,f),g+=4;break;case Fn.closePath:i.closePath();break}h&&r.updateScalingPathMinMax(d,f),r.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,s=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&(s!=null&&s.getPattern)?(e.save(),e.strokeStyle=s.getPattern(e,this,oi(e),xs.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,s=this.current.fillColor,i=this.current.patternFill;let r=!1;i&&(e.save(),e.fillStyle=s.getPattern(e,this,oi(e),xs.FILL),r=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=L_}eoClip(){this.pendingClip=_0}beginText(){this.current.textMatrix=by,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}const s=new Path2D,i=e.getTransform().invertSelf();for(const{transform:r,x:o,y:a,fontSize:l,path:u}of t)s.addPath(u,new DOMMatrix(r).preMultiplySelf(i).translate(o,a).scale(l,-l));e.clip(s),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var d;const s=this.commonObjs.get(t),i=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=s.fontMatrix||Zp,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&$t("Invalid font matrix for font "+t),e<0?(e=-e,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;const r=s.loadedName||"sans-serif",o=((d=s.systemFontInfo)==null?void 0:d.css)||`"${r}", ${s.fallbackName}`;let a="normal";s.black?a="900":s.bold&&(a="bold");const l=s.italic?"italic":"normal";let u=e;e<y0?u=y0:e>b0&&(u=b0),this.current.fontSizeScale=e/u,this.ctx.font=`${l} ${a} ${u}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,s,i,r,o){this.current.textMatrix=[t,e,s,i,r,o],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,s,i,r){const o=this.ctx,a=this.current,l=a.font,u=a.textRenderingMode,d=a.fontSize/a.fontSizeScale,h=u&ps.FILL_STROKE_MASK,f=!!(u&ps.ADD_TO_PATH_FLAG),p=a.patternFill&&!l.missingFile,g=a.patternStroke&&!l.missingFile;let m;if((l.disableFontFace||f||p||g)&&(m=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||p||g){if(o.save(),o.translate(e,s),o.scale(d,-d),h===ps.FILL||h===ps.FILL_STROKE)if(i){const w=o.getTransform();o.setTransform(...i),o.fill(x(this,ii,_g).call(this,m,w,i))}else o.fill(m);if(h===ps.STROKE||h===ps.FILL_STROKE)if(r){const w=o.getTransform();o.setTransform(...r),o.stroke(x(this,ii,_g).call(this,m,w,r))}else o.lineWidth/=d,o.stroke(m);o.restore()}else(h===ps.FILL||h===ps.FILL_STROKE)&&o.fillText(t,e,s),(h===ps.STROKE||h===ps.FILL_STROKE)&&o.strokeText(t,e,s);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Se(o),x:e,y:s,fontSize:d,path:m})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){s=!0;break}return Yt(this,"isFontSubpixelAAEnabled",s)}showText(t){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(t);const i=e.fontSize;if(i===0)return;const r=this.ctx,o=e.fontSizeScale,a=e.charSpacing,l=e.wordSpacing,u=e.fontDirection,d=e.textHScale*u,h=t.length,f=s.vertical,p=f?1:-1,g=s.defaultVMetrics,m=i*e.fontMatrix[0],w=e.textRenderingMode===ps.FILL&&!s.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),u>0?r.scale(d,-1):r.scale(d,1);let b,S;if(e.patternFill){r.save();const M=e.fillColor.getPattern(r,this,oi(r),xs.FILL);b=Se(r),r.restore(),r.fillStyle=M}if(e.patternStroke){r.save();const M=e.strokeColor.getPattern(r,this,oi(r),xs.STROKE);S=Se(r),r.restore(),r.strokeStyle=M}let C=e.lineWidth;const T=e.textMatrixScale;if(T===0||C===0){const M=e.textRenderingMode&ps.FILL_STROKE_MASK;(M===ps.STROKE||M===ps.FILL_STROKE)&&(C=this.getSinglePixelWidth())}else C/=T;if(o!==1&&(r.scale(o,o),C/=o),r.lineWidth=C,s.isInvalidPDFjsFont){const M=[];let N=0;for(const I of t)M.push(I.unicode),N+=I.width;r.fillText(M.join(""),0,0),e.x+=N*m*d,r.restore(),this.compose();return}let _=0,R;for(R=0;R<h;++R){const M=t[R];if(typeof M=="number"){_+=p*M*i/1e3;continue}let N=!1;const I=(M.isSpace?l:0)+a,G=M.fontChar,X=M.accent;let z,ot,q=M.width;if(f){const U=M.vmetric||g,K=-(M.vmetric?U[1]:q*.5)*m,tt=U[2]*m;q=U?-U[0]:q,z=K/o,ot=(_+tt)/o}else z=_/o,ot=0;if(s.remeasure&&q>0){const U=r.measureText(G).width*1e3/i*o;if(q<U&&this.isFontSubpixelAAEnabled){const K=q/U;N=!0,r.save(),r.scale(K,1),z/=K}else q!==U&&(z+=(q-U)/2e3*i/o)}if(this.contentVisible&&(M.isInFont||s.missingFile)){if(w&&!X)r.fillText(G,z,ot);else if(this.paintChar(G,z,ot,b,S),X){const U=z+i*X.offset.x/o,K=ot-i*X.offset.y/o;this.paintChar(X.fontChar,U,K,b,S)}}const nt=f?q*m-I*u:q*m+I*u;_+=nt,N&&r.restore()}f?e.y-=_:e.x+=_*d,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,s=this.current,i=s.font,r=s.fontSize,o=s.fontDirection,a=i.vertical?1:-1,l=s.charSpacing,u=s.wordSpacing,d=s.textHScale*o,h=s.fontMatrix||Zp,f=t.length,p=s.textRenderingMode===ps.INVISIBLE;let g,m,w,b;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...s.textMatrix),e.translate(s.x,s.y),e.scale(d,o),g=0;g<f;++g){if(m=t[g],typeof m=="number"){b=a*m*r/1e3,this.ctx.translate(b,0),s.x+=b*d;continue}const S=(m.isSpace?u:0)+l,C=i.charProcOperatorList[m.operatorListId];if(!C){$t(`Type3 character "${m.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=m,this.save(),e.scale(r,r),e.transform(...h),this.executeOperatorList(C),this.restore()),w=Pt.applyTransform([m.width,0],h)[0]*r+S,e.translate(w,0),s.x+=w*d}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,s,i,r,o){this.ctx.rect(s,i,r-s,o-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const s=t[1],i=this.baseTransform||Se(this.ctx),r={createCanvasGraphics:o=>new Wv(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Sg(t,s,this.ctx,r,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,s){this.ctx.strokeStyle=this.current.strokeColor=Pt.makeHexColor(t,e,s),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,s){this.ctx.fillStyle=this.current.fillColor=Pt.makeHexColor(t,e,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=C_(this.getObject(t)),this.cachedPatterns.set(t,s)),e&&(s.matrix=e),s}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=this._getPattern(t);e.fillStyle=s.getPattern(e,this,oi(e),xs.SHADING);const i=oi(e);if(i){const{width:r,height:o}=e.canvas,[a,l,u,d]=Pt.getAxialAlignedBoundingBox([0,0,r,o],i);this.ctx.fillRect(a,l,u-a,d-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ye("Should not call beginInlineImage")}beginImageData(){ye("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Se(this.ctx),e)){const s=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],s,i),this.current.updateRectMinMax(Se(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||qf("TODO: Support non-isolated groups."),t.knockout&&$t("Knockout groups not supported.");const s=Se(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=Pt.getAxialAlignedBoundingBox(t.bbox,Se(e));const r=[0,0,e.canvas.width,e.canvas.height];i=Pt.intersect(i,r)||[0,0,0,0];const o=Math.floor(i[0]),a=Math.floor(i[1]),l=Math.max(Math.ceil(i[2])-o,1),u=Math.max(Math.ceil(i[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,u]);let d="groupAt"+this.groupLevel;t.smask&&(d+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(d,l,u),f=h.context;f.translate(-o,-a),f.transform(...s),t.smask?this.smaskStack.push({canvas:h.canvas,context:f,offsetX:o,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,a),e.save()),Oc(e,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=Se(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=Pt.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],i);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,s,i,r){if(x(this,ii,Eg).call(this),dh(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],a=e[3]-e[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=e[0],s[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=a;const[l,u]=Pt.singularValueDecompose2dScale(Se(this.ctx)),{viewportScale:d}=this,h=Math.ceil(o*this.outputScaleX*d),f=Math.ceil(a*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(h,f);const{canvas:p,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(t,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(l,0,0,-u,0,a*u),dh(this.ctx)}else dh(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],o,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new x0(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),x(this,ii,Cg).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const s=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=R_(t)),i.compiled)){i.compiled(s);return}const r=this._createMaskCanvas(t),o=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,r.offsetX,r.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s=0,i=0,r,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const l=Se(a);a.transform(e,s,i,r,0,0);const u=this._createMaskCanvas(t);a.setTransform(1,0,0,1,u.offsetX-l[4],u.offsetY-l[5]);for(let d=0,h=o.length;d<h;d+=2){const f=Pt.transform(l,[e,s,i,r,o[d],o[d+1]]),[p,g]=Pt.applyTransform([0,0],f);a.drawImage(u.canvas,p,g)}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,s=this.current.fillColor,i=this.current.patternFill;for(const r of t){const{data:o,width:a,height:l,transform:u}=r,d=this.cachedCanvases.getCanvas("maskCanvas",a,l),h=d.context;h.save();const f=this.getObject(o,r);E0(h,f),h.globalCompositeOperation="source-in",h.fillStyle=i?s.getPattern(h,this,oi(e),xs.FILL):s,h.fillRect(0,0,a,l),h.restore(),e.save(),e.transform(...u),e.scale(1,-1),uh(e,d.canvas,0,0,a,l,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){$t("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,s,i){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){$t("Dependent image isn't ready yet");return}const o=r.width,a=r.height,l=[];for(let u=0,d=i.length;u<d;u+=2)l.push({transform:[e,0,0,s,i[u],i[u+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:i}=t,r=this.cachedCanvases.getCanvas("inlineImage",s,i),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,s=t.height,i=this.ctx;if(this.save(),!ks){const{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none")}i.scale(1/e,-1/s);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const l=this.cachedCanvases.getCanvas("inlineImage",e,s).context;S0(l,t),r=this.applyTransferMapsToCanvas(l)}const o=this._scaleImage(r,oi(i));i.imageSmoothingEnabled=C0(Se(i),t.interpolate),uh(i,o.img,0,0,o.paintWidth,o.paintHeight,0,-s,e,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const r=t.width,o=t.height,l=this.cachedCanvases.getCanvas("inlineImage",r,o).context;S0(l,t),i=this.applyTransferMapsToCanvas(l)}for(const r of e)s.save(),s.transform(...r.transform),s.scale(1,-1),uh(s,i,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const s=this.ctx;this.pendingClip&&(e||(this.pendingClip===_0?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Se(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:i,d:r}=this.ctx.getTransform();let o,a;if(s===0&&i===0){const l=Math.abs(e),u=Math.abs(r);if(l===u)if(t===0)o=a=1/l;else{const d=l*t;o=a=d<1?1/d:1}else if(t===0)o=1/l,a=1/u;else{const d=l*t,h=u*t;o=d<1?1/d:1,a=h<1?1/h:1}}else{const l=Math.abs(e*r-s*i),u=Math.hypot(e,s),d=Math.hypot(i,r);if(t===0)o=d/l,a=u/l;else{const h=t*l;o=d>h?d/h:1,a=u>h?u/h:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:s}=this.current,[i,r]=this.getScaleForStroking();if(e.lineWidth=s||1,i===1&&r===1){e.stroke();return}const o=e.getLineDash();if(t&&e.save(),e.scale(i,r),o.length>0){const a=Math.max(i,r);e.setLineDash(o.map(l=>l/a)),e.lineDashOffset/=a}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};ii=new WeakSet,Eg=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Cg=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},_g=function(t,e,s){const i=new Path2D;return i.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(e)),i};let vl=Wv;for(const n in Fn)vl.prototype[n]!==void 0&&(vl.prototype[Fn[n]]=vl.prototype[n]);var Ju,Zu;class vr{static get workerPort(){return c(this,Ju)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");y(this,Ju,t)}static get workerSrc(){return c(this,Zu)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");y(this,Zu,t)}}Ju=new WeakMap,Zu=new WeakMap,A(vr,Ju,null),A(vr,Zu,"");var ia,Qu;class O_{constructor({parsedData:t,rawData:e}){A(this,ia);A(this,Qu);y(this,ia,t),y(this,Qu,e)}getRaw(){return c(this,Qu)}get(t){return c(this,ia).get(t)??null}getAll(){return Ov(c(this,ia))}has(t){return c(this,ia).has(t)}}ia=new WeakMap,Qu=new WeakMap;const ol=Symbol("INTERNAL");var qu,td,ed,Dl;class D_{constructor(t,{name:e,intent:s,usage:i,rbGroups:r}){A(this,qu,!1);A(this,td,!1);A(this,ed,!1);A(this,Dl,!0);y(this,qu,!!(t&un.DISPLAY)),y(this,td,!!(t&un.PRINT)),this.name=e,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(c(this,ed))return c(this,Dl);if(!c(this,Dl))return!1;const{print:t,view:e}=this.usage;return c(this,qu)?(e==null?void 0:e.viewState)!=="OFF":c(this,td)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,s=!1){t!==ol&&ye("Internal method `_setVisible` called."),y(this,ed,s),y(this,Dl,e)}}qu=new WeakMap,td=new WeakMap,ed=new WeakMap,Dl=new WeakMap;var Xr,le,Nl,Fl,sd,kg;class N_{constructor(t,e=un.DISPLAY){A(this,sd);A(this,Xr,null);A(this,le,new Map);A(this,Nl,null);A(this,Fl,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,y(this,Fl,t.order);for(const s of t.groups)c(this,le).set(s.id,new D_(e,s));if(t.baseState==="OFF")for(const s of c(this,le).values())s._setVisible(ol,!1);for(const s of t.on)c(this,le).get(s)._setVisible(ol,!0);for(const s of t.off)c(this,le).get(s)._setVisible(ol,!1);y(this,Nl,this.getHash())}}isVisible(t){if(c(this,le).size===0)return!0;if(!t)return qf("Optional content group not defined."),!0;if(t.type==="OCG")return c(this,le).has(t.id)?c(this,le).get(t.id).visible:($t(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return x(this,sd,kg).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!c(this,le).has(e))return $t(`Optional content group not found: ${e}`),!0;if(c(this,le).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!c(this,le).has(e))return $t(`Optional content group not found: ${e}`),!0;if(!c(this,le).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!c(this,le).has(e))return $t(`Optional content group not found: ${e}`),!0;if(!c(this,le).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!c(this,le).has(e))return $t(`Optional content group not found: ${e}`),!0;if(c(this,le).get(e).visible)return!1}return!0}return $t(`Unknown optional content policy ${t.policy}.`),!0}return $t(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,s=!0){var r;const i=c(this,le).get(t);if(!i){$t(`Optional content group not found: ${t}`);return}if(s&&e&&i.rbGroups.length)for(const o of i.rbGroups)for(const a of o)a!==t&&((r=c(this,le).get(a))==null||r._setVisible(ol,!1,!0));i._setVisible(ol,!!e,!0),y(this,Xr,null)}setOCGState({state:t,preserveRB:e}){let s;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=c(this,le).get(i);if(r)switch(s){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!r.visible,e);break}}y(this,Xr,null)}get hasInitialVisibility(){return c(this,Nl)===null||this.getHash()===c(this,Nl)}getOrder(){return c(this,le).size?c(this,Fl)?c(this,Fl).slice():[...c(this,le).keys()]:null}getGroups(){return c(this,le).size>0?Ov(c(this,le)):null}getGroup(t){return c(this,le).get(t)||null}getHash(){if(c(this,Xr)!==null)return c(this,Xr);const t=new Jy;for(const[e,s]of c(this,le))t.update(`${e}:${s.visible}`);return y(this,Xr,t.hexdigest())}}Xr=new WeakMap,le=new WeakMap,Nl=new WeakMap,Fl=new WeakMap,sd=new WeakSet,kg=function(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let i=1;i<e;i++){const r=t[i];let o;if(Array.isArray(r))o=x(this,sd,kg).call(this,r);else if(c(this,le).has(r))o=c(this,le).get(r).visible;else return $t(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class F_{constructor(t,{disableRange:e=!1,disableStream:s=!1}){Be(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:o,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),t.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(s),!0)});Be(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,s,i,r;t.total===void 0?(s=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||s.call(e,{loaded:t.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Be(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new $_(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new B_(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeReaders.slice(0))s.cancel(t);this._pdfDataRangeTransport.abort()}}class $_{constructor(t,e,s=!1,i=null){this._stream=t,this._done=s||!1,this._filename=Fv(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class B_{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function j_(n){let t=!0,e=s("filename\\*","i").exec(n);if(e){e=e[1];let d=a(e);return d=unescape(d),d=l(d),d=u(d),r(d)}if(e=o(n),e){const d=u(e);return r(d)}if(e=s("filename","i").exec(n),e){e=e[1];let d=a(e);return d=u(d),r(d)}function s(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function i(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const f=new TextDecoder(d,{fatal:!0}),p=tp(h);h=f.decode(p),t=!1}catch{}}return h}function r(d){return t&&/[\x80-\xff]/.test(d)&&(d=i("utf-8",d),t&&(d=i("iso-8859-1",d))),d}function o(d){const h=[];let f;const p=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(d))!==null;){let[,m,w,b]=f;if(m=parseInt(m,10),m in h){if(m===0)break;continue}h[m]=[w,b]}const g=[];for(let m=0;m<h.length&&m in h;++m){let[w,b]=h[m];b=a(b),w&&(b=unescape(b),m===0&&(b=l(b))),g.push(b)}return g.join("")}function a(d){if(d.startsWith('"')){const h=d.slice(1).split('\\"');for(let f=0;f<h.length;++f){const p=h[f].indexOf('"');p!==-1&&(h[f]=h[f].slice(0,p),h.length=f+1),h[f]=h[f].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function l(d){const h=d.indexOf("'");if(h===-1)return d;const f=d.slice(0,h),g=d.slice(h+1).replace(/^[^']*'/,"");return i(f,g)}function u(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,f,p,g){if(p==="q"||p==="Q")return g=g.replaceAll("_"," "),g=g.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,w){return String.fromCharCode(parseInt(w,16))}),i(f,g);try{g=atob(g)}catch{}return i(f,g)})}return""}function ub(n,t){const e=new Headers;if(!n||!t||typeof t!="object")return e;for(const s in t){const i=t[s];i!==void 0&&e.append(s,i)}return e}function np(n){try{return new URL(n).origin}catch{}return null}function db({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*e)||s||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function hb(n){const t=n.get("Content-Disposition");if(t){let e=j_(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Fv(e))return e}return null}function ip(n,t){return n===404||n===0&&t.startsWith("file:")?new bu('Missing PDF "'+t+'".'):new of(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n)}function fb(n){return n===200||n===206}function pb(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function gb(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:($t(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class k0{constructor(t){kt(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=ub(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Be(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new H_(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new U_(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class H_{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const s=new Headers(t.headers),i=e.url;fetch(i,pb(s,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=np(r.url),!fb(r.status))throw ip(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:a,suggestedLength:l}=db({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=hb(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new mo("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:gb(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class U_{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${s-1}`);const o=i.url;fetch(o,pb(r,this._withCredentials,this._abortController)).then(a=>{const l=np(a.url);if(l!==t._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${t._responseOrigin}".`);if(!fb(a.status))throw ip(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:gb(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const Rp=200,Ip=206;function V_(n){const t=n.response;return typeof t!="string"?t:tp(t).buffer}class G_{constructor({url:t,httpHeaders:e,withCredentials:s}){kt(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=ub(this.isHttp,e),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=Ip):i.expectedStatus=Rp,e.responseType="arraybuffer",Be(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){var i;const s=this.pendingRequests[t];s&&((i=s.onProgress)==null||i.call(s,e))}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){s.onError(i.status);return}const r=i.status||Rp;if(!(r===Rp&&s.expectedStatus===Ip)&&r!==s.expectedStatus){s.onError(i.status);return}const a=V_(i);if(r===Ip){const l=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u?s.onDone({begin:parseInt(u[1],10),chunk:a}):($t('Missing or invalid "Content-Range" header.'),s.onError(0))}else a?s.onDone({begin:0,chunk:a}):s.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class z_{constructor(t){this._source=t,this._manager=new G_(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Be(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new W_(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new K_(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class W_{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=np(e.responseURL);const s=e.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...u]=a.split(": ");return[l,u.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=db({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=hb(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=ip(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class K_{constructor(t,e,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=np((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=ip(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const X_=/^[a-z][a-z0-9\-+.]+:/i;function Y_(n){if(X_.test(n))return new URL(n);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}class J_{constructor(t){this.source=t,this.url=Y_(t.url),Be(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Be(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Z_(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new Q_(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class Z_{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new bu(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new mo("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Q_{constructor(t,e,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const q_=1e5,Vs=30,tk=.8;var M0,Yr,Ks,nd,id,ra,Zi,rd,od,oa,$l,Bl,Jr,jl,ad,Hl,aa,ld,cd,la,ca,ud,Zr,Ul,Er,vb,mb,Tg,vn,Rh,Pg,yb,bb;const We=class We{constructor({textContentSource:t,container:e,viewport:s}){A(this,Er);A(this,Yr,Promise.withResolvers());A(this,Ks,null);A(this,nd,!1);A(this,id,!!((M0=globalThis.FontInspector)!=null&&M0.enabled));A(this,ra,null);A(this,Zi,null);A(this,rd,0);A(this,od,0);A(this,oa,null);A(this,$l,null);A(this,Bl,0);A(this,Jr,0);A(this,jl,Object.create(null));A(this,ad,[]);A(this,Hl,null);A(this,aa,[]);A(this,ld,new WeakMap);A(this,cd,null);var l;if(t instanceof ReadableStream)y(this,Hl,t);else if(typeof t=="object")y(this,Hl,new ReadableStream({start(u){u.enqueue(t),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');y(this,Ks,y(this,$l,e)),y(this,Jr,s.scale*(globalThis.devicePixelRatio||1)),y(this,Bl,s.rotation),y(this,Zi,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:o,pageY:a}=s.rawDims;y(this,cd,[1,0,0,-1,-o,a+r]),y(this,od,i),y(this,rd,r),x(l=We,vn,yb).call(l),Va(e,s),c(this,Yr).promise.finally(()=>{c(We,Ul).delete(this),y(this,Zi,null),y(this,jl,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=js.platform;return Yt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{c(this,oa).read().then(({value:e,done:s})=>{if(s){c(this,Yr).resolve();return}c(this,ra)??y(this,ra,e.lang),Object.assign(c(this,jl),e.styles),x(this,Er,vb).call(this,e.items),t()},c(this,Yr).reject)};return y(this,oa,c(this,Hl).getReader()),c(We,Ul).add(this),t(),c(this,Yr).promise}update({viewport:t,onBefore:e=null}){var r;const s=t.scale*(globalThis.devicePixelRatio||1),i=t.rotation;if(i!==c(this,Bl)&&(e==null||e(),y(this,Bl,i),Va(c(this,$l),{rotation:i})),s!==c(this,Jr)){e==null||e(),y(this,Jr,s);const o={div:null,properties:null,ctx:x(r=We,vn,Rh).call(r,c(this,ra))};for(const a of c(this,aa))o.properties=c(this,ld).get(a),o.div=a,x(this,Er,Tg).call(this,o)}}cancel(){var e;const t=new mo("TextLayer task cancelled.");(e=c(this,oa))==null||e.cancel(t).catch(()=>{}),y(this,oa,null),c(this,Yr).reject(t)}get textDivs(){return c(this,aa)}get textContentItemsStr(){return c(this,ad)}static cleanup(){if(!(c(this,Ul).size>0)){c(this,la).clear();for(const{canvas:t}of c(this,ca).values())t.remove();c(this,ca).clear()}}};Yr=new WeakMap,Ks=new WeakMap,nd=new WeakMap,id=new WeakMap,ra=new WeakMap,Zi=new WeakMap,rd=new WeakMap,od=new WeakMap,oa=new WeakMap,$l=new WeakMap,Bl=new WeakMap,Jr=new WeakMap,jl=new WeakMap,ad=new WeakMap,Hl=new WeakMap,aa=new WeakMap,ld=new WeakMap,cd=new WeakMap,la=new WeakMap,ca=new WeakMap,ud=new WeakMap,Zr=new WeakMap,Ul=new WeakMap,Er=new WeakSet,vb=function(t){var i,r;if(c(this,nd))return;(r=c(this,Zi)).ctx??(r.ctx=x(i=We,vn,Rh).call(i,c(this,ra)));const e=c(this,aa),s=c(this,ad);for(const o of t){if(e.length>q_){$t("Ignoring additional textDivs for performance reasons."),y(this,nd,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=c(this,Ks);y(this,Ks,document.createElement("span")),c(this,Ks).classList.add("markedContent"),o.id!==null&&c(this,Ks).setAttribute("id",`${o.id}`),a.append(c(this,Ks))}else o.type==="endMarkedContent"&&y(this,Ks,c(this,Ks).parentNode);continue}s.push(o.str),x(this,Er,mb).call(this,o)}},mb=function(t){var m;const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};c(this,aa).push(e);const i=Pt.transform(c(this,cd),t.transform);let r=Math.atan2(i[1],i[0]);const o=c(this,jl)[t.fontName];o.vertical&&(r+=Math.PI/2);let a=c(this,id)&&o.fontSubstitution||o.fontFamily;a=We.fontFamilyMap.get(a)||a;const l=Math.hypot(i[2],i[3]),u=l*x(m=We,vn,bb).call(m,a,c(this,ra));let d,h;r===0?(d=i[4],h=i[5]-u):(d=i[4]+u*Math.sin(r),h=i[5]-u*Math.cos(r));const f="calc(var(--scale-factor)*",p=e.style;c(this,Ks)===c(this,$l)?(p.left=`${(100*d/c(this,od)).toFixed(2)}%`,p.top=`${(100*h/c(this,rd)).toFixed(2)}%`):(p.left=`${f}${d.toFixed(2)}px)`,p.top=`${f}${h.toFixed(2)}px)`),p.fontSize=`${f}${(c(We,Zr)*l).toFixed(2)}px)`,p.fontFamily=a,s.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,c(this,id)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(s.angle=r*(180/Math.PI));let g=!1;if(t.str.length>1)g=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),b=Math.abs(t.transform[3]);w!==b&&Math.max(w,b)/Math.min(w,b)>1.5&&(g=!0)}if(g&&(s.canvasWidth=o.vertical?t.height:t.width),c(this,ld).set(e,s),c(this,Zi).div=e,c(this,Zi).properties=s,x(this,Er,Tg).call(this,c(this,Zi)),s.hasText&&c(this,Ks).append(e),s.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),c(this,Ks).append(w)}},Tg=function(t){var a;const{div:e,properties:s,ctx:i}=t,{style:r}=e;let o="";if(c(We,Zr)>1&&(o=`scale(${1/c(We,Zr)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:l}=r,{canvasWidth:u,fontSize:d}=s;x(a=We,vn,Pg).call(a,i,d*c(this,Jr),l);const{width:h}=i.measureText(e.textContent);h>0&&(o=`scaleX(${u*c(this,Jr)/h}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(r.transform=o)},vn=new WeakSet,Rh=function(t=null){let e=c(this,ca).get(t||(t=""));if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,ca).set(t,e),c(this,ud).set(e,{size:0,family:""})}return e},Pg=function(t,e,s){const i=c(this,ud).get(t);e===i.size&&s===i.family||(t.font=`${e}px ${s}`,i.size=e,i.family=s)},yb=function(){if(c(this,Zr)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),y(this,Zr,t.getBoundingClientRect().height),t.remove()},bb=function(t,e){const s=c(this,la).get(t);if(s)return s;const i=x(this,vn,Rh).call(this,e);i.canvas.width=i.canvas.height=Vs,x(this,vn,Pg).call(this,i,Vs,t);const r=i.measureText("");let o=r.fontBoundingBoxAscent,a=Math.abs(r.fontBoundingBoxDescent);if(o){const d=o/(o+a);return c(this,la).set(t,d),i.canvas.width=i.canvas.height=0,d}i.strokeStyle="red",i.clearRect(0,0,Vs,Vs),i.strokeText("g",0,0);let l=i.getImageData(0,0,Vs,Vs).data;a=0;for(let d=l.length-1-3;d>=0;d-=4)if(l[d]>0){a=Math.ceil(d/4/Vs);break}i.clearRect(0,0,Vs,Vs),i.strokeText("A",0,Vs),l=i.getImageData(0,0,Vs,Vs).data,o=0;for(let d=0,h=l.length;d<h;d+=4)if(l[d]>0){o=Vs-Math.floor(d/4/Vs);break}i.canvas.width=i.canvas.height=0;const u=o?o/(o+a):tk;return c(this,la).set(t,u),u},A(We,vn),A(We,la,new Map),A(We,ca,new Map),A(We,ud,new WeakMap),A(We,Zr,null),A(We,Ul,new Set);let wu=We;class Au{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function i(r){var l;if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(Au.shouldBuildText(a))(l=r==null?void 0:r.attributes)!=null&&l.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const u of r.children)i(u)}return i(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const ek=65536,sk=100,nk=5e3,ik=ks?y_:g_,rk=ks?b_:ib,ok=ks?m_:v_,ak=ks?w_:lb;function lk(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new Rg,{docId:e}=t,s=n.url?ck(n.url):null,i=n.data?uk(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof wb?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:ek;let d=n.worker instanceof ml?n.worker:null;const h=n.verbosity,f=typeof n.docBaseUrl=="string"&&!sp(n.docBaseUrl)?n.docBaseUrl:null,p=typeof n.cMapUrl=="string"?n.cMapUrl:null,g=n.cMapPacked!==!1,m=n.CMapReaderFactory||rk,w=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,b=n.StandardFontDataFactory||ak,S=n.stopAtErrors!==!0,C=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,T=n.isEvalSupported!==!1,_=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!ks,R=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!ks&&(js.platform.isFirefox||!globalThis.chrome),M=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,N=typeof n.disableFontFace=="boolean"?n.disableFontFace:ks,I=n.fontExtraProperties===!0,G=n.enableXfa===!0,X=n.ownerDocument||globalThis.document,z=n.disableRange===!0,ot=n.disableStream===!0,q=n.disableAutoFetch===!0,nt=n.pdfBug===!0,U=n.CanvasFactory||ik,K=n.FilterFactory||ok,tt=n.enableHWA===!0,Ct=l?l.length:n.length??NaN,vt=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!ks&&!N,Mt=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:m===ib&&b===lb&&p&&w&&$c(p,document.baseURI)&&$c(w,document.baseURI),Rt=null;KC(h);const Vt={canvasFactory:new U({ownerDocument:X,enableHWA:tt}),filterFactory:new K({docId:e,ownerDocument:X}),cMapReaderFactory:Mt?null:new m({baseUrl:p,isCompressed:g}),standardFontDataFactory:Mt?null:new b({baseUrl:w})};if(!d){const lt={verbosity:h,port:vr.workerPort};d=lt.port?ml.fromPort(lt):new ml(lt),t._worker=d}const It={docId:e,apiVersion:"4.10.38",data:i,password:a,disableAutoFetch:q,rangeChunkSize:u,length:Ct,docBaseUrl:f,enableXfa:G,evaluatorOptions:{maxImageSize:C,disableFontFace:N,ignoreErrors:S,isEvalSupported:T,isOffscreenCanvasSupported:_,isImageDecoderSupported:R,canvasMaxAreaInBytes:M,fontExtraProperties:I,useSystemFonts:vt,cMapUrl:Mt?p:null,standardFontDataUrl:Mt?w:null}},ie={disableFontFace:N,fontExtraProperties:I,ownerDocument:X,pdfBug:nt,styleElement:Rt,loadingParams:{disableAutoFetch:q,enableXfa:G}};return d.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const lt=d.messageHandler.sendWithPromise("GetDocRequest",It,i?[i.buffer]:null);let L;if(l)L=new F_(l,{disableRange:z,disableStream:ot});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");let W;if(ks)if($c(s)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");W=k0}else W=J_;else W=$c(s)?k0:z_;L=new W({url:s,length:Ct,httpHeaders:r,withCredentials:o,rangeChunkSize:u,disableRange:z,disableStream:ot})}return lt.then(W=>{if(t.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Q=new Uc(e,W,d.port),dt=new pk(Q,t,L,ie,Vt);t._transport=dt,Q.send("Ready",null)})}).catch(t._capability.reject),t}function ck(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(ks&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function uk(n){if(ks&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return tp(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function T0(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var xf;const Sf=class Sf{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Ts(Sf,xf)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,s,i;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}};xf=new WeakMap,A(Sf,xf,0);let Rg=Sf;class wb{constructor(t,e,s=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const s of this._rangeListeners)s(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){ye("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class dk{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Yt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Qr,Qi,kn,al,Ih;class hk{constructor(t,e,s,i=!1){A(this,kn);A(this,Qr,null);A(this,Qi,!1);this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=i?new p0:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new Ab,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new qd({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Yt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:s="display",annotationMode:i=Dr.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:u=null,printAnnotationStorage:d=null,isEditing:h=!1}){var T,_;(T=this._stats)==null||T.time("Overall");const f=this._transport.getRenderingIntent(s,i,d,h),{renderingIntent:p,cacheKey:g}=f;y(this,Qi,!1),x(this,kn,Ih).call(this),a||(a=this._transport.getOptionalContentConfig(p));let m=this._intentStates.get(g);m||(m=Object.create(null),this._intentStates.set(g,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const w=!!(p&un.PRINT);m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(_=this._stats)==null||_.time("Page Request"),this._pumpOperatorList(f));const b=R=>{var M;m.renderTasks.delete(S),(this._maybeCleanupAfterRender||w)&&y(this,Qi,!0),x(this,kn,al).call(this,!w),R?(S.capability.reject(R),this._abortOperatorList({intentState:m,reason:R instanceof Error?R:new Error(R)})):S.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(M=globalThis.Stats)!=null&&M.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},S=new Mg({callback:b,params:{canvasContext:t,viewport:e,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:u});(m.renderTasks||(m.renderTasks=new Set)).add(S);const C=S.task;return Promise.all([m.displayReadyCapability.promise,a]).then(([R,M])=>{var N;if(this.destroyed){b();return}if((N=this._stats)==null||N.time("Rendering"),!(M.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");S.initializeGraphics({transparency:R,optionalContentConfig:M}),S.operatorListChanged()}).catch(b),C}getOperatorList({intent:t="display",annotationMode:e=Dr.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){var u;function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(t,e,s,i,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Au.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,i){function r(){o.read().then(function({value:l,done:u}){if(u){s(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),r()},i)}const o=e.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),y(this,Qi,!1),x(this,kn,Ih).call(this),Promise.all(t)}cleanup(t=!1){y(this,Qi,!0);const e=x(this,kn,al).call(this,!1);return t&&e&&this._stats&&(this._stats=new p0),e}_startRenderPage(t,e){var i,r;const s=this._intentStates.get(e);s&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let s=0,i=t.length;s<i;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&x(this,kn,al).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:o}=s,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:i},o).getReader(),u=this._intentStates.get(e);u.streamReader=l;const d=()=>{l.read().then(({value:h,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,u),d())},h=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();x(this,kn,al).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(h);else if(u.opListReadCapability)u.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof Nv){let i=sk;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new mo(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Qr=new WeakMap,Qi=new WeakMap,kn=new WeakSet,al=function(t=!1){if(x(this,kn,Ih).call(this),!c(this,Qi)||this.destroyed)return!1;if(t)return y(this,Qr,setTimeout(()=>{y(this,Qr,null),x(this,kn,al).call(this,!1)},nk)),!1;for(const{renderTasks:e,operatorList:s}of this._intentStates.values())if(e.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),y(this,Qi,!1),!0},Ih=function(){c(this,Qr)&&(clearTimeout(c(this,Qr)),y(this,Qr,null))};var qi,Ef;class fk{constructor(){A(this,qi,new Map);A(this,Ef,Promise.resolve())}postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};c(this,Ef).then(()=>{for(const[i]of c(this,qi))i.call(this,s)})}addEventListener(t,e,s=null){let i=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){$t("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);i=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}c(this,qi).set(e,i)}removeEventListener(t,e){const s=c(this,qi).get(e);s==null||s(),c(this,qi).delete(e)}terminate(){for(const[,t]of c(this,qi))t==null||t();c(this,qi).clear()}}qi=new WeakMap,Ef=new WeakMap;var Cf,ua,da,Vl,Mh,Gl,Lh;const xe=class xe{constructor({name:t=null,port:e=null,verbosity:s=XC()}={}){A(this,Vl);var i;if(this.name=t,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((i=c(xe,da))!=null&&i.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(c(xe,da)||y(xe,da,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Uc("main","worker",t),this._messageHandler.on("ready",function(){}),x(this,Vl,Mh).call(this)}_initialize(){if(c(xe,ua)||c(xe,Gl,Lh)){this._setupFakeWorker();return}let{workerSrc:t}=xe;try{xe._isSameOrigin(window.location.href,t)||(t=xe._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new Uc("main","worker",e),i=()=>{r.abort(),s.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||i()},{signal:r.signal}),s.on("test",a=>{if(r.abort(),this.destroyed||!a){i();return}this._messageHandler=s,this._port=e,this._webWorker=e,x(this,Vl,Mh).call(this)}),s.on("ready",a=>{if(r.abort(),this.destroyed){i();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;s.send("test",a,[a.buffer])};o();return}catch{qf("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){c(xe,ua)||($t("Setting up fake worker."),y(xe,ua,!0)),xe._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new fk;this._port=e;const s=`fake${Ts(xe,Cf)._++}`,i=new Uc(s+"_worker",s,e);t.setup(i,e),this._messageHandler=new Uc(s,s+"_worker",e),x(this,Vl,Mh).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,s;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=c(xe,da))==null||e.delete(this._port),this._port=null,(s=this._messageHandler)==null||s.destroy(),this._messageHandler=null}static fromPort(t){var s;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(s=c(this,da))==null?void 0:s.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new xe(t)}static get workerSrc(){if(vr.workerSrc)return vr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Yt(this,"_setupFakeWorkerGlobal",(async()=>c(this,Gl,Lh)?c(this,Gl,Lh):(await import(this.workerSrc)).WorkerMessageHandler)())}};Cf=new WeakMap,ua=new WeakMap,da=new WeakMap,Vl=new WeakSet,Mh=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Gl=new WeakSet,Lh=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},A(xe,Gl),A(xe,Cf,0),A(xe,ua,!1),A(xe,da),ks&&(y(xe,ua,!0),vr.workerSrc||(vr.workerSrc="./pdf.worker.mjs")),xe._isSameOrigin=(t,e)=>{let s;try{if(s=new URL(t),!s.origin||s.origin==="null")return!1}catch{return!1}const i=new URL(e,s);return s.origin===i.origin},xe._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let ml=xe;var tr,wi,zl,Wl,er,ha,Kc;class pk{constructor(t,e,s,i,r){A(this,ha);A(this,tr,new Map);A(this,wi,new Map);A(this,zl,new Map);A(this,Wl,new Map);A(this,er,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Ab,this.fontLoader=new f_({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Yt(this,"annotationStorage",new jv)}getRenderingIntent(t,e=Dr.ENABLE,s=null,i=!1,r=!1){let o=un.DISPLAY,a=bg;switch(t){case"any":o=un.ANY;break;case"display":break;case"print":o=un.PRINT;break;default:$t(`getRenderingIntent - invalid intent: ${t}`)}const l=o&un.PRINT&&s instanceof Qy?s:this.annotationStorage;switch(e){case Dr.DISABLE:o+=un.ANNOTATIONS_DISABLE;break;case Dr.ENABLE:break;case Dr.ENABLE_FORMS:o+=un.ANNOTATIONS_FORMS;break;case Dr.ENABLE_STORAGE:o+=un.ANNOTATIONS_STORAGE,a=l.serializable;break;default:$t(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(o+=un.IS_EDITING),r&&(o+=un.OPLIST);const{ids:u,hash:d}=l.modifiedIds,h=[o,a.hash,d];return{renderingIntent:o,cacheKey:h.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=c(this,er))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of c(this,wi).values())t.push(i._destroy());c(this,wi).clear(),c(this,zl).clear(),c(this,Wl).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var i,r;this.commonObjs.clear(),this.fontLoader.clear(),c(this,tr).clear(),this.filterFactory.destroy(),wu.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new mo("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,i)=>{Be(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){i.close();return}Be(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async s=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:o}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((a=e.onProgress)==null||a.call(e,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=e.onProgress)==null||u.call(e,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(s,i)=>{Be(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){i.close();return}Be(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{r.cancel(o),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new dk(s,this))}),t.on("DocException",s=>{e._capability.reject(Gs(s))}),t.on("PasswordRequest",s=>{y(this,er,Promise.withResolvers());try{if(!e.onPassword)throw Gs(s);const i=r=>{r instanceof Error?c(this,er).reject(r):c(this,er).resolve({password:r})};e.onPassword(i,s.code)}catch(i){c(this,er).reject(i)}return c(this,er).promise}),t.on("DataLoaded",s=>{var i;(i=e.onProgress)==null||i.call(e,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;c(this,wi).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,i,r])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":const{disableFontFace:a,fontExtraProperties:l,pdfBug:u}=this._params;if("error"in r){const p=r.error;$t(`Error during font loading: ${p}`),this.commonObjs.resolve(s,p);break}const d=u&&((o=globalThis.FontInspector)!=null&&o.enabled)?(p,g)=>globalThis.FontInspector.fontAdded(p,g):null,h=new p_(r,{disableFontFace:a,fontExtraProperties:l,inspectFont:d});this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!l&&h.data&&(h.data=null),this.commonObjs.resolve(s,h)});break;case"CopyLocalImage":const{imageRef:f}=r;Be(f,"The imageRef must be defined.");for(const p of c(this,wi).values())for(const[,g]of p.objs)if((g==null?void 0:g.ref)===f)return g.dataLen?(this.commonObjs.resolve(s,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([s,i,r,o])=>{var l;if(this.destroyed)return;const a=c(this,wi).get(i);if(!a.objs.has(s)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(r){case"Image":a.objs.resolve(s,o),(o==null?void 0:o.dataLen)>VC&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",s=>{var i;this.destroyed||(i=e.onProgress)==null||i.call(e,{loaded:s.loaded,total:s.total})}),t.on("FetchBuiltInCMap",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(s)}),t.on("FetchStandardFontData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&$t("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((s=this._fullReader)==null?void 0:s.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=c(this,zl).get(e);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&c(this,Wl).set(r.refStr,t);const o=new hk(e,r,this,this._params.pdfBug);return c(this,wi).set(e,o),o});return c(this,zl).set(e,i),i}getPageIndex(t){return T0(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return x(this,ha,Kc).call(this,"GetFieldObjects")}hasJSActions(){return x(this,ha,Kc).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return x(this,ha,Kc).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return x(this,ha,Kc).call(this,"GetOptionalContentConfig").then(e=>new N_(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=c(this,tr).get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(i=>{var r,o;return{info:i[0],metadata:i[1]?new O_(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return c(this,tr).set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of c(this,wi).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),c(this,tr).clear(),this.filterFactory.destroy(!0),wu.cleanup()}}cachedPageNumber(t){if(!T0(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return c(this,Wl).get(e)??null}}tr=new WeakMap,wi=new WeakMap,zl=new WeakMap,Wl=new WeakMap,er=new WeakMap,ha=new WeakSet,Kc=function(t,e=null){const s=c(this,tr).get(t);if(s)return s;const i=this.messageHandler.sendWithPromise(t,e);return c(this,tr).set(t,i),i};const Dc=Symbol("INITIAL_DATA");var tn,dd,Ig;class Ab{constructor(){A(this,dd);A(this,tn,Object.create(null))}get(t,e=null){if(e){const i=x(this,dd,Ig).call(this,t);return i.promise.then(()=>e(i.data)),null}const s=c(this,tn)[t];if(!s||s.data===Dc)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=c(this,tn)[t];return!!e&&e.data!==Dc}delete(t){const e=c(this,tn)[t];return!e||e.data===Dc?!1:(delete c(this,tn)[t],!0)}resolve(t,e=null){const s=x(this,dd,Ig).call(this,t);s.data=e,s.resolve()}clear(){var t;for(const e in c(this,tn)){const{data:s}=c(this,tn)[e];(t=s==null?void 0:s.bitmap)==null||t.close()}y(this,tn,Object.create(null))}*[Symbol.iterator](){for(const t in c(this,tn)){const{data:e}=c(this,tn)[t];e!==Dc&&(yield[t,e])}}}tn=new WeakMap,dd=new WeakSet,Ig=function(t){var e;return(e=c(this,tn))[t]||(e[t]={...Promise.withResolvers(),data:Dc})};var qr;class gk{constructor(t){A(this,qr,null);y(this,qr,t),this.onContinue=null}get promise(){return c(this,qr).capability.promise}cancel(t=0){c(this,qr).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=c(this,qr).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=c(this,qr);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}qr=new WeakMap;var to,fa;const Lo=class Lo{constructor({callback:t,params:e,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:f=null}){A(this,to,null);this.callback=t,this.params=e,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new gk(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var a,l;if(this.cancelled)return;if(this._canvas){if(c(Lo,fa).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(Lo,fa).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:i,transform:r,background:o}=this.params;this.gfx=new vl(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(t=null,e=0){var s;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),c(this,to)&&(window.cancelAnimationFrame(c(this,to)),y(this,to,null)),c(Lo,fa).delete(this._canvas),this.callback(t||new Nv(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?y(this,to,window.requestAnimationFrame(()=>{y(this,to,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(Lo,fa).delete(this._canvas),this.callback())))}};to=new WeakMap,fa=new WeakMap,A(Lo,fa,new WeakSet);let Mg=Lo;const vk="4.10.38",mk="f9bea397f";Qt(670);function P0(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Nc(n){return Math.max(0,Math.min(255,255*n))}class R0{static CMYK_G([t,e,s,i]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Nc(t),[t,t,t]}static G_HTML([t]){const e=P0(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(Nc)}static RGB_HTML(t){return`#${t.map(P0).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,s+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,s,i]){return[Nc(1-Math.min(1,t+i)),Nc(1-Math.min(1,s+i)),Nc(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const i=1-t,r=1-e,o=1-s,a=Math.min(i,r,o);return["CMYK",i,r,o,a]}}class yk{create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){ye("Abstract method `_createSVG` called.")}}class Uv extends yk{_createSVG(t){return document.createElementNS(Di,t)}}class xb{static setupStorage(t,e,s,i,r){const o=i.getValue(e,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",a=>{i.setValue(e,{value:a.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?t.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",a=>{i.setValue(e,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",a=>{i.setValue(e,{value:a.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const a of s.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{const l=a.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:i,linkService:r}){const{attributes:o}=e,a=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[l,u]of Object.entries(o))if(u!=null)switch(l){case"class":u.length&&t.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!a||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,u)}a&&r.addLinkAttributes(t,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(t,o.dataId,e,s)}static render(t){var h,f;const e=t.annotationStorage,s=t.linkService,i=t.xfaHtml,r=t.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:r,linkService:s});const a=r!=="richText",l=t.div;if(l.append(o),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=p}a&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);o.append(p),a&&Au.shouldBuildText(i.name)&&u.push(p)}return{textDivs:u}}const d=[[i,-1,o]];for(;d.length>0;){const[p,g,m]=d.at(-1);if(g+1===p.children.length){d.pop();continue}const w=p.children[++d.at(-1)[1]];if(w===null)continue;const{name:b}=w;if(b==="#text"){const C=document.createTextNode(w.value);u.push(C),m.append(C);continue}const S=(h=w==null?void 0:w.attributes)!=null&&h.xmlns?document.createElementNS(w.attributes.xmlns,b):document.createElement(b);if(m.append(S),w.attributes&&this.setAttributes({html:S,element:w,storage:e,intent:r,linkService:s}),((f=w.children)==null?void 0:f.length)>0)d.push([w,-1,S]);else if(w.value){const C=document.createTextNode(w.value);a&&Au.shouldBuildText(b)&&u.push(C),S.append(C)}}for(const p of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const eh=1e3,bk=9,za=new WeakSet;function po(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class wk{static create(t){switch(t.data.annotationType){case ze.LINK:return new Sb(t);case ze.TEXT:return new Ak(t);case ze.WIDGET:switch(t.data.fieldType){case"Tx":return new xk(t);case"Btn":return t.data.radioButton?new _b(t):t.data.checkBox?new Ek(t):new Ck(t);case"Ch":return new _k(t);case"Sig":return new Sk(t)}return new Ya(t);case ze.POPUP:return new Og(t);case ze.FREETEXT:return new Ib(t);case ze.LINE:return new Tk(t);case ze.SQUARE:return new Pk(t);case ze.CIRCLE:return new Rk(t);case ze.POLYLINE:return new Mb(t);case ze.CARET:return new Mk(t);case ze.INK:return new Vv(t);case ze.POLYGON:return new Ik(t);case ze.HIGHLIGHT:return new Lb(t);case ze.UNDERLINE:return new Lk(t);case ze.SQUIGGLY:return new Ok(t);case ze.STRIKEOUT:return new Dk(t);case ze.STAMP:return new Ob(t);case ze.FILEATTACHMENT:return new Nk(t);default:return new De(t)}}}var pa,Kl,Xl,hd,Lg;const Kv=class Kv{constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){A(this,hd);A(this,pa,null);A(this,Kl,!1);A(this,Xl,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:s}){return!!(t!=null&&t.str||e!=null&&e.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Kv._hasPopupData(this.data)}updateEdited(t){var s;if(!this.container)return;c(this,pa)||y(this,pa,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&x(this,hd,Lg).call(this,e),(s=c(this,Xl))==null||s.popup.updateEdited(t)}resetEdited(){var t;c(this,pa)&&(x(this,hd,Lg).call(this,c(this,pa).rect),(t=c(this,Xl))==null||t.popup.resetEdited(),y(this,pa,null))}_createContainer(t){const{data:e,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Ya||(r.tabIndex=eh);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof Og){const{rotation:m}=e;return!e.hasOwnCanvas&&m!==0&&this.setRotation(m,r),r}const{width:a,height:l}=po(e.rect);if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const m=e.borderStyle.horizontalCornerRadius,w=e.borderStyle.verticalCornerRadius;if(m>0||w>0){const S=`calc(${m}px * var(--scale-factor)) / calc(${w}px * var(--scale-factor))`;o.borderRadius=S}else if(this instanceof _b){const S=`calc(${a}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;o.borderRadius=S}switch(e.borderStyle.style){case Lc.SOLID:o.borderStyle="solid";break;case Lc.DASHED:o.borderStyle="dashed";break;case Lc.BEVELED:$t("Unimplemented border style: beveled");break;case Lc.INSET:$t("Unimplemented border style: inset");break;case Lc.UNDERLINE:o.borderBottomStyle="solid";break}const b=e.borderColor||null;b?(y(this,Kl,!0),o.borderColor=Pt.makeHexColor(b[0]|0,b[1]|0,b[2]|0)):o.borderWidth=0}const u=Pt.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:d,pageHeight:h,pageX:f,pageY:p}=i.rawDims;o.left=`${100*(u[0]-f)/d}%`,o.top=`${100*(u[1]-p)/h}%`;const{rotation:g}=e;return e.hasOwnCanvas||g===0?(o.width=`${100*a/d}%`,o.height=`${100*l/h}%`):this.setRotation(g,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims,{width:r,height:o}=po(this.data.rect);let a,l;t%180===0?(a=100*r/s,l=100*o/i):(a=100*o/s,l=100*r/i),e.style.width=`${a}%`,e.style.height=`${l}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,i)=>{const r=i.detail[e],o=r[0],a=r.slice(1);i.target.style[s]=R0[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[s]:R0[`${o}_rgb`](a)})};return Yt(this,"_commonActions",{display:e=>{const{display:s}=e.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const i of Object.keys(e.detail)){const r=t[i]||s[i];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[i,r]of Object.entries(e)){const o=s[i];if(o){const a={detail:{[i]:r},target:t};o(a),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,i,r]=this.data.rect.map(m=>Math.fround(m));if(t.length===8){const[m,w,b,S]=t.subarray(2,6);if(i===m&&r===w&&e===b&&s===S)return}const{style:o}=this.container;let a;if(c(this,Kl)){const{borderColor:m,borderWidth:w}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const l=i-e,u=r-s,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0);const f=d.createElement("defs");h.append(f);const p=d.createElement("clipPath"),g=`clippath_${this.data.id}`;p.setAttribute("id",g),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let m=2,w=t.length;m<w;m+=8){const b=t[m],S=t[m+1],C=t[m+2],T=t[m+3],_=d.createElement("rect"),R=(C-e)/l,M=(r-S)/u,N=(b-C)/l,I=(S-T)/u;_.setAttribute("x",R),_.setAttribute("y",M),_.setAttribute("width",N),_.setAttribute("height",I),p.append(_),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${R}" y="${M}" width="${N}" height="${I}"/>`)}c(this,Kl)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(h),this.container.style.clipPath=`url(#${g})`}_createPopup(){const{data:t}=this,e=y(this,Xl,new Og({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){ye("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:r,id:o,exportValues:a}of i){if(r===-1||o===e)continue;const l=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!za.has(u)){$t(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:l,domElement:u})}return s}for(const i of document.getElementsByName(t)){const{exportValue:r}=i,o=i.getAttribute("data-element-id");o!==e&&za.has(i)&&s.push({id:o,exportValue:r,domElement:i})}return s}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};pa=new WeakMap,Kl=new WeakMap,Xl=new WeakMap,hd=new WeakSet,Lg=function(t){const{container:{style:e},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}}}=this;s==null||s.splice(0,4,...t);const{width:u,height:d}=po(t);e.left=`${100*(t[0]-a)/r}%`,e.top=`${100*(o-t[3]+l)/o}%`,i===0?(e.width=`${100*u/r}%`,e.height=`${100*d/o}%`):this.setRotation(i)};let De=Kv;var hn,To,Eb,Cb;class Sb extends De{constructor(e,s=null){super(e,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});A(this,hn);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:s}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let r=!1;return e.url?(s.addLinkAttributes(i,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(i,e.action),r=!0):e.attachment?(x(this,hn,Eb).call(this,i,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(x(this,hn,Cb).call(this,i,e.setOCGState),r=!0):e.dest?(this._bindLink(i,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),r=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(e,s){e.href=this.linkService.getDestinationHash(s),e.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&x(this,hn,To).call(this)}_bindNamedAction(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(s),!1),x(this,hn,To).call(this)}_bindJSAction(e,s){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const o=i.get(r);o&&(e[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),x(this,hn,To).call(this)}_bindResetFormAction(e,s){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),x(this,hn,To).call(this),!this._fieldObjects){$t('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{var h;i==null||i();const{fields:r,refs:o,include:a}=s,l=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const g=this._fieldObjects[p]||[];for(const{id:m}of g)f.add(m)}for(const p of Object.values(this._fieldObjects))for(const g of p)f.has(g.id)===a&&l.push(g)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const u=this.annotationStorage,d=[];for(const f of l){const{id:p}=f;switch(d.push(p),f.type){case"text":{const m=f.defaultValue||"";u.setValue(p,{value:m});break}case"checkbox":case"radiobutton":{const m=f.defaultValue===f.exportValues;u.setValue(p,{value:m});break}case"combobox":case"listbox":{const m=f.defaultValue||"";u.setValue(p,{value:m});break}default:continue}const g=document.querySelector(`[data-element-id="${p}"]`);if(g){if(!za.has(g)){$t(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}hn=new WeakSet,To=function(){this.container.setAttribute("data-internal-link","")},Eb=function(e,s,i=null){e.href=this.linkService.getAnchorUrl(""),s.description&&(e.title=s.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,i),!1},x(this,hn,To).call(this)},Cb=function(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(s),!1),x(this,hn,To).call(this)};class Ak extends De{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Ya extends De{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return js.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,i,r){s.includes("mouse")?t.addEventListener(s,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(s,o=>{var a;if(s==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o)}}))})}_setEventListeners(t,e,s,i){var r,o,a;for(const[l,u]of s)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,l,u,i),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Pt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||bk,r=t.style;let o;const a=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),d=Math.round(u/(Cp*i))||1,h=u/d;o=Math.min(i,l(h/Cp))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(i,l(u/Cp))}r.fontSize=`calc(${o}px * var(--scale-factor))`,r.color=Pt.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class xk extends Ya{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,i){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=s),r.setValue(o.id,{[i]:s})}render(){var i,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let a=o.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let u=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type="text",s.setAttribute("value",u??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),za.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=eh,this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",f=>{t.setValue(e,{value:f.target.value}),this.setPropertyOnSiblings(s,"value",f.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";s.value=d.userValue=p,d.formattedValue=null});let h=f=>{const{formattedValue:p}=d;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",p=>{var m;if(d.focused)return;const{target:g}=p;d.userValue&&(g.value=d.userValue),d.lastCommittedValue=g.value,d.commitKey=1,(m=this.data.actions)!=null&&m.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const g={value(m){d.userValue=m.detail.value??"",t.setValue(e,{value:d.userValue.toString()}),m.target.value=d.userValue},formattedValue(m){const{formattedValue:w}=m.detail;d.formattedValue=w,w!=null&&m.target!==document.activeElement&&(m.target.value=w),t.setValue(e,{formattedValue:w})},selRange(m){m.target.setSelectionRange(...m.detail.selRange)},charLimit:m=>{var C;const{charLimit:w}=m.detail,{target:b}=m;if(w===0){b.removeAttribute("maxLength");return}b.setAttribute("maxLength",w);let S=d.userValue;!S||S.length<=w||(S=S.slice(0,w),b.value=d.userValue=S,t.setValue(e,{value:S}),(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,willCommit:!0,commitKey:1,selStart:b.selectionStart,selEnd:b.selectionEnd}}))}};this._dispatchEventFromSandbox(g,p)}),s.addEventListener("keydown",p=>{var w;d.commitKey=1;let g=-1;if(p.key==="Escape"?g=0:p.key==="Enter"&&!this.data.multiLine?g=2:p.key==="Tab"&&(d.commitKey=3),g===-1)return;const{value:m}=p.target;d.lastCommittedValue!==m&&(d.lastCommittedValue=m,d.userValue=m,(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:m,willCommit:!0,commitKey:g,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=h;h=null,s.addEventListener("blur",p=>{var m,w;if(!d.focused||!p.relatedTarget)return;(m=this.data.actions)!=null&&m.Blur||(d.focused=!1);const{value:g}=p.target;d.userValue=g,d.lastCommittedValue!==g&&((w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:g,willCommit:!0,commitKey:d.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",p=>{var _;d.lastCommittedValue=null;const{data:g,target:m}=p,{value:w,selectionStart:b,selectionEnd:S}=m;let C=b,T=S;switch(p.inputType){case"deleteWordBackward":{const R=w.substring(0,b).match(/\w*[^\w]*$/);R&&(C-=R[0].length);break}case"deleteWordForward":{const R=w.substring(b).match(/^[^\w]*\w*/);R&&(T+=R[0].length);break}case"deleteContentBackward":b===S&&(C-=1);break;case"deleteContentForward":b===S&&(T+=1);break}p.preventDefault(),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,change:g||"",willCommit:!1,selStart:C,selEnd:T}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(h&&s.addEventListener("blur",h),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Sk extends Ya{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Ek extends Ya{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let i=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return za.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=eh,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const u of this._getElementsByName(a,s)){const d=l&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=d),t.setValue(u.id,{value:d})}t.setValue(s,{value:l})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue||"Off";o.target.checked=a===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(s,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class _b extends Ya{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let i=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(s,{value:i})),i)for(const o of this._getElementsByName(e.fieldName,s))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(za.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=eh,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const u of this._getElementsByName(a,s))t.setValue(u.id,{value:!1});t.setValue(s,{value:l})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue;o.target.checked=a!=null&&a===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",a=>{const l={value:u=>{const d=o===u.detail.value;for(const h of this._getElementsByName(u.target.name)){const f=d&&h.id===s;h.domElement&&(h.domElement.checked=f),t.setValue(h.id,{value:f})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Ck extends Sb{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class _k extends Ya{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");za.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=eh;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===h});for(const d of this.data.options){const h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,s.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),r=!1),i.append(h)}let o=null;if(r){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),i.prepend(d),o=()=>{d.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const a=d=>{const h=d?"value":"textContent",{options:f,multiple:p}=i;return p?Array.prototype.filter.call(f,g=>g.selected).map(g=>g[h]):f.selectedIndex===-1?null:f[f.selectedIndex][h]};let l=a(!1);const u=d=>{const h=d.target.options;return Array.prototype.map.call(h,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",d=>{const h={value(f){o==null||o();const p=f.detail.value,g=new Set(Array.isArray(p)?p:[p]);for(const m of i.options)m.selected=g.has(m.value);t.setValue(e,{value:a(!0)}),l=a(!1)},multipleSelection(f){i.multiple=!0},remove(f){const p=i.options,g=f.detail.remove;p[g].selected=!1,i.remove(g),p.length>0&&Array.prototype.findIndex.call(p,w=>w.selected)===-1&&(p[0].selected=!0),t.setValue(e,{value:a(!0),items:u(f)}),l=a(!1)},clear(f){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),l=a(!1)},insert(f){const{index:p,displayValue:g,exportValue:m}=f.detail.insert,w=i.children[p],b=document.createElement("option");b.textContent=g,b.value=m,w?w.before(b):i.append(b),t.setValue(e,{value:a(!0),items:u(f)}),l=a(!1)},items(f){const{items:p}=f.detail;for(;i.length!==0;)i.remove(0);for(const g of p){const{displayValue:m,exportValue:w}=g,b=document.createElement("option");b.textContent=m,b.value=w,i.append(b)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:a(!0),items:u(f)}),l=a(!1)},indices(f){const p=new Set(f.detail.indices);for(const g of f.target.options)g.selected=p.has(g.index);t.setValue(e,{value:a(!0)}),l=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(h,d)}),i.addEventListener("input",d=>{var p;const h=a(!0),f=a(!1);t.setValue(e,{value:h}),d.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,change:f,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):i.addEventListener("input",function(d){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Og extends De{constructor(t){const{data:e,elements:s}=t;super(t,{isRenderable:De._hasPopupData(e)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new kk({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",e.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(s=>`${Dv}${s}`).join(",")),this.container}}var Yl,_f,kf,Jl,ga,Te,sr,Zl,fd,pd,Ql,nr,Un,ir,gd,rr,vd,va,ma,pe,Oh,Dg,kb,Tb,Pb,Rb,Dh,Nh,Ng;class kk{constructor({container:t,color:e,elements:s,titleObj:i,modificationDate:r,contentsObj:o,richText:a,parent:l,rect:u,parentRect:d,open:h}){A(this,pe);A(this,Yl,x(this,pe,Pb).bind(this));A(this,_f,x(this,pe,Ng).bind(this));A(this,kf,x(this,pe,Nh).bind(this));A(this,Jl,x(this,pe,Dh).bind(this));A(this,ga,null);A(this,Te,null);A(this,sr,null);A(this,Zl,null);A(this,fd,null);A(this,pd,null);A(this,Ql,null);A(this,nr,!1);A(this,Un,null);A(this,ir,null);A(this,gd,null);A(this,rr,null);A(this,vd,null);A(this,va,null);A(this,ma,!1);var f;y(this,Te,t),y(this,vd,i),y(this,sr,o),y(this,rr,a),y(this,pd,l),y(this,ga,e),y(this,gd,u),y(this,Ql,d),y(this,fd,s),y(this,Zl,$v.toDateObject(r)),this.trigger=s.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",c(this,Jl)),p.addEventListener("mouseenter",c(this,kf)),p.addEventListener("mouseleave",c(this,_f)),p.classList.add("popupTriggerArea");for(const p of s)(f=p.container)==null||f.addEventListener("keydown",c(this,Yl));c(this,Te).hidden=!0,h&&x(this,pe,Dh).call(this)}render(){if(c(this,Un))return;const t=y(this,Un,document.createElement("div"));if(t.className="popup",c(this,ga)){const r=t.style.outlineColor=Pt.makeHexColor(...c(this,ga));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=Pt.makeHexColor(...c(this,ga).map(a=>Math.floor(.7*(255-a)+a)))}const e=document.createElement("span");e.className="header";const s=document.createElement("h1");if(e.append(s),{dir:s.dir,str:s.textContent}=c(this,vd),t.append(e),c(this,Zl)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,Zl).valueOf()})),e.append(r)}const i=c(this,pe,Oh);if(i)xb.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(c(this,sr));t.append(r)}c(this,Te).append(t)}_formatContents({str:t,dir:e}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=e;const i=t.split(/(?:\r\n?|\n)/);for(let r=0,o=i.length;r<o;++r){const a=i[r];s.append(document.createTextNode(a)),r<o-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:t,popupContent:e}){var s;c(this,va)||y(this,va,{contentsObj:c(this,sr),richText:c(this,rr)}),t&&y(this,ir,null),e&&(y(this,rr,x(this,pe,Tb).call(this,e)),y(this,sr,null)),(s=c(this,Un))==null||s.remove(),y(this,Un,null)}resetEdited(){var t;c(this,va)&&({contentsObj:Ts(this,sr)._,richText:Ts(this,rr)._}=c(this,va),y(this,va,null),(t=c(this,Un))==null||t.remove(),y(this,Un,null),y(this,ir,null))}forceHide(){y(this,ma,this.isVisible),c(this,ma)&&(c(this,Te).hidden=!0)}maybeShow(){c(this,ma)&&(c(this,Un)||x(this,pe,Nh).call(this),y(this,ma,!1),c(this,Te).hidden=!1)}get isVisible(){return c(this,Te).hidden===!1}}Yl=new WeakMap,_f=new WeakMap,kf=new WeakMap,Jl=new WeakMap,ga=new WeakMap,Te=new WeakMap,sr=new WeakMap,Zl=new WeakMap,fd=new WeakMap,pd=new WeakMap,Ql=new WeakMap,nr=new WeakMap,Un=new WeakMap,ir=new WeakMap,gd=new WeakMap,rr=new WeakMap,vd=new WeakMap,va=new WeakMap,ma=new WeakMap,pe=new WeakSet,Oh=function(){const t=c(this,rr),e=c(this,sr);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&c(this,rr).html||null},Dg=function(){var t,e,s;return((s=(e=(t=c(this,pe,Oh))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.fontSize)||0},kb=function(){var t,e,s;return((s=(e=(t=c(this,pe,Oh))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.color)||null},Tb=function(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:c(this,pe,kb),fontSize:c(this,pe,Dg)?`calc(${c(this,pe,Dg)}px * var(--scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:i});return s},Pb=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&c(this,nr))&&x(this,pe,Dh).call(this)},Rb=function(){if(c(this,ir)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:i,pageY:r}}}=c(this,pd);let o=!!c(this,Ql),a=o?c(this,Ql):c(this,gd);for(const g of c(this,fd))if(!a||Pt.intersect(g.data.rect,a)!==null){a=g.data.rect,o=!0;break}const l=Pt.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),d=o?a[2]-a[0]+5:0,h=l[0]+d,f=l[1];y(this,ir,[100*(h-i)/e,100*(f-r)/s]);const{style:p}=c(this,Te);p.left=`${c(this,ir)[0]}%`,p.top=`${c(this,ir)[1]}%`},Dh=function(){y(this,nr,!c(this,nr)),c(this,nr)?(x(this,pe,Nh).call(this),c(this,Te).addEventListener("click",c(this,Jl)),c(this,Te).addEventListener("keydown",c(this,Yl))):(x(this,pe,Ng).call(this),c(this,Te).removeEventListener("click",c(this,Jl)),c(this,Te).removeEventListener("keydown",c(this,Yl)))},Nh=function(){c(this,Un)||this.render(),this.isVisible?c(this,nr)&&c(this,Te).classList.add("focused"):(x(this,pe,Rb).call(this),c(this,Te).hidden=!1,c(this,Te).style.zIndex=parseInt(c(this,Te).style.zIndex)+1e3)},Ng=function(){c(this,Te).classList.remove("focused"),!(c(this,nr)||!this.isVisible)&&(c(this,Te).hidden=!0,c(this,Te).style.zIndex=parseInt(c(this,Te).style.zIndex)-1e3)};class Ib extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Gt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var md;class Tk extends De{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,md,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:s,height:i}=po(e.rect),r=this.svgFactory.create(s,i,!0),o=y(this,md,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,md)}addHighlightArea(){this.container.classList.add("highlightArea")}}md=new WeakMap;var yd;class Pk extends De{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,yd,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:s,height:i}=po(e.rect),r=this.svgFactory.create(s,i,!0),o=e.borderStyle.width,a=y(this,yd,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",s-o),a.setAttribute("height",i-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,yd)}addHighlightArea(){this.container.classList.add("highlightArea")}}yd=new WeakMap;var bd;class Rk extends De{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,bd,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:s,height:i}=po(e.rect),r=this.svgFactory.create(s,i,!0),o=e.borderStyle.width,a=y(this,bd,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",s/2),a.setAttribute("cy",i/2),a.setAttribute("rx",s/2-o/2),a.setAttribute("ry",i/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,bd)}addHighlightArea(){this.container.classList.add("highlightArea")}}bd=new WeakMap;var wd;class Mb extends De{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,wd,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:s,borderStyle:i,popupRef:r}}=this;if(!s)return this.container;const{width:o,height:a}=po(e),l=this.svgFactory.create(o,a,!0);let u=[];for(let h=0,f=s.length;h<f;h+=2){const p=s[h]-e[0],g=e[3]-s[h+1];u.push(`${p},${g}`)}u=u.join(" ");const d=y(this,wd,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",u),d.setAttribute("stroke-width",i.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,wd)}addHighlightArea(){this.container.classList.add("highlightArea")}}wd=new WeakMap;class Ik extends Mb{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Mk extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Ad,ya,xd,Fg;class Vv extends De{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,xd);A(this,Ad,null);A(this,ya,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Gt.HIGHLIGHT:Gt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:s,inkLists:i,borderStyle:r,popupRef:o}}=this,{transform:a,width:l,height:u}=x(this,xd,Fg).call(this,s,e),d=this.svgFactory.create(l,u,!0),h=y(this,Ad,this.svgFactory.createElement("svg:g"));d.append(h),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",a);for(let f=0,p=i.length;f<p;f++){const g=this.svgFactory.createElement(this.svgElementName);c(this,ya).push(g),g.setAttribute("points",i[f].join(",")),h.append(g)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:s,points:i,rect:r}=e,o=c(this,Ad);if(s>=0&&o.setAttribute("stroke-width",s||1),i)for(let a=0,l=c(this,ya).length;a<l;a++)c(this,ya)[a].setAttribute("points",i[a].join(","));if(r){const{transform:a,width:l,height:u}=x(this,xd,Fg).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return c(this,ya)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ad=new WeakMap,ya=new WeakMap,xd=new WeakSet,Fg=function(e,s){switch(e){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class Lb extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Gt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class Lk extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Ok extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Dk extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Ob extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Gt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Sd,Ed,$g;class Nk extends De{constructor(e){var i;super(e,{isRenderable:!0});A(this,Ed);A(this,Sd,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:s}=this;let i;s.hasAppearance||s.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),i.addEventListener("dblclick",x(this,Ed,$g).bind(this)),y(this,Sd,i);const{isMac:r}=js.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&x(this,Ed,$g).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return c(this,Sd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sd=new WeakMap,Ed=new WeakSet,$g=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Cd,ba,wa,_d,Wa,Db,Bg;class Fk{constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:o,structTreeLayer:a}){A(this,Wa);A(this,Cd,null);A(this,ba,null);A(this,wa,new Map);A(this,_d,null);this.div=t,y(this,Cd,e),y(this,ba,s),y(this,_d,a||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return c(this,wa).size>0}async render(t){var o;const{annotations:e}=t,s=this.div;Va(s,this.viewport);const i=new Map,r={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Uv,annotationStorage:t.annotationStorage||new jv,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const l=a.annotationType===ze.POPUP;if(l){const h=i.get(a.id);if(!h)continue;r.elements=h}else{const{width:h,height:f}=po(a.rect);if(h<=0||f<=0)continue}r.data=a;const u=wk.create(r);if(!u.isRenderable)continue;if(!l&&a.popupRef){const h=i.get(a.popupRef);h?h.push(u):i.set(a.popupRef,[u])}const d=u.render();a.hidden&&(d.style.visibility="hidden"),await x(this,Wa,Db).call(this,d,a.id),u._isEditable&&(c(this,wa).set(u.data.id,u),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(u))}x(this,Wa,Bg).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Va(e,{rotation:t.rotation}),x(this,Wa,Bg).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(c(this,wa).values())}getEditableAnnotation(t){return c(this,wa).get(t)}}Cd=new WeakMap,ba=new WeakMap,wa=new WeakMap,_d=new WeakMap,Wa=new WeakSet,Db=async function(t,e){var o,a;const s=t.firstChild||t,i=s.id=`${Dv}${e}`,r=await((o=c(this,_d))==null?void 0:o.getAriaAttributes(i));if(r)for(const[l,u]of r)s.setAttribute(l,u);this.div.append(t),(a=c(this,Cd))==null||a.moveElementInDOM(this.div,t,s,!1)},Bg=function(){if(!c(this,ba))return;const t=this.div;for(const[e,s]of c(this,ba)){const i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:r}=i;r?r.nodeName==="CANVAS"?r.replaceWith(s):r.classList.contains("annotationContent")?r.after(s):r.before(s):i.append(s)}c(this,ba).clear()};const hh=/\r\n?|\n/g;var Vn,en,kd,Aa,sn,je,Nb,Fb,$b,Fh,br,$h,Bh,Bb,Hg,jb;const be=class be extends ke{constructor(e){super({...e,name:"freeTextEditor"});A(this,je);A(this,Vn);A(this,en,"");A(this,kd,`${this.id}-editor`);A(this,Aa,null);A(this,sn);y(this,Vn,e.color||be._defaultColor||ke._defaultLineColor),y(this,sn,e.fontSize||be._defaultFontSize)}static get _keyboardManager(){const e=be.prototype,s=o=>o.isEmpty(),i=Ga.TRANSLATE_SMALL,r=Ga.TRANSLATE_BIG;return Yt(this,"_keyboardManager",new th([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(e,s){ke.initialize(e,s);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,s){switch(e){case Jt.FREETEXT_SIZE:be._defaultFontSize=s;break;case Jt.FREETEXT_COLOR:be._defaultColor=s;break}}updateParams(e,s){switch(e){case Jt.FREETEXT_SIZE:x(this,je,Nb).call(this,s);break;case Jt.FREETEXT_COLOR:x(this,je,Fb).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Jt.FREETEXT_SIZE,be._defaultFontSize],[Jt.FREETEXT_COLOR,be._defaultColor||ke._defaultLineColor]]}get propertiesToUpdate(){return[[Jt.FREETEXT_SIZE,c(this,sn)],[Jt.FREETEXT_COLOR,c(this,Vn)]]}_translateEmpty(e,s){this._uiManager.translateSelectedEditors(e,s,!0)}getInitialTranslation(){const e=this.parentScale;return[-be._internalPadding*e,-(be._internalPadding+c(this,sn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Gt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),y(this,Aa,new AbortController);const e=this._uiManager.combinedSignal(c(this,Aa));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,kd)),this._isDraggable=!0,(e=c(this,Aa))==null||e.abort(),y(this,Aa,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var s;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=c(this,en),s=y(this,en,x(this,je,$b).call(this).trimEnd());if(e===s)return;const i=r=>{if(y(this,en,r),!r){this.remove();return}x(this,je,Bh).call(this),this._uiManager.rebuild(this),x(this,je,Fh).call(this)};this.addCommands({cmd:()=>{i(s)},undo:()=>{i(e)},mustExec:!1}),x(this,je,Fh).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){be._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,s;this.width&&(e=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,kd)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${c(this,sn)}px * var(--scale-factor))`,i.color=c(this,Vn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),af(this,this.div,["dblclick","keydown"]),this.width){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[d,h]=this.pageDimensions,[f,p]=this.pageTranslation;let g,m;switch(this.rotation){case 0:g=e+(a[0]-f)/d,m=s+this.height-(a[1]-p)/h;break;case 90:g=e+(a[0]-f)/d,m=s-(a[1]-p)/h,[l,u]=[u,-l];break;case 180:g=e-this.width+(a[0]-f)/d,m=s-(a[1]-p)/h,[l,u]=[-l,-u];break;case 270:g=e+(a[0]-f-this.height*h)/d,m=s+(a[1]-p-this.width*d)/h,[l,u]=[-u,l];break}this.setAt(g*r,m*o,l,u)}else this.setAt(e*r,s*o,this.width*r,this.height*o);x(this,je,Bh).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var g,m,w;const s=e.clipboardData||window.clipboardData,{types:i}=s;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const r=x(g=be,br,Hg).call(g,s.getData("text")||"").replaceAll(hh,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:u}=a,d=[],h=[];if(l.nodeType===Node.TEXT_NODE){const b=l.parentElement;if(h.push(l.nodeValue.slice(u).replaceAll(hh,"")),b!==this.editorDiv){let S=d;for(const C of this.editorDiv.childNodes){if(C===b){S=h;continue}S.push(x(m=be,br,$h).call(m,C))}}d.push(l.nodeValue.slice(0,u).replaceAll(hh,""))}else if(l===this.editorDiv){let b=d,S=0;for(const C of this.editorDiv.childNodes)S++===u&&(b=h),b.push(x(w=be,br,$h).call(w,C))}y(this,en,`${d.join(`
`)}${r}${h.join(`
`)}`),x(this,je,Bh).call(this);const f=new Range;let p=d.reduce((b,S)=>b+S.length,0);for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const S=b.nodeValue.length;if(p<=S){f.setStart(b,p),f.setEnd(b,p);break}p-=S}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(e,s,i){var a;let r=null;if(e instanceof Ib){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:d,rotation:h,id:f,popupRef:p},textContent:g,textPosition:m,parent:{page:{pageNumber:w}}}=e;if(!g||g.length===0)return null;r=e={annotationType:Gt.FREETEXT,color:Array.from(u),fontSize:l,value:g.join(`
`),position:m,pageIndex:w-1,rect:d.slice(0),rotation:h,id:f,deleted:!1,popupRef:p}}const o=await super.deserialize(e,s,i);return y(o,sn,e.fontSize),y(o,Vn,Pt.makeHexColor(...e.color)),y(o,en,x(a=be,br,Hg).call(a,e.value)),o.annotationElementId=e.id||null,o._initialData=r,o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=be._internalPadding*this.parentScale,i=this.getRect(s,s),r=ke._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,Vn)),o={annotationType:Gt.FREETEXT,color:r,fontSize:c(this,sn),value:x(this,je,Bb).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?o:this.annotationElementId&&!x(this,je,jb).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const s=super.renderAnnotationElement(e);if(this.deleted)return s;const{style:i}=s;i.fontSize=`calc(${c(this,sn)}px * var(--scale-factor))`,i.color=c(this,Vn),s.replaceChildren();for(const o of c(this,en).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),s.append(a)}const r=be._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:c(this,en)}),s}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Vn=new WeakMap,en=new WeakMap,kd=new WeakMap,Aa=new WeakMap,sn=new WeakMap,je=new WeakSet,Nb=function(e){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-c(this,sn))*this.parentScale),y(this,sn,r),x(this,je,Fh).call(this)},i=c(this,sn);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Jt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Fb=function(e){const s=r=>{y(this,Vn,this.editorDiv.style.color=r)},i=c(this,Vn);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Jt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},$b=function(){var i;const e=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(x(i=be,br,$h).call(i,r)),s=r);return e.join(`
`)},Fh=function(){const[e,s]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/s):(this.width=i.height/e,this.height=i.width/s),this.fixAndSetPosition()},br=new WeakSet,$h=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(hh,"")},Bh=function(){if(this.editorDiv.replaceChildren(),!!c(this,en))for(const e of c(this,en).split(`
`)){const s=document.createElement("div");s.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(s)}},Bb=function(){return c(this,en).replaceAll(""," ")},Hg=function(e){return e.replaceAll(" ","")},jb=function(e){const{value:s,fontSize:i,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||e.value!==s||e.fontSize!==i||e.color.some((a,l)=>a!==r[l])||e.pageIndex!==o},A(be,br),kt(be,"_freeTextDefaultContent",""),kt(be,"_internalPadding",0),kt(be,"_defaultColor",null),kt(be,"_defaultFontSize",10),kt(be,"_type","freetext"),kt(be,"_editorType",Gt.FREETEXT);let jg=be;class xt{toSVGPath(){ye("Abstract method `toSVGPath` must be implemented.")}get box(){ye("Abstract getter `box` must be implemented.")}serialize(t,e){ye("Abstract method `serialize` must be implemented.")}static _rescale(t,e,s,i,r,o){o||(o=new Float32Array(t.length));for(let a=0,l=t.length;a<l;a+=2)o[a]=e+t[a]*i,o[a+1]=s+t[a+1]*r;return o}static _rescaleAndSwap(t,e,s,i,r,o){o||(o=new Float32Array(t.length));for(let a=0,l=t.length;a<l;a+=2)o[a]=e+t[a+1]*i,o[a+1]=s+t[a]*r;return o}static _translate(t,e,s,i){i||(i=new Float32Array(t.length));for(let r=0,o=t.length;r<o;r+=2)i[r]=e+t[r],i[r+1]=s+t[r+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,s,i,r){switch(r){case 90:return[1-e/s,t/i];case 180:return[1-t/s,1-e/i];case 270:return[e/s,1-t/i];default:return[t/s,e/i]}}static _normalizePagePoint(t,e,s){switch(s){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,s,i,r,o){return[(t+5*s)/6,(e+5*i)/6,(5*s+r)/6,(5*i+o)/6,(s+r)/2,(i+o)/2]}}kt(xt,"PRECISION",1e-4);var nn,Gn,ql,tc,Ai,Xt,xa,Sa,Td,Pd,ec,sc,eo,Rd,Tf,Pf,Ze,Xc,Hb,Ub,Vb,Gb,zb,Wb;const ji=class ji{constructor({x:t,y:e},s,i,r,o,a=0){A(this,Ze);A(this,nn);A(this,Gn,[]);A(this,ql);A(this,tc);A(this,Ai,[]);A(this,Xt,new Float32Array(18));A(this,xa);A(this,Sa);A(this,Td);A(this,Pd);A(this,ec);A(this,sc);A(this,eo,[]);y(this,nn,s),y(this,sc,r*i),y(this,tc,o),c(this,Xt).set([NaN,NaN,NaN,NaN,t,e],6),y(this,ql,a),y(this,Pd,c(ji,Rd)*i),y(this,Td,c(ji,Pf)*i),y(this,ec,i),c(this,eo).push(t,e)}isEmpty(){return isNaN(c(this,Xt)[8])}add({x:t,y:e}){var I;y(this,xa,t),y(this,Sa,e);const[s,i,r,o]=c(this,nn);let[a,l,u,d]=c(this,Xt).subarray(8,12);const h=t-u,f=e-d,p=Math.hypot(h,f);if(p<c(this,Td))return!1;const g=p-c(this,Pd),m=g/p,w=m*h,b=m*f;let S=a,C=l;a=u,l=d,u+=w,d+=b,(I=c(this,eo))==null||I.push(t,e);const T=-b/g,_=w/g,R=T*c(this,sc),M=_*c(this,sc);return c(this,Xt).set(c(this,Xt).subarray(2,8),0),c(this,Xt).set([u+R,d+M],4),c(this,Xt).set(c(this,Xt).subarray(14,18),12),c(this,Xt).set([u-R,d-M],16),isNaN(c(this,Xt)[6])?(c(this,Ai).length===0&&(c(this,Xt).set([a+R,l+M],2),c(this,Ai).push(NaN,NaN,NaN,NaN,(a+R-s)/r,(l+M-i)/o),c(this,Xt).set([a-R,l-M],14),c(this,Gn).push(NaN,NaN,NaN,NaN,(a-R-s)/r,(l-M-i)/o)),c(this,Xt).set([S,C,a,l,u,d],6),!this.isEmpty()):(c(this,Xt).set([S,C,a,l,u,d],6),Math.abs(Math.atan2(C-l,S-a)-Math.atan2(b,w))<Math.PI/2?([a,l,u,d]=c(this,Xt).subarray(2,6),c(this,Ai).push(NaN,NaN,NaN,NaN,((a+u)/2-s)/r,((l+d)/2-i)/o),[a,l,S,C]=c(this,Xt).subarray(14,18),c(this,Gn).push(NaN,NaN,NaN,NaN,((S+a)/2-s)/r,((C+l)/2-i)/o),!0):([S,C,a,l,u,d]=c(this,Xt).subarray(0,6),c(this,Ai).push(((S+5*a)/6-s)/r,((C+5*l)/6-i)/o,((5*a+u)/6-s)/r,((5*l+d)/6-i)/o,((a+u)/2-s)/r,((l+d)/2-i)/o),[u,d,a,l,S,C]=c(this,Xt).subarray(12,18),c(this,Gn).push(((S+5*a)/6-s)/r,((C+5*l)/6-i)/o,((5*a+u)/6-s)/r,((5*l+d)/6-i)/o,((a+u)/2-s)/r,((l+d)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=c(this,Ai),e=c(this,Gn);if(isNaN(c(this,Xt)[6])&&!this.isEmpty())return x(this,Ze,Hb).call(this);const s=[];s.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);x(this,Ze,Vb).call(this,s);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return x(this,Ze,Ub).call(this,s),s.join(" ")}newFreeDrawOutline(t,e,s,i,r,o){return new Kb(t,e,s,i,r,o)}getOutlines(){var h;const t=c(this,Ai),e=c(this,Gn),s=c(this,Xt),[i,r,o,a]=c(this,nn),l=new Float32Array((((h=c(this,eo))==null?void 0:h.length)??0)+2);for(let f=0,p=l.length-2;f<p;f+=2)l[f]=(c(this,eo)[f]-i)/o,l[f+1]=(c(this,eo)[f+1]-r)/a;if(l[l.length-2]=(c(this,xa)-i)/o,l[l.length-1]=(c(this,Sa)-r)/a,isNaN(s[6])&&!this.isEmpty())return x(this,Ze,Gb).call(this,l);const u=new Float32Array(c(this,Ai).length+24+c(this,Gn).length);let d=t.length;for(let f=0;f<d;f+=2){if(isNaN(t[f])){u[f]=u[f+1]=NaN;continue}u[f]=t[f],u[f+1]=t[f+1]}d=x(this,Ze,Wb).call(this,u,d);for(let f=e.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(e[f+p])){u[d]=u[d+1]=NaN,d+=2;continue}u[d]=e[f+p],u[d+1]=e[f+p+1],d+=2}return x(this,Ze,zb).call(this,u,d),this.newFreeDrawOutline(u,l,c(this,nn),c(this,ec),c(this,ql),c(this,tc))}};nn=new WeakMap,Gn=new WeakMap,ql=new WeakMap,tc=new WeakMap,Ai=new WeakMap,Xt=new WeakMap,xa=new WeakMap,Sa=new WeakMap,Td=new WeakMap,Pd=new WeakMap,ec=new WeakMap,sc=new WeakMap,eo=new WeakMap,Rd=new WeakMap,Tf=new WeakMap,Pf=new WeakMap,Ze=new WeakSet,Xc=function(){const t=c(this,Xt).subarray(4,6),e=c(this,Xt).subarray(16,18),[s,i,r,o]=c(this,nn);return[(c(this,xa)+(t[0]-e[0])/2-s)/r,(c(this,Sa)+(t[1]-e[1])/2-i)/o,(c(this,xa)+(e[0]-t[0])/2-s)/r,(c(this,Sa)+(e[1]-t[1])/2-i)/o]},Hb=function(){const[t,e,s,i]=c(this,nn),[r,o,a,l]=x(this,Ze,Xc).call(this);return`M${(c(this,Xt)[2]-t)/s} ${(c(this,Xt)[3]-e)/i} L${(c(this,Xt)[4]-t)/s} ${(c(this,Xt)[5]-e)/i} L${r} ${o} L${a} ${l} L${(c(this,Xt)[16]-t)/s} ${(c(this,Xt)[17]-e)/i} L${(c(this,Xt)[14]-t)/s} ${(c(this,Xt)[15]-e)/i} Z`},Ub=function(t){const e=c(this,Gn);t.push(`L${e[4]} ${e[5]} Z`)},Vb=function(t){const[e,s,i,r]=c(this,nn),o=c(this,Xt).subarray(4,6),a=c(this,Xt).subarray(16,18),[l,u,d,h]=x(this,Ze,Xc).call(this);t.push(`L${(o[0]-e)/i} ${(o[1]-s)/r} L${l} ${u} L${d} ${h} L${(a[0]-e)/i} ${(a[1]-s)/r}`)},Gb=function(t){const e=c(this,Xt),[s,i,r,o]=c(this,nn),[a,l,u,d]=x(this,Ze,Xc).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(e[2]-s)/r,(e[3]-i)/o,NaN,NaN,NaN,NaN,(e[4]-s)/r,(e[5]-i)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,(e[16]-s)/r,(e[17]-i)/o,NaN,NaN,NaN,NaN,(e[14]-s)/r,(e[15]-i)/o],0),this.newFreeDrawOutline(h,t,c(this,nn),c(this,ec),c(this,ql),c(this,tc))},zb=function(t,e){const s=c(this,Gn);return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],e),e+=6},Wb=function(t,e){const s=c(this,Xt).subarray(4,6),i=c(this,Xt).subarray(16,18),[r,o,a,l]=c(this,nn),[u,d,h,f]=x(this,Ze,Xc).call(this);return t.set([NaN,NaN,NaN,NaN,(s[0]-r)/a,(s[1]-o)/l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-o)/l],e),e+=24},A(ji,Rd,8),A(ji,Tf,2),A(ji,Pf,c(ji,Rd)+c(ji,Tf));let uf=ji;var nc,Ea,or,Id,rn,Md,Oe,Rf,Xb;class Kb extends xt{constructor(e,s,i,r,o,a){super();A(this,Rf);A(this,nc);A(this,Ea,new Float32Array(4));A(this,or);A(this,Id);A(this,rn);A(this,Md);A(this,Oe);y(this,Oe,e),y(this,rn,s),y(this,nc,i),y(this,Md,r),y(this,or,o),y(this,Id,a),this.lastPoint=[NaN,NaN],x(this,Rf,Xb).call(this,a);const[l,u,d,h]=c(this,Ea);for(let f=0,p=e.length;f<p;f+=2)e[f]=(e[f]-l)/d,e[f+1]=(e[f+1]-u)/h;for(let f=0,p=s.length;f<p;f+=2)s[f]=(s[f]-l)/d,s[f+1]=(s[f+1]-u)/h}toSVGPath(){const e=[`M${c(this,Oe)[4]} ${c(this,Oe)[5]}`];for(let s=6,i=c(this,Oe).length;s<i;s+=6){if(isNaN(c(this,Oe)[s])){e.push(`L${c(this,Oe)[s+4]} ${c(this,Oe)[s+5]}`);continue}e.push(`C${c(this,Oe)[s]} ${c(this,Oe)[s+1]} ${c(this,Oe)[s+2]} ${c(this,Oe)[s+3]} ${c(this,Oe)[s+4]} ${c(this,Oe)[s+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,s,i,r],o){const a=i-e,l=r-s;let u,d;switch(o){case 0:u=xt._rescale(c(this,Oe),e,r,a,-l),d=xt._rescale(c(this,rn),e,r,a,-l);break;case 90:u=xt._rescaleAndSwap(c(this,Oe),e,s,a,l),d=xt._rescaleAndSwap(c(this,rn),e,s,a,l);break;case 180:u=xt._rescale(c(this,Oe),i,s,-a,l),d=xt._rescale(c(this,rn),i,s,-a,l);break;case 270:u=xt._rescaleAndSwap(c(this,Oe),i,r,-a,-l),d=xt._rescaleAndSwap(c(this,rn),i,r,-a,-l);break}return{outline:Array.from(u),points:[Array.from(d)]}}get box(){return c(this,Ea)}newOutliner(e,s,i,r,o,a=0){return new uf(e,s,i,r,o,a)}getNewOutline(e,s){const[i,r,o,a]=c(this,Ea),[l,u,d,h]=c(this,nc),f=o*d,p=a*h,g=i*d+l,m=r*h+u,w=this.newOutliner({x:c(this,rn)[0]*f+g,y:c(this,rn)[1]*p+m},c(this,nc),c(this,Md),e,c(this,Id),s??c(this,or));for(let b=2;b<c(this,rn).length;b+=2)w.add({x:c(this,rn)[b]*f+g,y:c(this,rn)[b+1]*p+m});return w.getOutlines()}}nc=new WeakMap,Ea=new WeakMap,or=new WeakMap,Id=new WeakMap,rn=new WeakMap,Md=new WeakMap,Oe=new WeakMap,Rf=new WeakSet,Xb=function(e){const s=c(this,Oe);let i=s[4],r=s[5],o=i,a=r,l=i,u=r,d=i,h=r;const f=e?Math.max:Math.min;for(let g=6,m=s.length;g<m;g+=6){if(isNaN(s[g]))o=Math.min(o,s[g+4]),a=Math.min(a,s[g+5]),l=Math.max(l,s[g+4]),u=Math.max(u,s[g+5]),h<s[g+5]?(d=s[g+4],h=s[g+5]):h===s[g+5]&&(d=f(d,s[g+4]));else{const w=Pt.bezierBoundingBox(i,r,...s.slice(g,g+6));o=Math.min(o,w[0]),a=Math.min(a,w[1]),l=Math.max(l,w[2]),u=Math.max(u,w[3]),h<w[3]?(d=w[2],h=w[3]):h===w[3]&&(d=f(d,w[2]))}i=s[g+4],r=s[g+5]}const p=c(this,Ea);p[0]=o-c(this,or),p[1]=a-c(this,or),p[2]=l-o+2*c(this,or),p[3]=u-a+2*c(this,or),this.lastPoint=[d,h]};var Ld,Od,so,zn,Us,Yb,jh,Jb,Zb,Vg;class Ug{constructor(t,e=0,s=0,i=!0){A(this,Us);A(this,Ld);A(this,Od);A(this,so,[]);A(this,zn,[]);let r=1/0,o=-1/0,a=1/0,l=-1/0;const u=10**-4;for(const{x:w,y:b,width:S,height:C}of t){const T=Math.floor((w-e)/u)*u,_=Math.ceil((w+S+e)/u)*u,R=Math.floor((b-e)/u)*u,M=Math.ceil((b+C+e)/u)*u,N=[T,R,M,!0],I=[_,R,M,!1];c(this,so).push(N,I),r=Math.min(r,T),o=Math.max(o,_),a=Math.min(a,R),l=Math.max(l,M)}const d=o-r+2*s,h=l-a+2*s,f=r-s,p=a-s,g=c(this,so).at(i?-1:-2),m=[g[0],g[2]];for(const w of c(this,so)){const[b,S,C]=w;w[0]=(b-f)/d,w[1]=(S-p)/h,w[2]=(C-p)/h}y(this,Ld,new Float32Array([f,p,d,h])),y(this,Od,m)}getOutlines(){c(this,so).sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of c(this,so))e[3]?(t.push(...x(this,Us,Vg).call(this,e)),x(this,Us,Jb).call(this,e)):(x(this,Us,Zb).call(this,e),t.push(...x(this,Us,Vg).call(this,e)));return x(this,Us,Yb).call(this,t)}}Ld=new WeakMap,Od=new WeakMap,so=new WeakMap,zn=new WeakMap,Us=new WeakSet,Yb=function(t){const e=[],s=new Set;for(const o of t){const[a,l,u]=o;e.push([a,l,o],[a,u,o])}e.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=e.length;o<a;o+=2){const l=e[o][2],u=e[o+1][2];l.push(u),u.push(l),s.add(l),s.add(u)}const i=[];let r;for(;s.size>0;){const o=s.values().next().value;let[a,l,u,d,h]=o;s.delete(o);let f=a,p=l;for(r=[a,u],i.push(r);;){let g;if(s.has(d))g=d;else if(s.has(h))g=h;else break;s.delete(g),[a,l,u,d,h]=g,f!==a&&(r.push(f,p,a,p===l?l:u),f=a),p=p===l?u:l}r.push(f,p)}return new $k(i,c(this,Ld),c(this,Od))},jh=function(t){const e=c(this,zn);let s=0,i=e.length-1;for(;s<=i;){const r=s+i>>1,o=e[r][0];if(o===t)return r;o<t?s=r+1:i=r-1}return i+1},Jb=function([,t,e]){const s=x(this,Us,jh).call(this,t);c(this,zn).splice(s,0,[t,e])},Zb=function([,t,e]){const s=x(this,Us,jh).call(this,t);for(let i=s;i<c(this,zn).length;i++){const[r,o]=c(this,zn)[i];if(r!==t)break;if(r===t&&o===e){c(this,zn).splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,o]=c(this,zn)[i];if(r!==t)break;if(r===t&&o===e){c(this,zn).splice(i,1);return}}},Vg=function(t){const[e,s,i]=t,r=[[e,s,i]],o=x(this,Us,jh).call(this,i);for(let a=0;a<o;a++){const[l,u]=c(this,zn)[a];for(let d=0,h=r.length;d<h;d++){const[,f,p]=r[d];if(!(u<=f||p<=l)){if(f>=l){if(p>u)r[d][1]=u;else{if(h===1)return[];r.splice(d,1),d--,h--}continue}r[d][2]=l,p>u&&r.push([e,u,p])}}}return r};var Dd,ic;class $k extends xt{constructor(e,s,i){super();A(this,Dd);A(this,ic);y(this,ic,e),y(this,Dd,s),this.lastPoint=i}toSVGPath(){const e=[];for(const s of c(this,ic)){let[i,r]=s;e.push(`M${i} ${r}`);for(let o=2;o<s.length;o+=2){const a=s[o],l=s[o+1];a===i?(e.push(`V${l}`),r=l):l===r&&(e.push(`H${a}`),i=a)}e.push("Z")}return e.join(" ")}serialize([e,s,i,r],o){const a=[],l=i-e,u=r-s;for(const d of c(this,ic)){const h=new Array(d.length);for(let f=0;f<d.length;f+=2)h[f]=e+d[f]*l,h[f+1]=r-d[f+1]*u;a.push(h)}return a}get box(){return c(this,Dd)}get classNamesForOutlining(){return["highlightOutline"]}}Dd=new WeakMap,ic=new WeakMap;class Gg extends uf{newFreeDrawOutline(t,e,s,i,r,o){return new Bk(t,e,s,i,r,o)}}class Bk extends Kb{newOutliner(t,e,s,i,r,o=0){return new Gg(t,e,s,i,r,o)}}var Wn,Ca,rc,Xe,Nd,oc,Fd,$d,no,Kn,ac,Bd,he,zg,Wg,Kg,Po,Qb,Rr;const zs=class zs{constructor({editor:t=null,uiManager:e=null}){A(this,he);A(this,Wn,null);A(this,Ca,null);A(this,rc);A(this,Xe,null);A(this,Nd,!1);A(this,oc,!1);A(this,Fd,null);A(this,$d);A(this,no,null);A(this,Kn,null);A(this,ac);var s;t?(y(this,oc,!1),y(this,ac,Jt.HIGHLIGHT_COLOR),y(this,Fd,t)):(y(this,oc,!0),y(this,ac,Jt.HIGHLIGHT_DEFAULT_COLOR)),y(this,Kn,(t==null?void 0:t._uiManager)||e),y(this,$d,c(this,Kn)._eventBus),y(this,rc,(t==null?void 0:t.color)||((s=c(this,Kn))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),c(zs,Bd)||y(zs,Bd,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Yt(this,"_keyboardManager",new th([[["Escape","mac+Escape"],zs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],zs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],zs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],zs.prototype._moveToPrevious],[["Home","mac+Home"],zs.prototype._moveToBeginning],[["End","mac+End"],zs.prototype._moveToEnd]]))}renderButton(){const t=y(this,Wn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=c(this,Kn)._signal;t.addEventListener("click",x(this,he,Po).bind(this),{signal:e}),t.addEventListener("keydown",x(this,he,Kg).bind(this),{signal:e});const s=y(this,Ca,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=c(this,rc),t.append(s),t}renderMainDropdown(){const t=y(this,Xe,x(this,he,zg).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===c(this,Wn)){x(this,he,Po).call(this,t);return}const e=t.target.getAttribute("data-color");e&&x(this,he,Wg).call(this,e,t)}_moveToNext(t){var e,s;if(!c(this,he,Rr)){x(this,he,Po).call(this,t);return}if(t.target===c(this,Wn)){(e=c(this,Xe).firstChild)==null||e.focus();return}(s=t.target.nextSibling)==null||s.focus()}_moveToPrevious(t){var e,s;if(t.target===((e=c(this,Xe))==null?void 0:e.firstChild)||t.target===c(this,Wn)){c(this,he,Rr)&&this._hideDropdownFromKeyboard();return}c(this,he,Rr)||x(this,he,Po).call(this,t),(s=t.target.previousSibling)==null||s.focus()}_moveToBeginning(t){var e;if(!c(this,he,Rr)){x(this,he,Po).call(this,t);return}(e=c(this,Xe).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!c(this,he,Rr)){x(this,he,Po).call(this,t);return}(e=c(this,Xe).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=c(this,Xe))==null||t.classList.add("hidden"),(e=c(this,no))==null||e.abort(),y(this,no,null)}_hideDropdownFromKeyboard(){var t;if(!c(this,oc)){if(!c(this,he,Rr)){(t=c(this,Fd))==null||t.unselect();return}this.hideDropdown(),c(this,Wn).focus({preventScroll:!0,focusVisible:c(this,Nd)})}}updateColor(t){if(c(this,Ca)&&(c(this,Ca).style.backgroundColor=t),!c(this,Xe))return;const e=c(this,Kn).highlightColors.values();for(const s of c(this,Xe).children)s.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=c(this,Wn))==null||t.remove(),y(this,Wn,null),y(this,Ca,null),(e=c(this,Xe))==null||e.remove(),y(this,Xe,null)}};Wn=new WeakMap,Ca=new WeakMap,rc=new WeakMap,Xe=new WeakMap,Nd=new WeakMap,oc=new WeakMap,Fd=new WeakMap,$d=new WeakMap,no=new WeakMap,Kn=new WeakMap,ac=new WeakMap,Bd=new WeakMap,he=new WeakSet,zg=function(){const t=document.createElement("div"),e=c(this,Kn)._signal;t.addEventListener("contextmenu",ni,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,i]of c(this,Kn).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",c(zs,Bd)[s]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=i,r.setAttribute("aria-selected",i===c(this,rc)),r.addEventListener("click",x(this,he,Wg).bind(this,i),{signal:e}),t.append(r)}return t.addEventListener("keydown",x(this,he,Kg).bind(this),{signal:e}),t},Wg=function(t,e){e.stopPropagation(),c(this,$d).dispatch("switchannotationeditorparams",{source:this,type:c(this,ac),value:t})},Kg=function(t){zs._keyboardManager.exec(this,t)},Po=function(t){if(c(this,he,Rr)){this.hideDropdown();return}if(y(this,Nd,t.detail===0),c(this,no)||(y(this,no,new AbortController),window.addEventListener("pointerdown",x(this,he,Qb).bind(this),{signal:c(this,Kn).combinedSignal(c(this,no))})),c(this,Xe)){c(this,Xe).classList.remove("hidden");return}const e=y(this,Xe,x(this,he,zg).call(this));c(this,Wn).append(e)},Qb=function(t){var e;(e=c(this,Xe))!=null&&e.contains(t.target)||this.hideDropdown()},Rr=function(){return c(this,Xe)&&!c(this,Xe).classList.contains("hidden")},A(zs,Bd,null);let df=zs;var lc,jd,ar,_a,cc,Xs,Hd,Ud,ka,xn,on,as,uc,lr,bs,dc,Sn,Vd,Ut,Xg,Hh,qb,tw,ew,Yg,Ro,Tn,ll,sw,Uh,Yc,nw,iw,rw,ow,aw;const ee=class ee extends ke{constructor(e){super({...e,name:"highlightEditor"});A(this,Ut);A(this,lc,null);A(this,jd,0);A(this,ar);A(this,_a,null);A(this,cc,null);A(this,Xs,null);A(this,Hd,null);A(this,Ud,0);A(this,ka,null);A(this,xn,null);A(this,on,null);A(this,as,!1);A(this,uc,null);A(this,lr);A(this,bs,null);A(this,dc,"");A(this,Sn);A(this,Vd,"");this.color=e.color||ee._defaultColor,y(this,Sn,e.thickness||ee._defaultThickness),y(this,lr,e.opacity||ee._defaultOpacity),y(this,ar,e.boxes||null),y(this,Vd,e.methodOfCreation||""),y(this,dc,e.text||""),this._isDraggable=!1,e.highlightId>-1?(y(this,as,!0),x(this,Ut,Hh).call(this,e),x(this,Ut,Ro).call(this)):c(this,ar)&&(y(this,lc,e.anchorNode),y(this,jd,e.anchorOffset),y(this,Hd,e.focusNode),y(this,Ud,e.focusOffset),x(this,Ut,Xg).call(this),x(this,Ut,Ro).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=ee.prototype;return Yt(this,"_keyboardManager",new th([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,as)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(this,Sn),methodOfCreation:c(this,Vd)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,s){var i;ke.initialize(e,s),ee._defaultColor||(ee._defaultColor=((i=s.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(e,s){switch(e){case Jt.HIGHLIGHT_DEFAULT_COLOR:ee._defaultColor=s;break;case Jt.HIGHLIGHT_THICKNESS:ee._defaultThickness=s;break}}translateInPage(e,s){}get toolbarPosition(){return c(this,uc)}updateParams(e,s){switch(e){case Jt.HIGHLIGHT_COLOR:x(this,Ut,qb).call(this,s);break;case Jt.HIGHLIGHT_THICKNESS:x(this,Ut,tw).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Jt.HIGHLIGHT_DEFAULT_COLOR,ee._defaultColor],[Jt.HIGHLIGHT_THICKNESS,ee._defaultThickness]]}get propertiesToUpdate(){return[[Jt.HIGHLIGHT_COLOR,this.color||ee._defaultColor],[Jt.HIGHLIGHT_THICKNESS,c(this,Sn)||ee._defaultThickness],[Jt.HIGHLIGHT_FREE,c(this,as)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(y(this,cc,new df({editor:this})),e.addColorPicker(c(this,cc))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(x(this,Ut,Yc).call(this))}getBaseTranslation(){return[0,0]}getRect(e,s){return super.getRect(e,s,x(this,Ut,Yc).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){x(this,Ut,Yg).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(x(this,Ut,Ro).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let s=!1;this.parent&&!e?x(this,Ut,Yg).call(this):e&&(x(this,Ut,Ro).call(this,e),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),s&&this.select()}rotate(e){var r,o,a;const{drawLayer:s}=this.parent;let i;c(this,as)?(e=(e-this.rotation+360)%360,i=x(r=ee,Tn,ll).call(r,c(this,xn).box,e)):i=x(o=ee,Tn,ll).call(o,[this.x,this.y,this.width,this.height],e),s.updateProperties(c(this,on),{bbox:i,root:{"data-main-rotation":e}}),s.updateProperties(c(this,bs),{bbox:x(a=ee,Tn,ll).call(a,c(this,Xs).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();c(this,dc)&&(e.setAttribute("aria-label",c(this,dc)),e.setAttribute("role","mark")),c(this,as)?e.classList.add("free"):this.div.addEventListener("keydown",x(this,Ut,sw).bind(this),{signal:this._uiManager._signal});const s=y(this,ka,document.createElement("div"));e.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=c(this,_a);const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),af(this,c(this,ka),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,bs),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,bs),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:x(this,Ut,Uh).call(this,!0);break;case 1:case 3:x(this,Ut,Uh).call(this,!1);break}}select(){var e;super.select(),c(this,bs)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,bs),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),c(this,bs)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,bs),{rootClass:{selected:!1}}),c(this,as)||x(this,Ut,Uh).call(this,!1))}get _mustFixPosition(){return!c(this,as)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(c(this,on),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(c(this,bs),{rootClass:{hidden:!e}}))}static startHighlighting(e,s,{target:i,x:r,y:o}){const{x:a,y:l,width:u,height:d}=i.getBoundingClientRect(),h=new AbortController,f=e.combinedSignal(h),p=g=>{h.abort(),x(this,Tn,ow).call(this,e,g)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",fn,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",ni,{signal:f}),i.addEventListener("pointermove",x(this,Tn,rw).bind(this,e),{signal:f}),this._freeHighlight=new Gg({x:r,y:o},[a,l,u,d],e.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,s,i){var m,w,b,S;let r=null;if(e instanceof Lb){const{data:{quadPoints:C,rect:T,rotation:_,id:R,color:M,opacity:N,popupRef:I},parent:{page:{pageNumber:G}}}=e;r=e={annotationType:Gt.HIGHLIGHT,color:Array.from(M),opacity:N,quadPoints:C,boxes:null,pageIndex:G-1,rect:T.slice(0),rotation:_,id:R,deleted:!1,popupRef:I}}else if(e instanceof Vv){const{data:{inkLists:C,rect:T,rotation:_,id:R,color:M,borderStyle:{rawWidth:N},popupRef:I},parent:{page:{pageNumber:G}}}=e;r=e={annotationType:Gt.HIGHLIGHT,color:Array.from(M),thickness:N,inkLists:C,boxes:null,pageIndex:G-1,rect:T.slice(0),rotation:_,id:R,deleted:!1,popupRef:I}}const{color:o,quadPoints:a,inkLists:l,opacity:u}=e,d=await super.deserialize(e,s,i);d.color=Pt.makeHexColor(...o),y(d,lr,u||1),l&&y(d,Sn,e.thickness),d.annotationElementId=e.id||null,d._initialData=r;const[h,f]=d.pageDimensions,[p,g]=d.pageTranslation;if(a){const C=y(d,ar,[]);for(let T=0;T<a.length;T+=8)C.push({x:(a[T]-p)/h,y:1-(a[T+1]-g)/f,width:(a[T+2]-a[T])/h,height:(a[T+1]-a[T+5])/f});x(m=d,Ut,Xg).call(m),x(w=d,Ut,Ro).call(w),d.rotate(d.rotation)}else if(l){y(d,as,!0);const C=l[0],T={x:C[0]-p,y:f-(C[1]-g)},_=new Gg(T,[0,0,h,f],1,c(d,Sn)/2,!0,.001);for(let N=0,I=C.length;N<I;N+=2)T.x=C[N]-p,T.y=f-(C[N+1]-g),_.add(T);const{id:R,clipPathId:M}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);x(b=d,Ut,Hh).call(b,{highlightOutlines:_.getOutlines(),highlightId:R,clipPathId:M}),x(S=d,Ut,Ro).call(S)}return d}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),i=ke._colorManager.convert(this.color),r={annotationType:Gt.HIGHLIGHT,color:i,opacity:c(this,lr),thickness:c(this,Sn),quadPoints:x(this,Ut,nw).call(this),outlines:x(this,Ut,iw).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:x(this,Ut,Yc).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!x(this,Ut,aw).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};lc=new WeakMap,jd=new WeakMap,ar=new WeakMap,_a=new WeakMap,cc=new WeakMap,Xs=new WeakMap,Hd=new WeakMap,Ud=new WeakMap,ka=new WeakMap,xn=new WeakMap,on=new WeakMap,as=new WeakMap,uc=new WeakMap,lr=new WeakMap,bs=new WeakMap,dc=new WeakMap,Sn=new WeakMap,Vd=new WeakMap,Ut=new WeakSet,Xg=function(){const e=new Ug(c(this,ar),.001);y(this,xn,e.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,xn).box;const s=new Ug(c(this,ar),.0025,.001,this._uiManager.direction==="ltr");y(this,Xs,s.getOutlines());const{lastPoint:i}=c(this,Xs);y(this,uc,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},Hh=function({highlightOutlines:e,highlightId:s,clipPathId:i}){var h,f;if(y(this,xn,e),y(this,Xs,e.getNewOutline(c(this,Sn)/2+1.5,.0025)),s>=0)y(this,on,s),y(this,_a,i),this.parent.drawLayer.finalizeDraw(s,{bbox:e.box,path:{d:e.toSVGPath()}}),y(this,bs,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,Xs).box,path:{d:c(this,Xs).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,on),{bbox:x(h=ee,Tn,ll).call(h,c(this,xn).box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,bs),{bbox:x(f=ee,Tn,ll).call(f,c(this,Xs).box,p),path:{d:c(this,Xs).toSVGPath()}})}const[o,a,l,u]=e.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=u;break;case 90:{const[p,g]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*g/p,this.height=u*p/g;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=u;break;case 270:{const[p,g]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*g/p,this.height=u*p/g;break}}const{lastPoint:d}=c(this,Xs);y(this,uc,[(d[0]-o)/l,(d[1]-a)/u])},qb=function(e){const s=(o,a)=>{var l,u;this.color=o,y(this,lr,a),(l=this.parent)==null||l.drawLayer.updateProperties(c(this,on),{root:{fill:o,"fill-opacity":a}}),(u=c(this,cc))==null||u.updateColor(o)},i=this.color,r=c(this,lr);this.addCommands({cmd:s.bind(this,e,ee._defaultOpacity),undo:s.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Jt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},tw=function(e){const s=c(this,Sn),i=r=>{y(this,Sn,r),x(this,Ut,ew).call(this,r)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Jt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},ew=function(e){if(!c(this,as))return;x(this,Ut,Hh).call(this,{highlightOutlines:c(this,xn).getNewOutline(e/2)}),this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)},Yg=function(){c(this,on)===null||!this.parent||(this.parent.drawLayer.remove(c(this,on)),y(this,on,null),this.parent.drawLayer.remove(c(this,bs)),y(this,bs,null))},Ro=function(e=this.parent){c(this,on)===null&&({id:Ts(this,on)._,clipPathId:Ts(this,_a)._}=e.drawLayer.draw({bbox:c(this,xn).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":c(this,lr)},rootClass:{highlight:!0,free:c(this,as)},path:{d:c(this,xn).toSVGPath()}},!1,!0),y(this,bs,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,as)},bbox:c(this,Xs).box,path:{d:c(this,Xs).toSVGPath()}},c(this,as))),c(this,ka)&&(c(this,ka).style.clipPath=c(this,_a)))},Tn=new WeakSet,ll=function([e,s,i,r],o){switch(o){case 90:return[1-s-r,e,r,i];case 180:return[1-e-i,1-s-r,i,r];case 270:return[s,1-e-i,r,i]}return[e,s,i,r]},sw=function(e){ee._keyboardManager.exec(this,e)},Uh=function(e){if(!c(this,lc))return;const s=window.getSelection();e?s.setPosition(c(this,lc),c(this,jd)):s.setPosition(c(this,Hd),c(this,Ud))},Yc=function(){return c(this,as)?this.rotation:0},nw=function(){if(c(this,as))return null;const[e,s]=this.pageDimensions,[i,r]=this.pageTranslation,o=c(this,ar),a=new Float32Array(o.length*8);let l=0;for(const{x:u,y:d,width:h,height:f}of o){const p=u*e+i,g=(1-d)*s+r;a[l]=a[l+4]=p,a[l+1]=a[l+3]=g,a[l+2]=a[l+6]=p+h*e,a[l+5]=a[l+7]=g-f*s,l+=8}return a},iw=function(e){return c(this,xn).serialize(e,x(this,Ut,Yc).call(this))},rw=function(e,s){this._freeHighlight.add(s)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},ow=function(e,s){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},aw=function(e){const{color:s}=this._initialData;return e.color.some((i,r)=>i!==s[r])},A(ee,Tn),kt(ee,"_defaultColor",null),kt(ee,"_defaultOpacity",1),kt(ee,"_defaultThickness",12),kt(ee,"_type","highlight"),kt(ee,"_editorType",Gt.HIGHLIGHT),kt(ee,"_freeHighlightId",-1),kt(ee,"_freeHighlight",null),kt(ee,"_freeHighlightClipId","");let hf=ee;var Ta;class jk{constructor(){A(this,Ta,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,s]of Object.entries(t))this.updateProperty(e,s)}updateSVGProperty(t,e){c(this,Ta)[t]=e}toSVGProperties(){const t=c(this,Ta);return y(this,Ta,Object.create(null)),{root:t}}reset(){y(this,Ta,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){ye("Not implemented")}}Ta=new WeakMap;var an,hc,es,Pa,Ra,io,ro,oo,Ia,qt,Zg,Qg,qg,Jc,lw,Vh,Zc,cl;const St=class St extends ke{constructor(e){super(e);A(this,qt);A(this,an,null);A(this,hc);kt(this,"_drawId",null);y(this,hc,e.mustBeCommitted||!1),e.drawOutlines&&(x(this,qt,Zg).call(this,e),x(this,qt,Jc).call(this))}static _mergeSVGProperties(e,s){const i=new Set(Object.keys(e));for(const[r,o]of Object.entries(s))i.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){ye("Not implemented")}static get typesMap(){ye("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,s){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,s),this._currentParent&&(c(St,es).updateProperty(i,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,s){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,s)}static get defaultPropertiesToUpdate(){const e=[],s=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)e.push([i,s[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:s}=this;for(const[i,r]of this.constructor.typesMap)e.push([i,s[r]]);return e}_updateProperty(e,s,i){const r=this._drawingOptions,o=r[s],a=l=>{var d;r.updateProperty(s,l);const u=c(this,an).updateProperty(s,l);u&&x(this,qt,Zc).call(this,u),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,St._mergeSVGProperties(c(this,an).getPathResizingSVGProperties(x(this,qt,Vh).call(this)),{bbox:x(this,qt,cl).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,St._mergeSVGProperties(c(this,an).getPathResizedSVGProperties(x(this,qt,Vh).call(this)),{bbox:x(this,qt,cl).call(this)}))}_onTranslating(e,s){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:x(this,qt,cl).call(this,e,s)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,St._mergeSVGProperties(c(this,an).getPathTranslatedSVGProperties(x(this,qt,Vh).call(this),this.parentDimensions),{bbox:x(this,qt,cl).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,hc)&&(y(this,hc,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){x(this,qt,qg).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(x(this,qt,Jc).call(this),x(this,qt,Zc).call(this,c(this,an).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let s=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),x(this,qt,qg).call(this)):e&&(this._uiManager.addShouldRescale(this),x(this,qt,Jc).call(this,e),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,St._mergeSVGProperties({bbox:x(this,qt,cl).call(this)},c(this,an).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&x(this,qt,Zc).call(this,c(this,an).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const s=document.createElement("div");e.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,s,i,r,o){ye("Not implemented")}static startDrawing(e,s,i,r){var w;const{target:o,offsetX:a,offsetY:l,pointerId:u,pointerType:d}=r;if(c(St,ro)&&c(St,ro)!==d)return;const{viewport:{rotation:h}}=e,{width:f,height:p}=o.getBoundingClientRect(),g=y(St,Pa,new AbortController),m=e.combinedSignal(g);if(c(St,io)||y(St,io,u),c(St,ro)??y(St,ro,d),window.addEventListener("pointerup",b=>{var S;c(St,io)===b.pointerId?this._endDraw(b):(S=c(St,oo))==null||S.delete(b.pointerId)},{signal:m}),window.addEventListener("pointercancel",b=>{var S;c(St,io)===b.pointerId?this._currentParent.endDrawingSession():(S=c(St,oo))==null||S.delete(b.pointerId)},{signal:m}),window.addEventListener("pointerdown",b=>{c(St,ro)===b.pointerType&&((c(St,oo)||y(St,oo,new Set)).add(b.pointerId),c(St,es).isCancellable()&&(c(St,es).removeLastElement(),c(St,es).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",ni,{signal:m}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:m}),o.addEventListener("touchmove",b=>{b.timeStamp===c(St,Ia)&&fn(b)},{signal:m}),e.toggleDrawing(),(w=s._editorUndoBar)==null||w.hide(),c(St,es)){e.drawLayer.updateProperties(this._currentDrawId,c(St,es).startNew(a,l,f,p,h));return}s.updateUIForDefaultProperties(this),y(St,es,this.createDrawerInstance(a,l,f,p,h)),y(St,Ra,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(c(St,Ra).toSVGProperties(),c(St,es).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(y(St,Ia,-1),!c(St,es))return;const{offsetX:s,offsetY:i,pointerId:r}=e;if(c(St,io)===r){if(((o=c(St,oo))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(St,es).add(s,i)),y(St,Ia,e.timeStamp),fn(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,y(St,es,null),y(St,Ra,null),y(St,ro,null),y(St,Ia,NaN)),c(St,Pa)&&(c(St,Pa).abort(),y(St,Pa,null),y(St,io,NaN),y(St,oo,null))}static _endDraw(e){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),e&&s.drawLayer.updateProperties(this._currentDrawId,c(St,es).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=c(St,es),r=this._currentDrawId,o=i.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,i.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:Jt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(Jt.DRAW_STEP),!c(St,es).isEmpty()){const{pageDimensions:[i,r],scale:o}=s,a=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(St,es).getOutlines(i*o,r*o,o,this._INNER_MARGIN),drawingOptions:c(St,Ra),mustBeCommitted:!e});return this._cleanup(!0),a}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,s,i,r,o,a){ye("Not implemented")}static async deserialize(e,s,i){var h,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}=s.viewport,u=this.deserializeDraw(a,l,r,o,this._INNER_MARGIN,e),d=await super.deserialize(e,s,i);return d.createDrawingOptions(e),x(h=d,qt,Zg).call(h,{drawOutlines:u}),x(f=d,qt,Jc).call(f),d.onScaleChanging(),d.rotate(),d}serializeDraw(e){const[s,i]=this.pageTranslation,[r,o]=this.pageDimensions;return c(this,an).serialize([s,i,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};an=new WeakMap,hc=new WeakMap,es=new WeakMap,Pa=new WeakMap,Ra=new WeakMap,io=new WeakMap,ro=new WeakMap,oo=new WeakMap,Ia=new WeakMap,qt=new WeakSet,Zg=function({drawOutlines:e,drawId:s,drawingOptions:i}){y(this,an,e),this._drawingOptions||(this._drawingOptions=i),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,e.defaultProperties)):this._drawId=x(this,qt,Qg).call(this,e,this.parent),x(this,qt,Zc).call(this,e.box)},Qg=function(e,s){const{id:i}=s.drawLayer.draw(St._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i},qg=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Jc=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=x(this,qt,Qg).call(this,c(this,an),e)}},lw=function([e,s,i,r]){const{parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[s,1-e,i*(a/o),r*(o/a)];case 180:return[1-e,1-s,i,r];case 270:return[1-s,e,i*(a/o),r*(o/a)];default:return[e,s,i,r]}},Vh=function(){const{x:e,y:s,width:i,height:r,parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[1-s,e,i*(o/a),r*(a/o)];case 180:return[1-e,1-s,i,r];case 270:return[s,1-e,i*(o/a),r*(a/o)];default:return[e,s,i,r]}},Zc=function(e){if([this.x,this.y,this.width,this.height]=x(this,qt,lw).call(this,e),this.div){this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)}this._onResized()},cl=function(){const{x:e,y:s,width:i,height:r,rotation:o,parentRotation:a,parentDimensions:[l,u]}=this;switch((o*4+a)/90){case 1:return[1-s-r,e,r,i];case 2:return[1-e-i,1-s-r,i,r];case 3:return[s,1-e-i,r,i];case 4:return[e,s-i*(l/u),r*(u/l),i*(l/u)];case 5:return[1-s,e,i*(l/u),r*(u/l)];case 6:return[1-e-r*(u/l),1-s,r*(u/l),i*(l/u)];case 7:return[s-i*(l/u),1-e-r*(u/l),i*(l/u),r*(u/l)];case 8:return[e-i,s-r,i,r];case 9:return[1-s,e-i,r,i];case 10:return[1-e,1-s,i,r];case 11:return[s-r,1-e,r,i];case 12:return[e-r*(u/l),s,r*(u/l),i*(l/u)];case 13:return[1-s-i*(l/u),e-r*(u/l),i*(l/u),r*(u/l)];case 14:return[1-e,1-s-i*(l/u),r*(u/l),i*(l/u)];case 15:return[s,1-e,i*(l/u),r*(u/l)];default:return[e,s,i,r]}},kt(St,"_currentDrawId",-1),kt(St,"_currentParent",null),A(St,es,null),A(St,Pa,null),A(St,Ra,null),A(St,io,NaN),A(St,ro,null),A(St,oo,null),A(St,Ia,NaN),kt(St,"_INNER_MARGIN",3);let Jg=St;var xi,ss,ns,Ma,fc,Ls,ls,En,La,Oa,Da,pc,Gh;class Hk{constructor(t,e,s,i,r,o){A(this,pc);A(this,xi,new Float64Array(6));A(this,ss);A(this,ns);A(this,Ma);A(this,fc);A(this,Ls);A(this,ls,"");A(this,En,0);A(this,La,new ff);A(this,Oa);A(this,Da);y(this,Oa,s),y(this,Da,i),y(this,Ma,r),y(this,fc,o),[t,e]=x(this,pc,Gh).call(this,t,e);const a=y(this,ss,[NaN,NaN,NaN,NaN,t,e]);y(this,Ls,[t,e]),y(this,ns,[{line:a,points:c(this,Ls)}]),c(this,xi).set(a,0)}updateProperty(t,e){t==="stroke-width"&&y(this,fc,e)}isEmpty(){return!c(this,ns)||c(this,ns).length===0}isCancellable(){return c(this,Ls).length<=10}add(t,e){[t,e]=x(this,pc,Gh).call(this,t,e);const[s,i,r,o]=c(this,xi).subarray(2,6),a=t-r,l=e-o;return Math.hypot(c(this,Oa)*a,c(this,Da)*l)<=2?null:(c(this,Ls).push(t,e),isNaN(s)?(c(this,xi).set([r,o,t,e],2),c(this,ss).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(c(this,xi)[0])&&c(this,ss).splice(6,6),c(this,xi).set([s,i,r,o,t,e],0),c(this,ss).push(...xt.createBezierPoints(s,i,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const s=this.add(t,e);return s||(c(this,Ls).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,s,i,r){y(this,Oa,s),y(this,Da,i),y(this,Ma,r),[t,e]=x(this,pc,Gh).call(this,t,e);const o=y(this,ss,[NaN,NaN,NaN,NaN,t,e]);y(this,Ls,[t,e]);const a=c(this,ns).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),c(this,ns).push({line:o,points:c(this,Ls)}),c(this,xi).set(o,0),y(this,En,0),this.toSVGPath(),null}getLastElement(){return c(this,ns).at(-1)}setLastElement(t){return c(this,ns)?(c(this,ns).push(t),y(this,ss,t.line),y(this,Ls,t.points),y(this,En,0),{path:{d:this.toSVGPath()}}):c(this,La).setLastElement(t)}removeLastElement(){if(!c(this,ns))return c(this,La).removeLastElement();c(this,ns).pop(),y(this,ls,"");for(let t=0,e=c(this,ns).length;t<e;t++){const{line:s,points:i}=c(this,ns)[t];y(this,ss,s),y(this,Ls,i),y(this,En,0),this.toSVGPath()}return{path:{d:c(this,ls)}}}toSVGPath(){const t=xt.svgRound(c(this,ss)[4]),e=xt.svgRound(c(this,ss)[5]);if(c(this,Ls).length===2)return y(this,ls,`${c(this,ls)} M ${t} ${e} Z`),c(this,ls);if(c(this,Ls).length<=6){const i=c(this,ls).lastIndexOf("M");y(this,ls,`${c(this,ls).slice(0,i)} M ${t} ${e}`),y(this,En,6)}if(c(this,Ls).length===4){const i=xt.svgRound(c(this,ss)[10]),r=xt.svgRound(c(this,ss)[11]);return y(this,ls,`${c(this,ls)} L ${i} ${r}`),y(this,En,12),c(this,ls)}const s=[];c(this,En)===0&&(s.push(`M ${t} ${e}`),y(this,En,6));for(let i=c(this,En),r=c(this,ss).length;i<r;i+=6){const[o,a,l,u,d,h]=c(this,ss).slice(i,i+6).map(xt.svgRound);s.push(`C${o} ${a} ${l} ${u} ${d} ${h}`)}return y(this,ls,c(this,ls)+s.join(" ")),y(this,En,c(this,ss).length),c(this,ls)}getOutlines(t,e,s,i){const r=c(this,ns).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),c(this,La).build(c(this,ns),t,e,s,c(this,Ma),c(this,fc),i),y(this,xi,null),y(this,ss,null),y(this,ns,null),y(this,ls,null),c(this,La)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}xi=new WeakMap,ss=new WeakMap,ns=new WeakMap,Ma=new WeakMap,fc=new WeakMap,Ls=new WeakMap,ls=new WeakMap,En=new WeakMap,La=new WeakMap,Oa=new WeakMap,Da=new WeakMap,pc=new WeakSet,Gh=function(t,e){return xt._normalizePoint(t,e,c(this,Oa),c(this,Da),c(this,Ma))};var Os,Gd,zd,ln,Si,Ei,gc,vc,mc,us,Fi,cw,uw,dw;const Xv=class Xv extends xt{constructor(){super(...arguments);A(this,us);A(this,Os);A(this,Gd,0);A(this,zd);A(this,ln);A(this,Si);A(this,Ei);A(this,gc);A(this,vc);A(this,mc)}build(e,s,i,r,o,a,l){y(this,Si,s),y(this,Ei,i),y(this,gc,r),y(this,vc,o),y(this,mc,a),y(this,zd,l??0),y(this,ln,e),x(this,us,uw).call(this)}setLastElement(e){return c(this,ln).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,ln).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:s}of c(this,ln)){if(e.push(`M${xt.svgRound(s[4])} ${xt.svgRound(s[5])}`),s.length===6){e.push("Z");continue}if(s.length===12){e.push(`L${xt.svgRound(s[10])} ${xt.svgRound(s[11])}`);continue}for(let i=6,r=s.length;i<r;i+=6){const[o,a,l,u,d,h]=s.subarray(i,i+6).map(xt.svgRound);e.push(`C${o} ${a} ${l} ${u} ${d} ${h}`)}}return e.join("")}serialize([e,s,i,r],o){const a=[],l=[],[u,d,h,f]=x(this,us,cw).call(this);let p,g,m,w,b,S,C,T,_;switch(c(this,vc)){case 0:_=xt._rescale,p=e,g=s+r,m=i,w=-r,b=e+u*i,S=s+(1-d-f)*r,C=e+(u+h)*i,T=s+(1-d)*r;break;case 90:_=xt._rescaleAndSwap,p=e,g=s,m=i,w=r,b=e+d*i,S=s+u*r,C=e+(d+f)*i,T=s+(u+h)*r;break;case 180:_=xt._rescale,p=e+i,g=s,m=-i,w=r,b=e+(1-u-h)*i,S=s+d*r,C=e+(1-u)*i,T=s+(d+f)*r;break;case 270:_=xt._rescaleAndSwap,p=e+i,g=s+r,m=-i,w=-r,b=e+(1-d-f)*i,S=s+(1-u-h)*r,C=e+(1-d)*i,T=s+(1-u)*r;break}for(const{line:R,points:M}of c(this,ln))a.push(_(R,p,g,m,w,o?new Array(R.length):null)),l.push(_(M,p,g,m,w,o?new Array(M.length):null));return{lines:a,points:l,rect:[b,S,C,T]}}static deserialize(e,s,i,r,o,{paths:{lines:a,points:l},rotation:u,thickness:d}){const h=[];let f,p,g,m,w;switch(u){case 0:w=xt._rescale,f=-e/i,p=s/r+1,g=1/i,m=-1/r;break;case 90:w=xt._rescaleAndSwap,f=-s/r,p=-e/i,g=1/r,m=1/i;break;case 180:w=xt._rescale,f=e/i+1,p=-s/r,g=-1/i,m=1/r;break;case 270:w=xt._rescaleAndSwap,f=s/r+1,p=e/i+1,g=-1/r,m=-1/i;break}if(!a){a=[];for(const S of l){const C=S.length;if(C===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1]]));continue}if(C===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1],NaN,NaN,NaN,NaN,S[2],S[3]]));continue}const T=new Float32Array(3*(C-2));a.push(T);let[_,R,M,N]=S.subarray(0,4);T.set([NaN,NaN,NaN,NaN,_,R],0);for(let I=4;I<C;I+=2){const G=S[I],X=S[I+1];T.set(xt.createBezierPoints(_,R,M,N,G,X),(I-2)*3),[_,R,M,N]=[M,N,G,X]}}}for(let S=0,C=a.length;S<C;S++)h.push({line:w(a[S].map(T=>T??NaN),f,p,g,m),points:w(l[S].map(T=>T??NaN),f,p,g,m)});const b=new Xv;return b.build(h,i,r,1,u,d,o),b}get box(){return c(this,Os)}updateProperty(e,s){return e==="stroke-width"?x(this,us,dw).call(this,s):null}updateParentDimensions([e,s],i){const[r,o]=x(this,us,Fi).call(this);y(this,Si,e),y(this,Ei,s),y(this,gc,i);const[a,l]=x(this,us,Fi).call(this),u=a-r,d=l-o,h=c(this,Os);return h[0]-=u,h[1]-=d,h[2]+=2*u,h[3]+=2*d,h}updateRotation(e){return y(this,Gd,e),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,Os).map(xt.svgRound).join(" ")}get defaultProperties(){const[e,s]=c(this,Os);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${xt.svgRound(e)} ${xt.svgRound(s)}`}}}get rotationTransform(){const[,,e,s]=c(this,Os);let i=0,r=0,o=0,a=0,l=0,u=0;switch(c(this,Gd)){case 90:r=s/e,o=-e/s,l=e;break;case 180:i=-1,a=-1,l=e,u=s;break;case 270:r=-s/e,o=e/s,u=s;break;default:return""}return`matrix(${i} ${r} ${o} ${a} ${xt.svgRound(l)} ${xt.svgRound(u)})`}getPathResizingSVGProperties([e,s,i,r]){const[o,a]=x(this,us,Fi).call(this),[l,u,d,h]=c(this,Os);if(Math.abs(d-o)<=xt.PRECISION||Math.abs(h-a)<=xt.PRECISION){const w=e+i/2-(l+d/2),b=s+r/2-(u+h/2);return{path:{"transform-origin":`${xt.svgRound(e)} ${xt.svgRound(s)}`,transform:`${this.rotationTransform} translate(${w} ${b})`}}}const f=(i-2*o)/(d-2*o),p=(r-2*a)/(h-2*a),g=d/i,m=h/r;return{path:{"transform-origin":`${xt.svgRound(l)} ${xt.svgRound(u)}`,transform:`${this.rotationTransform} scale(${g} ${m}) translate(${xt.svgRound(o)} ${xt.svgRound(a)}) scale(${f} ${p}) translate(${xt.svgRound(-o)} ${xt.svgRound(-a)})`}}}getPathResizedSVGProperties([e,s,i,r]){const[o,a]=x(this,us,Fi).call(this),l=c(this,Os),[u,d,h,f]=l;if(l[0]=e,l[1]=s,l[2]=i,l[3]=r,Math.abs(h-o)<=xt.PRECISION||Math.abs(f-a)<=xt.PRECISION){const b=e+i/2-(u+h/2),S=s+r/2-(d+f/2);for(const{line:C,points:T}of c(this,ln))xt._translate(C,b,S,C),xt._translate(T,b,S,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${xt.svgRound(e)} ${xt.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(i-2*o)/(h-2*o),g=(r-2*a)/(f-2*a),m=-p*(u+o)+e+o,w=-g*(d+a)+s+a;if(p!==1||g!==1||m!==0||w!==0)for(const{line:b,points:S}of c(this,ln))xt._rescale(b,m,w,p,g,b),xt._rescale(S,m,w,p,g,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${xt.svgRound(e)} ${xt.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,s],i){const[r,o]=i,a=c(this,Os),l=e-a[0],u=s-a[1];if(c(this,Si)===r&&c(this,Ei)===o)for(const{line:d,points:h}of c(this,ln))xt._translate(d,l,u,d),xt._translate(h,l,u,h);else{const d=c(this,Si)/r,h=c(this,Ei)/o;y(this,Si,r),y(this,Ei,o);for(const{line:f,points:p}of c(this,ln))xt._rescale(f,l,u,d,h,f),xt._rescale(p,l,u,d,h,p);a[2]*=d,a[3]*=h}return a[0]=e,a[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${xt.svgRound(e)} ${xt.svgRound(s)}`}}}get defaultSVGProperties(){const e=c(this,Os);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${xt.svgRound(e[0])} ${xt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}};Os=new WeakMap,Gd=new WeakMap,zd=new WeakMap,ln=new WeakMap,Si=new WeakMap,Ei=new WeakMap,gc=new WeakMap,vc=new WeakMap,mc=new WeakMap,us=new WeakSet,Fi=function(e=c(this,mc)){const s=c(this,zd)+e/2*c(this,gc);return c(this,vc)%180===0?[s/c(this,Si),s/c(this,Ei)]:[s/c(this,Ei),s/c(this,Si)]},cw=function(){const[e,s,i,r]=c(this,Os),[o,a]=x(this,us,Fi).call(this,0);return[e+o,s+a,i-2*o,r-2*a]},uw=function(){const e=y(this,Os,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of c(this,ln)){if(r.length<=12){for(let l=4,u=r.length;l<u;l+=6){const[d,h]=r.subarray(l,l+2);e[0]=Math.min(e[0],d),e[1]=Math.min(e[1],h),e[2]=Math.max(e[2],d),e[3]=Math.max(e[3],h)}continue}let o=r[4],a=r[5];for(let l=6,u=r.length;l<u;l+=6){const[d,h,f,p,g,m]=r.subarray(l,l+6);Pt.bezierBoundingBox(o,a,d,h,f,p,g,m,e),o=g,a=m}}const[s,i]=x(this,us,Fi).call(this);e[0]=Math.min(1,Math.max(0,e[0]-s)),e[1]=Math.min(1,Math.max(0,e[1]-i)),e[2]=Math.min(1,Math.max(0,e[2]+s)),e[3]=Math.min(1,Math.max(0,e[3]+i)),e[2]-=e[0],e[3]-=e[1]},dw=function(e){const[s,i]=x(this,us,Fi).call(this);y(this,mc,e);const[r,o]=x(this,us,Fi).call(this),[a,l]=[r-s,o-i],u=c(this,Os);return u[0]-=a,u[1]-=l,u[2]+=2*a,u[3]+=2*l,u};let ff=Xv;var yc;const Yv=class Yv extends jk{constructor(e){super();A(this,yc);y(this,yc,e),super.updateProperties({fill:"none",stroke:ke._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,s){e==="stroke-width"&&(s??(s=this["stroke-width"]),s*=c(this,yc).realScale),super.updateSVGProperty(e,s)}clone(){const e=new Yv(c(this,yc));return e.updateAll(this),e}};yc=new WeakMap;let tv=Yv;var If,hw;const dl=class dl extends Jg{constructor(e){super({...e,name:"inkEditor"});A(this,If);this._willKeepAspectRatio=!0}static initialize(e,s){ke.initialize(e,s),this._defaultDrawingOptions=new tv(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return Yt(this,"typesMap",new Map([[Jt.INK_THICKNESS,"stroke-width"],[Jt.INK_COLOR,"stroke"],[Jt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,s,i,r,o){return new Hk(e,s,i,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,s,i,r,o,a){return ff.deserialize(e,s,i,r,o,a)}static async deserialize(e,s,i){let r=null;if(e instanceof Vv){const{data:{inkLists:a,rect:l,rotation:u,id:d,color:h,opacity:f,borderStyle:{rawWidth:p},popupRef:g},parent:{page:{pageNumber:m}}}=e;r=e={annotationType:Gt.INK,color:Array.from(h),thickness:p,opacity:f,paths:{points:a},boxes:null,pageIndex:m-1,rect:l.slice(0),rotation:u,id:d,deleted:!1,popupRef:g}}const o=await super.deserialize(e,s,i);return o.annotationElementId=e.id||null,o._initialData=r,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:s,parent:i}=this;s.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:s,opacity:i}){this._drawingOptions=dl.getDefaultDrawingOptions({stroke:Pt.makeHexColor(...e),"stroke-width":s,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:i,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":a,"stroke-width":l}}=this,u={annotationType:Gt.INK,color:ke._colorManager.convert(o),opacity:a,thickness:l,paths:{lines:s,points:i},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?u:this.annotationElementId&&!x(this,If,hw).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(e){const{points:s,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:s}),null}};If=new WeakSet,hw=function(e){const{color:s,thickness:i,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((a,l)=>a!==s[l])||e.thickness!==i||e.opacity!==r||e.pageIndex!==o},kt(dl,"_type","ink"),kt(dl,"_editorType",Gt.INK),kt(dl,"_defaultDrawingOptions",null);let ev=dl;var _e,cs,ao,cr,lo,bc,Ci,_i,cn,wc,te,Qc,qc,zh,nv,Wh,iv,Kh,fw;const uu=class uu extends ke{constructor(e){super({...e,name:"stampEditor"});A(this,te);A(this,_e,null);A(this,cs,null);A(this,ao,null);A(this,cr,null);A(this,lo,null);A(this,bc,"");A(this,Ci,null);A(this,_i,null);A(this,cn,!1);A(this,wc,!1);y(this,cr,e.bitmapUrl),y(this,lo,e.bitmapFile)}static initialize(e,s){ke.initialize(e,s)}static get supportedTypes(){return Yt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(s=>`image/${s}`))}static get supportedTypesStr(){return Yt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,s){s.pasteEditor(Gt.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const s=e.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(e=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:a}=e||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:r,width:o,height:a,channels:r.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),s&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var e;c(this,cs)&&(y(this,_e,null),this._uiManager.imageManager.deleteId(c(this,cs)),(e=c(this,Ci))==null||e.remove(),y(this,Ci,null),c(this,_i)&&(clearTimeout(c(this,_i)),y(this,_i,null))),super.remove()}rebuild(){if(!this.parent){c(this,cs)&&x(this,te,zh).call(this);return}super.rebuild(),this.div!==null&&(c(this,cs)&&c(this,Ci)===null&&x(this,te,zh).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(c(this,ao)||c(this,_e)||c(this,cr)||c(this,lo)||c(this,cs))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,s;if(this.width&&(e=this.x,s=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),c(this,_e)?x(this,te,nv).call(this):x(this,te,zh).call(this),this.width&&!this.annotationElementId){const[i,r]=this.parentDimensions;this.setAt(e*i,s*r,this.width*i,this.height*r)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,_i)!==null&&clearTimeout(c(this,_i)),y(this,_i,setTimeout(()=>{y(this,_i,null),x(this,te,iv).call(this)},200))}copyCanvas(e,s,i=!1){var p;e||(e=224);const{width:r,height:o}=c(this,_e),a=new tg;let l=c(this,_e),u=r,d=o,h=null;if(s){if(r>s||o>s){const N=Math.min(s/r,s/o);u=Math.floor(r*N),d=Math.floor(o*N)}h=document.createElement("canvas");const g=h.width=Math.ceil(u*a.sx),m=h.height=Math.ceil(d*a.sy);c(this,cn)||(l=x(this,te,Wh).call(this,g,m));const w=h.getContext("2d");w.filter=this._uiManager.hcmFilter;let b="white",S="#cfcfd8";this._uiManager.hcmFilter!=="none"?S="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(b="#8f8f9d",S="#42414d");const C=15,T=C*a.sx,_=C*a.sy,R=new OffscreenCanvas(T*2,_*2),M=R.getContext("2d");M.fillStyle=b,M.fillRect(0,0,T*2,_*2),M.fillStyle=S,M.fillRect(0,0,T,_),M.fillRect(T,_,T,_),w.fillStyle=w.createPattern(R,"repeat"),w.fillRect(0,0,g,m),w.drawImage(l,0,0,l.width,l.height,0,0,g,m)}let f=null;if(i){let g,m;if(a.symmetric&&l.width<e&&l.height<e)g=l.width,m=l.height;else if(l=c(this,_e),r>e||o>e){const S=Math.min(e/r,e/o);g=Math.floor(r*S),m=Math.floor(o*S),c(this,cn)||(l=x(this,te,Wh).call(this,g,m))}const b=new OffscreenCanvas(g,m).getContext("2d",{willReadFrequently:!0});b.drawImage(l,0,0,l.width,l.height,0,0,g,m),f={width:g,height:m,data:b.getImageData(0,0,g,m).data}}return{canvas:h,width:u,height:d,imageData:f}}getImageForAltText(){return c(this,Ci)}static async deserialize(e,s,i){var m;let r=null;if(e instanceof Ob){const{data:{rect:w,rotation:b,id:S,structParent:C,popupRef:T},container:_,parent:{page:{pageNumber:R}}}=e,M=_.querySelector("canvas"),N=i.imageManager.getFromCanvas(_.id,M);M.remove();const I=((m=await s._structTree.getAriaAttributes(`${Dv}${S}`))==null?void 0:m.get("aria-label"))||"";r=e={annotationType:Gt.STAMP,bitmapId:N.id,bitmap:N.bitmap,pageIndex:R-1,rect:w.slice(0),rotation:b,id:S,deleted:!1,accessibilityData:{decorative:!1,altText:I},isSvg:!1,structParent:C,popupRef:T}}const o=await super.deserialize(e,s,i),{rect:a,bitmap:l,bitmapUrl:u,bitmapId:d,isSvg:h,accessibilityData:f}=e;d&&i.imageManager.isValidId(d)?(y(o,cs,d),l&&y(o,_e,l)):y(o,cr,u),y(o,cn,h);const[p,g]=o.pageDimensions;return o.width=(a[2]-a[0])/p,o.height=(a[3]-a[1])/g,o.annotationElementId=e.id||null,f&&(o.altTextData=f),o._initialData=r,y(o,wc,!!r),o}serialize(e=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:Gt.STAMP,bitmapId:c(this,cs),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,cn),structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=x(this,te,Kh).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const l=x(this,te,fw).call(this,i);if(l.isSame)return null;l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,s===null)return i;s.stamps||(s.stamps=new Map);const a=c(this,cn)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!s.stamps.has(c(this,cs)))s.stamps.set(c(this,cs),{area:a,serialized:i}),i.bitmap=x(this,te,Kh).call(this,!1);else if(c(this,cn)){const l=s.stamps.get(c(this,cs));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=x(this,te,Kh).call(this,!1))}return i}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};_e=new WeakMap,cs=new WeakMap,ao=new WeakMap,cr=new WeakMap,lo=new WeakMap,bc=new WeakMap,Ci=new WeakMap,_i=new WeakMap,cn=new WeakMap,wc=new WeakMap,te=new WeakSet,Qc=function(e,s=!1){if(!e){this.remove();return}y(this,_e,e.bitmap),s||(y(this,cs,e.id),y(this,cn,e.isSvg)),e.file&&y(this,bc,e.file.name),x(this,te,nv).call(this)},qc=function(){if(y(this,ao,null),this._uiManager.enableWaiting(!1),!!c(this,Ci)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,_e)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,_e)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},zh=function(){if(c(this,cs)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,cs)).then(i=>x(this,te,Qc).call(this,i,!0)).finally(()=>x(this,te,qc).call(this));return}if(c(this,cr)){const i=c(this,cr);y(this,cr,null),this._uiManager.enableWaiting(!0),y(this,ao,this._uiManager.imageManager.getFromUrl(i).then(r=>x(this,te,Qc).call(this,r)).finally(()=>x(this,te,qc).call(this)));return}if(c(this,lo)){const i=c(this,lo);y(this,lo,null),this._uiManager.enableWaiting(!0),y(this,ao,this._uiManager.imageManager.getFromFile(i).then(r=>x(this,te,Qc).call(this,r)).finally(()=>x(this,te,qc).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=uu.supportedTypesStr;const s=this._uiManager._signal;y(this,ao,new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),x(this,te,Qc).call(this,r)}i()},{signal:s}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:s})}).finally(()=>x(this,te,qc).call(this))),e.click()},nv=function(){var h;const{div:e}=this;let{width:s,height:i}=c(this,_e);const[r,o]=this.pageDimensions,a=.75;if(this.width)s=this.width*r,i=this.height*o;else if(s>a*r||i>a*o){const f=Math.min(a*r/s,a*o/i);s*=f,i*=f}const[l,u]=this.parentDimensions;this.setDims(s*l/r,i*u/o),this._uiManager.enableWaiting(!1);const d=y(this,Ci,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),this.width=s/r,this.height=i/o,(h=this._initialOptions)!=null&&h.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),x(this,te,iv).call(this),c(this,wc)||(this.parent.addUndoableEditor(this),y(this,wc,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,bc)&&d.setAttribute("aria-label",c(this,bc))},Wh=function(e,s){const{width:i,height:r}=c(this,_e);let o=i,a=r,l=c(this,_e);for(;o>2*e||a>2*s;){const u=o,d=a;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*s&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const h=new OffscreenCanvas(o,a);h.getContext("2d").drawImage(l,0,0,u,d,0,0,o,a),l=h.transferToImageBitmap()}return l},iv=function(){const[e,s]=this.parentDimensions,{width:i,height:r}=this,o=new tg,a=Math.ceil(i*e*o.sx),l=Math.ceil(r*s*o.sy),u=c(this,Ci);if(!u||u.width===a&&u.height===l)return;u.width=a,u.height=l;const d=c(this,cn)?c(this,_e):x(this,te,Wh).call(this,a,l),h=u.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(d,0,0,d.width,d.height,0,0,a,l)},Kh=function(e){if(e){if(c(this,cn)){const r=this._uiManager.imageManager.getSvgUrl(c(this,cs));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=c(this,_e),s.getContext("2d").drawImage(c(this,_e),0,0),s.toDataURL()}if(c(this,cn)){const[s,i]=this.pageDimensions,r=Math.round(this.width*s*yo.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*yo.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,o);return a.getContext("2d").drawImage(c(this,_e),0,0,c(this,_e).width,c(this,_e).height,0,0,r,o),a.transferToImageBitmap()}return structuredClone(c(this,_e))},fw=function(e){var a;const{pageIndex:s,accessibilityData:{altText:i}}=this._initialData,r=e.pageIndex===s,o=(((a=e.accessibilityData)==null?void 0:a.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},kt(uu,"_type","stamp"),kt(uu,"_editorType",Gt.STAMP);let sv=uu;var Na,Ac,ki,co,ur,Cn,uo,xc,Fa,Xn,dr,ws,hr,Tt,ho,Ee,pw,ci,ov,av,Xh;const Nn=class Nn{constructor({uiManager:t,pageIndex:e,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:l,viewport:u,l10n:d}){A(this,Ee);A(this,Na);A(this,Ac,!1);A(this,ki,null);A(this,co,null);A(this,ur,null);A(this,Cn,new Map);A(this,uo,!1);A(this,xc,!1);A(this,Fa,!1);A(this,Xn,null);A(this,dr,null);A(this,ws,null);A(this,hr,null);A(this,Tt);const h=[...c(Nn,ho).values()];if(!Nn._initialized){Nn._initialized=!0;for(const f of h)f.initialize(d,t)}t.registerEditorTypes(h),y(this,Tt,t),this.pageIndex=e,this.div=s,y(this,Na,r),y(this,ki,o),this.viewport=u,y(this,ws,l),this.drawLayer=a,this._structTree=i,c(this,Tt).addLayer(this)}get isEmpty(){return c(this,Cn).size===0}get isInvisible(){return this.isEmpty&&c(this,Tt).getMode()===Gt.NONE}updateToolbar(t){c(this,Tt).updateToolbar(t)}updateMode(t=c(this,Tt).getMode()){switch(x(this,Ee,Xh).call(this),t){case Gt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Gt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Gt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const s of c(Nn,ho).values())e.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=c(this,ws))==null?void 0:e.div)}setEditingState(t){c(this,Tt).setEditingState(t)}addCommands(t){c(this,Tt).addCommands(t)}cleanUndoStack(t){c(this,Tt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=c(this,ki))==null||e.div.classList.toggle("disabled",!t)}async enable(){y(this,Fa,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const s of c(this,Cn).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(c(this,Tt).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!c(this,ki)){y(this,Fa,!1);return}const e=c(this,ki).getEditableAnnotations();for(const s of e){if(s.hide(),c(this,Tt).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}y(this,Fa,!1)}disable(){var i;y(this,xc,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of c(this,Cn).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(c(this,ki)){const r=c(this,ki).getEditableAnnotations();for(const o of r){const{id:a}=o.data;if(c(this,Tt).isDeletedAnnotationElement(a))continue;let l=e.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=t.get(a),l&&(c(this,Tt).addChangedExistingAnnotation(l),l.renderAnnotationElement(o)&&l.show(!1)),o.show()}}x(this,Ee,Xh).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of c(Nn,ho).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),y(this,xc,!1)}getEditableAnnotation(t){var e;return((e=c(this,ki))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){c(this,Tt).getActive()!==t&&c(this,Tt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=c(this,ws))!=null&&t.div&&!c(this,hr)){y(this,hr,new AbortController);const e=c(this,Tt).combinedSignal(c(this,hr));c(this,ws).div.addEventListener("pointerdown",x(this,Ee,pw).bind(this),{signal:e}),c(this,ws).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=c(this,ws))!=null&&t.div&&c(this,hr)&&(c(this,hr).abort(),y(this,hr,null),c(this,ws).div.classList.remove("highlighting"))}enableClick(){if(c(this,co))return;y(this,co,new AbortController);const t=c(this,Tt).combinedSignal(c(this,co));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=c(this,co))==null||t.abort(),y(this,co,null)}attach(t){c(this,Cn).set(t.id,t);const{annotationElementId:e}=t;e&&c(this,Tt).isDeletedAnnotationElement(e)&&c(this,Tt).removeDeletedAnnotationElement(t)}detach(t){var e;c(this,Cn).delete(t.id),(e=c(this,Na))==null||e.removePointerInTextLayer(t.contentDiv),!c(this,xc)&&t.annotationElementId&&c(this,Tt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),c(this,Tt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(c(this,Tt).addDeletedAnnotationElement(t.annotationElementId),ke.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),c(this,Tt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!c(this,Fa)),c(this,Tt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var s;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!c(this,ur)&&(t._focusEventsAllowed=!1,y(this,ur,setTimeout(()=>{y(this,ur,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:c(this,Tt)._signal}),e.focus())},0))),t._structTreeParentId=(s=c(this,Na))==null?void 0:s.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getNextId(){return c(this,Tt).getId()}combinedSignal(t){return c(this,Tt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=c(this,Ee,ci))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){c(this,Tt).updateToolbar(t),c(this,Tt).updateMode(t);const{offsetX:s,offsetY:i}=x(this,Ee,av).call(this),r=this.getNextId(),o=x(this,Ee,ov).call(this,{parent:this,id:r,x:s,y:i,uiManager:c(this,Tt),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=c(Nn,ho).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,c(this,Tt)))||null}createAndAddNewEditor(t,e,s={}){const i=this.getNextId(),r=x(this,Ee,ov).call(this,{parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:c(this,Tt),isCentered:e,...s});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(x(this,Ee,av).call(this),!0)}setSelected(t){c(this,Tt).setSelected(t)}toggleSelected(t){c(this,Tt).toggleSelected(t)}unselect(t){c(this,Tt).unselect(t)}pointerup(t){var s;const{isMac:e}=js.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&c(this,uo)&&(y(this,uo,!1),!((s=c(this,Ee,ci))!=null&&s.isDrawer&&c(this,Ee,ci).supportMultipleDrawings))){if(!c(this,Ac)){y(this,Ac,!0);return}if(c(this,Tt).getMode()===Gt.STAMP){c(this,Tt).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){var i;if(c(this,Tt).getMode()===Gt.HIGHLIGHT&&this.enableTextSelection(),c(this,uo)){y(this,uo,!1);return}const{isMac:e}=js.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(y(this,uo,!0),(i=c(this,Ee,ci))!=null&&i.isDrawer){this.startDrawingSession(t);return}const s=c(this,Tt).getActive();y(this,Ac,!s||s.isEmpty())}startDrawingSession(t){if(this.div.focus(),c(this,Xn)){c(this,Ee,ci).startDrawing(this,c(this,Tt),!1,t);return}c(this,Tt).setCurrentDrawingSession(this),y(this,Xn,new AbortController);const e=c(this,Tt).combinedSignal(c(this,Xn));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(y(this,dr,null),this.commitOrRemove())},{signal:e}),c(this,Ee,ci).startDrawing(this,c(this,Tt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&y(this,dr,e);return}c(this,dr)&&setTimeout(()=>{var e;(e=c(this,dr))==null||e.focus(),y(this,dr,null)},0)}endDrawingSession(t=!1){return c(this,Xn)?(c(this,Tt).setCurrentDrawingSession(null),c(this,Xn).abort(),y(this,Xn,null),y(this,dr,null),c(this,Ee,ci).endDrawing(t)):null}findNewParent(t,e,s){const i=c(this,Tt).findParent(e,s);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return c(this,Xn)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,Xn)&&c(this,Ee,ci).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=c(this,Tt).getActive())==null?void 0:t.parent)===this&&(c(this,Tt).commitOrRemove(),c(this,Tt).setActiveEditor(null)),c(this,ur)&&(clearTimeout(c(this,ur)),y(this,ur,null));for(const s of c(this,Cn).values())(e=c(this,Na))==null||e.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,c(this,Cn).clear(),c(this,Tt).removeLayer(this)}render({viewport:t}){this.viewport=t,Va(this.div,t);for(const e of c(this,Tt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){c(this,Tt).commitOrRemove(),x(this,Ee,Xh).call(this);const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,Va(this.div,{rotation:s}),e!==s)for(const i of c(this,Cn).values())i.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return c(this,Tt).viewParameters.realScale}};Na=new WeakMap,Ac=new WeakMap,ki=new WeakMap,co=new WeakMap,ur=new WeakMap,Cn=new WeakMap,uo=new WeakMap,xc=new WeakMap,Fa=new WeakMap,Xn=new WeakMap,dr=new WeakMap,ws=new WeakMap,hr=new WeakMap,Tt=new WeakMap,ho=new WeakMap,Ee=new WeakSet,pw=function(t){c(this,Tt).unselectAll();const{target:e}=t;if(e===c(this,ws).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&c(this,ws).div.contains(e)){const{isMac:s}=js.platform;if(t.button!==0||t.ctrlKey&&s)return;c(this,Tt).showAllEditors("highlight",!0,!0),c(this,ws).div.classList.add("free"),this.toggleDrawing(),hf.startHighlighting(this,c(this,Tt).direction==="ltr",{target:c(this,ws).div,x:t.x,y:t.y}),c(this,ws).div.addEventListener("pointerup",()=>{c(this,ws).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,Tt)._signal}),t.preventDefault()}},ci=function(){return c(Nn,ho).get(c(this,Tt).getMode())},ov=function(t){const e=c(this,Ee,ci);return e?new e.prototype.constructor(t):null},av=function(){const{x:t,y:e,width:s,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,e),a=Math.min(window.innerWidth,t+s),l=Math.min(window.innerHeight,e+i),u=(r+a)/2-t,d=(o+l)/2-e,[h,f]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:h,offsetY:f}},Xh=function(){for(const t of c(this,Cn).values())t.isEmpty()&&t.remove()},kt(Nn,"_initialized",!1),A(Nn,ho,new Map([jg,ev,sv,hf].map(t=>[t._editorType,t])));let rv=Nn;var Yn,Wd,Ds,$a,Mf,gw,Ii,cv,vw,uv;const vs=class vs{constructor({pageIndex:t}){A(this,Ii);A(this,Yn,null);A(this,Wd,0);A(this,Ds,new Map);A(this,$a,new Map);this.pageIndex=t}setParent(t){if(!c(this,Yn)){y(this,Yn,t);return}if(c(this,Yn)!==t){if(c(this,Ds).size>0)for(const e of c(this,Ds).values())e.remove(),t.append(e);y(this,Yn,t)}}static get _svgFactory(){return Yt(this,"_svgFactory",new Uv)}draw(t,e=!1,s=!1){const i=Ts(this,Wd)._++,r=x(this,Ii,cv).call(this),o=vs._svgFactory.createElement("defs");r.append(o);const a=vs._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),e&&c(this,$a).set(i,a);const u=s?x(this,Ii,vw).call(this,o,l):null,d=vs._svgFactory.createElement("use");return r.append(d),d.setAttribute("href",`#${l}`),this.updateProperties(r,t),c(this,Ds).set(i,r),{id:i,clipPathId:`url(#${u})`}}drawOutline(t,e){const s=Ts(this,Wd)._++,i=x(this,Ii,cv).call(this),r=vs._svgFactory.createElement("defs");i.append(r);const o=vs._svgFactory.createElement("path");r.append(o);const a=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(e){const h=vs._svgFactory.createElement("mask");r.append(h),l=`mask_p${this.pageIndex}_${s}`,h.setAttribute("id",l),h.setAttribute("maskUnits","objectBoundingBox");const f=vs._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=vs._svgFactory.createElement("use");h.append(p),p.setAttribute("href",`#${a}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=vs._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${a}`),l&&u.setAttribute("mask",`url(#${l})`);const d=u.cloneNode();return i.append(d),u.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(i,t),c(this,Ds).set(s,i),s}finalizeDraw(t,e){c(this,$a).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var l;if(!e)return;const{root:s,bbox:i,rootClass:r,path:o}=e,a=typeof t=="number"?c(this,Ds).get(t):t;if(a){if(s&&x(this,Ii,uv).call(this,a,s),i&&x(l=vs,Mf,gw).call(l,a,i),r){const{classList:u}=a;for(const[d,h]of Object.entries(r))u.toggle(d,h)}if(o){const d=a.firstChild.firstChild;x(this,Ii,uv).call(this,d,o)}}}updateParent(t,e){if(e===this)return;const s=c(this,Ds).get(t);s&&(c(e,Yn).append(s),c(this,Ds).delete(t),c(e,Ds).set(t,s))}remove(t){c(this,$a).delete(t),c(this,Yn)!==null&&(c(this,Ds).get(t).remove(),c(this,Ds).delete(t))}destroy(){y(this,Yn,null);for(const t of c(this,Ds).values())t.remove();c(this,Ds).clear(),c(this,$a).clear()}};Yn=new WeakMap,Wd=new WeakMap,Ds=new WeakMap,$a=new WeakMap,Mf=new WeakSet,gw=function(t,[e,s,i,r]){const{style:o}=t;o.top=`${100*s}%`,o.left=`${100*e}%`,o.width=`${100*i}%`,o.height=`${100*r}%`},Ii=new WeakSet,cv=function(){const t=vs._svgFactory.create(1,1,!0);return c(this,Yn).append(t),t.setAttribute("aria-hidden",!0),t},vw=function(t,e){const s=vs._svgFactory.createElement("clipPath");t.append(s);const i=`clip_${e}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=vs._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),i},uv=function(t,e){for(const[s,i]of Object.entries(e))i===null?t.removeAttribute(s):t.setAttribute(s,i)},A(vs,Mf);let lv=vs;globalThis.pdfjsTestingUtils={HighlightOutliner:Ug};Ft.AbortException;Ft.AnnotationEditorLayer;Ft.AnnotationEditorParamsType;Ft.AnnotationEditorType;Ft.AnnotationEditorUIManager;Ft.AnnotationLayer;Ft.AnnotationMode;Ft.ColorPicker;Ft.DOMSVGFactory;Ft.DrawLayer;Ft.FeatureTest;var Uk=Ft.GlobalWorkerOptions;Ft.ImageKind;Ft.InvalidPDFException;Ft.MissingPDFException;Ft.OPS;Ft.OutputScale;Ft.PDFDataRangeTransport;Ft.PDFDateString;Ft.PDFWorker;Ft.PasswordResponses;Ft.PermissionFlag;Ft.PixelsPerInch;Ft.RenderingCancelledException;Ft.TextLayer;Ft.TouchManager;Ft.UnexpectedResponseException;Ft.Util;Ft.VerbosityLevel;Ft.XfaLayer;Ft.build;Ft.createValidAbsoluteUrl;Ft.fetchData;var Vk=Ft.getDocument;Ft.getFilenameFromUrl;Ft.getPdfFilenameFromUrl;Ft.getXfaPageViewport;Ft.isDataScheme;Ft.isPdfFile;Ft.noContextMenu;Ft.normalizeUnicode;Ft.setLayerDimensions;Ft.shadow;Ft.stopEvent;Ft.version;function Gk(n){return new Worker("/assets/pdf.worker-BWOYGGP1.js",{name:n==null?void 0:n.name})}const zk={class:"pdf-viewer"},Wk={key:0,class:"pdf-toolbar",style:{display:"flex",gap:"10px","align-items":"center","justify-content":"space-between","margin-bottom":"10px"}},Kk={style:{display:"flex",gap:"8px","align-items":"center"}},Xk={style:{color:"#9ca3af","font-size":"12px"}},Yk={style:{display:"flex",gap:"10px","align-items":"center"}},Jk={style:{display:"flex",gap:"8px","align-items":"center",color:"#9ca3af","font-size":"12px"}},Zk={style:{display:"flex",gap:"8px","align-items":"center",color:"#9ca3af","font-size":"12px"}},Qk=["width","height"],qk=["onClick","title"],tT={key:0,class:"bbox-text"},eT={class:"bbox-text-src"},sT={class:"bbox-text-tr"},nT=fs({__name:"PdfCanvasViewer",props:{pdfUrl:{},pageWidth:{},pageHeight:{},blocks:{},activeBlockId:{},initialPageIndex:{},continuous:{type:Boolean}},emits:["select","page"],setup(n,{emit:t}){const e=n,s=t,i=et(null),r=et(null),o=et(null),a=et(e.initialPageIndex??0),l=et(1),u=Wt(()=>!!e.continuous),d=et([]),h=et(!1),f=et(""),p=et(!1);Uk.workerPort=new Gk;const g=Wt(()=>{var U;const nt=((U=r.value)!=null&&U.clientWidth?r.value.clientWidth-6:900)/Math.max(1,e.pageWidth);return Math.min(1.6,Math.max(.6,nt))}),m=Wt(()=>Math.round(e.pageWidth*g.value)),w=Wt(()=>Math.round(e.pageHeight*g.value)),b=Wt(()=>e.blocks.filter(q=>{var nt;return(((nt=q.bbox)==null?void 0:nt.page)??0)===a.value})),S=Wt(()=>{let q=b.value;return f.value&&(q=q.filter(nt=>nt.type===f.value)),h.value&&(q=q.filter(nt=>!!nt.translation_failed||(nt.translation||"").startsWith("["))),q}),C=q=>{const nt=q.bbox.x0*g.value,U=q.bbox.y0*g.value,K=(q.bbox.x1-q.bbox.x0)*g.value,tt=(q.bbox.y1-q.bbox.y0)*g.value;return{left:`${nt}px`,top:`${U}px`,width:`${Math.max(1,K)}px`,height:`${Math.max(1,tt)}px`}},T=q=>q==="heading"?"c-heading":q==="caption"?"c-caption":q==="formula"?"c-formula":q==="figure"?"c-figure":q==="table"?"c-table":"c-paragraph",_=q=>{const nt=(q||"").trim().replace(/\s+/g," ");return nt.length>80?nt.slice(0,80)+"":nt},R=q=>{var tt;const nt=`p${(((tt=q.bbox)==null?void 0:tt.page)??0)+1}`,U=q.type||"block",K=q.translation_failed?`
ERROR: ${q.translation_error||""}`:"";return`${nt}  ${U}
${_(q.text)}${K}`},M=async()=>{if(!(!i.value||!o.value))try{const q=await o.value.getPage(a.value+1),nt=q.getViewport({scale:g.value}),U=i.value;U.width=Math.round(nt.width),U.height=Math.round(nt.height);const K=U.getContext("2d");if(!K)return;K.clearRect(0,0,U.width,U.height),await q.render({canvasContext:K,viewport:nt}).promise,s("page",a.value)}catch(q){console.error("[PdfCanvasViewer] renderPage error",q)}},N=(q,nt)=>{d.value[nt]=q},I=async()=>{if(!o.value)return;const q=o.value.numPages||1;l.value=q;for(let nt=0;nt<q;nt++){const U=await o.value.getPage(nt+1),K=U.getViewport({scale:g.value}),tt=d.value[nt];if(!tt)continue;tt.width=Math.round(K.width),tt.height=Math.round(K.height);const Ct=tt.getContext("2d");Ct&&(Ct.clearRect(0,0,tt.width,tt.height),await U.render({canvasContext:Ct,viewport:K}).promise)}},G=async()=>{if(o.value)return;const q=Vk({url:e.pdfUrl,withCredentials:!1});o.value=await q.promise,l.value=o.value.numPages||1},X=async()=>{a.value=Math.max(0,a.value-1),await M()},z=async()=>{a.value=Math.min(l.value-1,a.value+1),await M()},ot=q=>{s("select",q)};return hs(()=>e.activeBlockId,async q=>{var K;if(!q)return;const nt=e.blocks.find(tt=>tt.id===q);if(!nt)return;!u.value&&nt.bbox.page!==a.value&&(a.value=nt.bbox.page,await M());const U=nt.bbox.y0*g.value;(K=r.value)==null||K.scrollTo({top:Math.max(0,U-120),behavior:"smooth"})}),hs(g,async()=>{u.value?await I():await M()}),Js(async()=>{await G(),u.value?await I():await M()}),(q,nt)=>(O(),F("div",zk,[u.value?gt("",!0):(O(),F("div",Wk,[v("div",Kk,[Nt(_n,{onClick:X,disabled:a.value<=0},{default:ce(()=>[...nt[3]||(nt[3]=[de("",-1)])]),_:1},8,["disabled"]),Nt(_n,{onClick:z,disabled:a.value>=l.value-1},{default:ce(()=>[...nt[4]||(nt[4]=[de("",-1)])]),_:1},8,["disabled"]),v("div",Xk," "+at(a.value+1)+" / "+at(l.value)+" ",1)]),v("div",Yk,[v("label",Jk,[Re(v("input",{type:"checkbox","onUpdate:modelValue":nt[0]||(nt[0]=U=>h.value=U)},null,512),[[rf,h.value]]),nt[5]||(nt[5]=de("  ",-1))]),Re(v("select",{class:"simple-input","onUpdate:modelValue":nt[1]||(nt[1]=U=>f.value=U),style:{padding:"8px 10px"}},[...nt[6]||(nt[6]=[$e('<option value="" data-v-629ff4ec></option><option value="heading" data-v-629ff4ec></option><option value="paragraph" data-v-629ff4ec></option><option value="caption" data-v-629ff4ec></option><option value="formula" data-v-629ff4ec></option><option value="figure" data-v-629ff4ec></option><option value="table" data-v-629ff4ec></option>',7)])],512),[[ty,f.value]]),v("label",Zk,[Re(v("input",{type:"checkbox","onUpdate:modelValue":nt[2]||(nt[2]=U=>p.value=U)},null,512),[[rf,p.value]]),nt[7]||(nt[7]=de("  ",-1))])])])),u.value?(O(),F("div",{key:2,ref_key:"scrollEl",ref:r,class:"pdf-scroll"},[(O(!0),F(fe,null,dn(l.value,U=>(O(),F("div",{key:U,class:"pdf-page",style:Ss({width:`${m.value}px`,margin:"0 auto 16px"})},[v("div",{class:"canvas-wrap",style:Ss({width:`${m.value}px`})},[v("canvas",{ref_for:!0,ref:K=>N(K,U-1)},null,512)],4)],4))),128))],512)):(O(),F("div",{key:1,ref_key:"scrollEl",ref:r,class:"pdf-scroll"},[v("div",{class:"pdf-page",style:Ss({width:`${m.value}px`})},[v("div",{class:"canvas-wrap",style:Ss({width:`${m.value}px`,height:`${w.value}px`})},[v("canvas",{ref_key:"canvasEl",ref:i,width:m.value,height:w.value},null,8,Qk),v("div",{class:"overlay",style:Ss({width:`${m.value}px`,height:`${w.value}px`})},[(O(!0),F(fe,null,dn(S.value,U=>(O(),F("div",{key:U.id,class:jt(["bbox",[T(U.type),{active:U.id===n.activeBlockId}]]),style:Ss(C(U)),onClick:Je(K=>ot(U.id),["stop"]),title:R(U)},[p.value?(O(),F("div",tT,[v("div",eT,at(_(U.text)),1),v("div",sT,at(_(U.translation||"")),1)])):gt("",!0)],14,qk))),128))],4)],4)],4)],512))]))}}),I0=Ln(nT,[["__scopeId","data-v-629ff4ec"]]),iT={class:"workbench"},rT={class:"workbench-main glass-card"},oT={style:{display:"flex","align-items":"center","justify-content":"space-between",gap:"12px","margin-bottom":"14px"}},aT={style:{display:"flex","align-items":"center",gap:"10px"}},lT={style:{color:"#9ca3af","font-size":"12px"}},cT={style:{display:"flex",gap:"10px","align-items":"center"}},uT={key:0,style:{color:"#9ca3af","font-size":"12px"}},dT={class:"workbench-columns"},hT={class:"pane pane-original"},fT={key:0,style:{height:"calc(100% - 30px)"}},pT={key:1,class:"demo-block",style:{color:"#9ca3af"}},gT={class:"pane pane-translation"},vT={key:0,style:{height:"calc(100% - 30px)"}},mT={key:1,class:"demo-block",style:{color:"#9ca3af"}},yT=fs({__name:"ProjectWorkbenchView",setup(n){const t=Qd(),e=Ao(),s=Wt(()=>String(t.params.id||"")),i=et(null),r=et(!0),o=et(null),a=et(null),l=et(null),u=et(!1),d=et(""),h=Wt(()=>d.value||""),f=Wt(()=>i.value?EE(i.value.document.id):""),p=async b=>{for(let S=0;S<240;S++){await new Promise(C=>setTimeout(C,800));try{const C=await _E(b),T=Math.round(((C==null?void 0:C.progress)??0)*100),_=(C==null?void 0:C.eta_s)!=null?`  ETA ${Math.round(C.eta_s)}s`:"",R=(C==null?void 0:C.done)!=null&&(C==null?void 0:C.total)!=null?`  ${C.done}/${C.total}`:"";if(a.value=`${(C==null?void 0:C.stage)??"unknown"}  ${T}%${R}${_}`,(C==null?void 0:C.stage)==="success"||(C==null?void 0:C.stage)==="failed"||(C==null?void 0:C.stage)==="canceled")break}catch{}}},g=async()=>{r.value=!0,o.value=null;try{i.value=await yy(s.value)}catch(b){o.value=(b==null?void 0:b.message)??String(b)}finally{r.value=!1}},m=async()=>{if(!(!i.value||u.value)){u.value=!0;try{const{job_id:b}=await CE({document_id:i.value.document.id,lang_in:i.value.document.lang_in,lang_out:i.value.document.lang_out});l.value=b,await p(b);const S=await kE({document_id:i.value.document.id,format:"pdf-dual",bilingual:!0,subset_fonts:!0,convert_to_pdfa:!1});S!=null&&S.download_url&&(d.value=`http://localhost:8000${S.download_url}`)}finally{u.value=!1}}},w=()=>{e.push({name:"dashboard"})};return Js(g),hs(s,g),(b,S)=>{var C,T,_,R,M,N,I,G,X;return O(),F("section",iT,[v("div",rT,[v("div",oT,[v("div",aT,[Nt(_n,{onClick:w},{default:ce(()=>[...S[0]||(S[0]=[de("",-1)])]),_:1}),v("div",lT,at((C=i.value)==null?void 0:C.document.title)+"  "+at((T=i.value)==null?void 0:T.document.lang_in)+""+at((_=i.value)==null?void 0:_.document.lang_out),1)]),v("div",cT,[Nt(_n,{primary:"",onClick:m,disabled:!i.value||u.value},{default:ce(()=>[de(at(u.value?"":" PDF"),1)]),_:1},8,["disabled"]),a.value?(O(),F("div",uT,at(a.value),1)):gt("",!0)])]),v("div",dT,[v("div",hT,[S[1]||(S[1]=v("h3",null," PDF",-1)),i.value?(O(),F("div",fT,[Nt(I0,{"pdf-url":f.value,"page-width":((R=i.value.pages[0])==null?void 0:R.width)||1e3,"page-height":((M=i.value.pages[0])==null?void 0:M.height)||1e3,blocks:[],"active-block-id":null,continuous:!0},null,8,["pdf-url","page-width","page-height"])])):(O(),F("p",pT," PDF"))]),v("div",gT,[S[2]||(S[2]=v("h3",null," PDF",-1)),h.value?(O(),F("div",vT,[Nt(I0,{"pdf-url":h.value,"page-width":((I=(N=i.value)==null?void 0:N.pages[0])==null?void 0:I.width)||1e3,"page-height":((X=(G=i.value)==null?void 0:G.pages[0])==null?void 0:X.height)||1e3,blocks:[],"active-block-id":null,continuous:!0},null,8,["pdf-url","page-width","page-height"])])):(O(),F("div",mT,"  PDF PDF "))])])])])}}}),bT=Ln(yT,[["__scopeId","data-v-98f0c3b6"]]),wT={class:"settings"},AT={class:"settings-container"},xT={class:"settings-section glass-card"},ST={class:"settings-grid"},ET={class:"setting-card email-card"},CT={class:"setting-card-header"},_T={key:0,class:"email-verified-badge"},kT={key:1,class:"email-unverified-badge"},TT={class:"setting-card-content"},PT={class:"email-display"},RT={class:"email-text"},IT=["disabled"],MT={key:0,class:"loading-spinner-small"},LT={class:"setting-card user-card"},OT={class:"card-icon-wrapper"},DT={key:0,class:"user-avatar"},NT=["src","alt"],FT={key:1,class:"user-avatar-placeholder"},$T={class:"setting-card-content"},BT={class:"name-display"},jT={class:"name-text"},HT={class:"setting-card provider-card"},UT={class:"setting-card-content"},VT={class:"settings-section glass-card"},GT={class:"settings-grid"},zT={class:"setting-card security-card password-card"},WT={class:"setting-card-content"},KT=["disabled"],XT={key:0,class:"settings-hint"},YT={class:"setting-card security-card history-card"},JT={class:"setting-card-content"},ZT={class:"setting-card security-card session-card"},QT={class:"setting-card-content"},qT={class:"setting-card security-card twofa-card"},tP={class:"setting-card-header"},eP={key:0,class:"email-verified-badge"},sP={class:"setting-card-content"},nP={class:"setting-card security-card social-binding-card"},iP={class:"setting-card-content"},rP={class:"setting-card security-card breach-check-card"},oP={class:"setting-card-content"},aP={class:"modal-content glass-card"},lP={class:"modal-header"},cP={class:"modal-body"},uP={class:"form-group"},dP={class:"password-input-wrapper"},hP=["type"],fP={key:0,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},pP={key:1,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},gP={class:"form-group"},vP={class:"password-input-wrapper"},mP=["type"],yP={key:0,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},bP={key:1,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},wP={class:"form-group"},AP={class:"password-input-wrapper"},xP=["type"],SP={key:0,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},EP={key:1,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},CP={key:0,class:"field-error"},_P=["disabled"],kP={key:0,class:"loading-spinner"},TP={class:"modal-content glass-card modal-content-large"},PP={class:"modal-header"},RP={class:"modal-body"},IP={key:0,class:"loading-state"},MP={key:1,class:"empty-state"},LP={key:2},OP={class:"history-list"},DP={class:"history-item-icon"},NP={key:0,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},FP={key:1,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},$P={class:"history-item-content"},BP={class:"history-item-header"},jP={class:"history-item-status"},HP={class:"history-item-time"},UP={class:"history-item-details"},VP={class:"history-item-detail"},GP={class:"detail-value"},zP={class:"history-item-detail"},WP={class:"detail-value"},KP={class:"history-item-detail"},XP={class:"detail-value"},YP={class:"history-item-detail"},JP={class:"detail-value"},ZP={class:"history-item-detail"},QP={class:"detail-value"},qP={key:0,class:"history-item-detail"},t3={class:"detail-value error-text"},e3={key:0,class:"pagination-container"},s3={class:"pagination-info"},n3={class:"pagination-controls"},i3=["disabled"],r3={class:"pagination-pages"},o3=["onClick","disabled"],a3=["disabled"],l3={class:"modal-content glass-card modal-content-large"},c3={class:"modal-header"},u3={class:"modal-body"},d3={key:0,class:"loading-state"},h3={key:1,class:"empty-state"},f3={key:2,class:"sessions-list"},p3={class:"session-item-content"},g3={class:"session-item-header"},v3={class:"session-item-token"},m3={key:0,class:"session-item-badge"},y3={class:"session-item-details"},b3={class:"session-item-detail"},w3={class:"detail-value"},A3={class:"session-item-detail"},x3={class:"detail-value"},S3={class:"session-item-detail"},E3={class:"detail-value"},C3={key:0,class:"session-item-detail"},_3={class:"detail-value"},k3={class:"session-item-actions"},T3=["onClick","disabled"],P3={key:0,class:"loading-spinner-small"},R3={key:3,class:"sessions-actions"},I3=["disabled"],M3={key:0,class:"loading-spinner"},L3={class:"modal-content glass-card modal-content-large"},O3={class:"modal-header"},D3={class:"modal-body"},N3={key:0,class:"loading-state"},F3={key:1},$3={key:0,class:"twofa-status-enabled"},B3={class:"form-group"},j3={class:"password-input-wrapper"},H3=["disabled"],U3={key:0,class:"loading-spinner"},V3={class:"form-group",style:{"margin-top":"24px"}},G3=["disabled"],z3={key:0,class:"loading-spinner"},W3={key:0,class:"backup-codes-display"},K3={class:"backup-codes-grid"},X3={key:1},Y3={key:0},J3=["disabled"],Z3={key:0,class:"loading-spinner"},Q3={key:1},q3={class:"qr-code-section"},tR={class:"qr-code-placeholder"},eR={class:"password-input-wrapper"},sR=["disabled"],nR={key:0,class:"loading-spinner"},iR={key:0,class:"backup-codes-display",style:{"margin-top":"24px"}},rR={class:"backup-codes-grid"},oR={class:"modal-content glass-card modal-content-large"},aR={class:"modal-header"},lR={class:"modal-body"},cR={key:0,class:"loading-state"},uR={key:1},dR={key:0,class:"empty-state"},hR={key:1,class:"bindings-list"},fR={class:"binding-info"},pR={class:"binding-details"},gR={key:0,class:"binding-detail"},vR={class:"detail-value"},mR={key:1,class:"binding-detail"},yR={class:"detail-value"},bR={class:"binding-detail"},wR={class:"detail-value"},AR=["onClick"],xR={class:"modal-content glass-card"},SR={class:"modal-header"},ER={class:"modal-body"},CR={class:"form-group"},_R={class:"password-input-wrapper"},kR=["disabled"],TR={key:0,class:"loading-spinner"},PR={class:"breach-result-icon"},RR={key:0,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},IR={key:1,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},MR={class:"breach-result-content"},LR={class:"breach-result-message"},OR={key:0,class:"breach-result-count"},Mp=3,DR=fs({__name:"SettingsView",setup(n){const t=Ao(),e=Xa(),s=et(!1),i=et(!1),r=et(!1),o=et(!1),a=et(!1),l=et(!1),u=et({currentPassword:"",newPassword:"",confirmPassword:""}),d=et(!1),h=et(!1),f=et(!1),p=et(!1),g=et(""),m=et([]),w=et(!1),b=et(1),S=et("email"),C=et([]),T=et(!1),_=et(null),R=et(!1),M=et(!1),N=et(null),I=et(null),G=et(""),X=et([]),z=et(!1),ot=et([]),q=et(!1),nt=et(""),U=et(null),K=et(!1),tt=Wt(()=>Vt(S.value)),Ct=Wt(()=>{var V;return!!((V=e.user)!=null&&V.has_password)}),vt=(V,E,yt)=>{const wt=new CustomEvent("show-toast",{detail:{type:V,title:E,message:yt}});window.dispatchEvent(wt)},Mt=V=>{if(!V)return"";try{return new Date(V).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return V}},Rt=V=>V?V.includes("Chrome")?"Chrome ":V.includes("Firefox")?"Firefox ":V.includes("Safari")&&!V.includes("Chrome")?"Safari ":V.includes("Edge")?"Edge ":V.includes("Mobile")?"":"":"",Vt=V=>({email:"",google:"Google ",github:"GitHub "})[V]||V||"",It=V=>({captcha_invalid_or_expired:"",account_temporarily_locked:"",user_not_found:"",invalid_password:"",rate_limit_exceeded:""})[V]||V||"",ie=async()=>{if(g.value="",!u.value.currentPassword){g.value="";return}if(!u.value.newPassword){g.value="";return}if(u.value.newPassword.length<8){g.value="8";return}if(u.value.newPassword!==u.value.confirmPassword){g.value="";return}p.value=!0;try{const V=await BE({current_password:u.value.currentPassword,new_password:u.value.newPassword});vt("success","",V.message),s.value=!1,u.value={currentPassword:"",newPassword:"",confirmPassword:""},setTimeout(()=>{vt("info","",""),e.logout(),t.push("/auth")},2e3)}catch(V){g.value=V.message||"",vt("error","",V.message)}finally{p.value=!1}},lt=async()=>{w.value=!0,b.value=1;try{m.value=await jE(50);const V=m.value.find(E=>E&&E.success);V&&(V.login_method==="email"||V.login_method==="google"||V.login_method==="github")?S.value=V.login_method:S.value="email"}catch(V){vt("error","",V.message)}finally{w.value=!1}},L=Wt(()=>{const V=(b.value-1)*Mp,E=V+Mp;return m.value.slice(V,E)}),W=Wt(()=>Math.ceil(m.value.length/Mp)),Q=Wt(()=>{const V=W.value,E=b.value,yt=[];if(V<=7)for(let wt=1;wt<=V;wt++)yt.push(wt);else if(E<=4){for(let wt=1;wt<=5;wt++)yt.push(wt);yt.push(-1),yt.push(V)}else if(E>=V-3){yt.push(1),yt.push(-1);for(let wt=V-4;wt<=V;wt++)yt.push(wt)}else{yt.push(1),yt.push(-1);for(let wt=E-1;wt<=E+1;wt++)yt.push(wt);yt.push(-1),yt.push(V)}return yt}),dt=V=>{if(V<1||V>W.value||V===-1)return;b.value=V;const E=document.querySelector(".modal-body");E&&(E.scrollTop=0)},ct=async()=>{T.value=!0;try{C.value=await HE()}catch(V){vt("error","",V.message)}finally{T.value=!1}},k=async V=>{_.value=V;try{await UE(V),vt("success","",""),await ct()}catch(E){vt("error","",E.message)}finally{_.value=null}},P=async()=>{if(confirm("")){R.value=!0;try{await VE(),vt("success","",""),r.value=!1,setTimeout(()=>{e.logout(),t.push("/auth")},2e3)}catch(V){vt("error","",V.message)}finally{R.value=!1}}},B=async()=>{var V;if(!((V=e.user)!=null&&V.email)){vt("error","","");return}M.value=!0;try{const E=await Lv({email:e.user.email});vt("success","",E.message),E.verification_url&&vt("info","",`${E.verification_url}`)}catch(E){vt("error","",E.message)}finally{M.value=!1}},Y=()=>{i.value&&lt()},J=()=>{r.value&&ct()};hs(i,Y),hs(r,J);const Z=async()=>{try{N.value=await WE()}catch(V){vt("error","",V.message)}},pt=async()=>{z.value=!0;try{I.value=await KE(),X.value=I.value.backup_codes}catch(V){vt("error","",V.message)}finally{z.value=!1}},ut=async()=>{if(!G.value){vt("error","","");return}z.value=!0;try{await XE(G.value),vt("success","","2FA"),await Z(),G.value="",I.value=null}catch(V){vt("error","",V.message)}finally{z.value=!1}},ht=async()=>{if(!G.value){vt("error","","");return}z.value=!0;try{await YE(G.value),vt("success","","2FA"),await Z(),G.value=""}catch(V){vt("error","",V.message)}finally{z.value=!1}},rt=async()=>{z.value=!0;try{const V=await JE();X.value=V.backup_codes,vt("success","","")}catch(V){vt("error","",V.message)}finally{z.value=!1}},_t=async()=>{q.value=!0;try{const V=await ZE();ot.value=V.bindings}catch(V){vt("error","",V.message)}finally{q.value=!1}},j=async V=>{if(confirm(""))try{await QE(V),vt("success","",""),await _t()}catch(E){vt("error","",E.message)}},H=async()=>{if(!nt.value){vt("error","","");return}K.value=!0;try{U.value=await qE(nt.value),U.value.is_breached?vt("warning","",U.value.message):vt("success","",U.value.message)}catch(V){vt("error","",V.message)}finally{K.value=!1}},$=()=>{o.value&&Z()},st=()=>{a.value&&_t()};return hs(o,$),hs(a,st),Js(()=>{Z(),lt()}),(V,E)=>{var yt,wt,Dt,Et,re,is,Ht,ve;return O(),F("section",wT,[v("div",AT,[E[46]||(E[46]=v("div",{class:"settings-header"},[v("h2",{class:"settings-title"},""),v("p",{class:"settings-subtitle"},"")],-1)),v("div",xT,[E[36]||(E[36]=$e('<div class="section-header" data-v-3abe0f3c><div class="section-icon account-icon" data-v-3abe0f3c><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-3abe0f3c><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3abe0f3c></path><circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" data-v-3abe0f3c></circle></svg></div><div data-v-3abe0f3c><h3 class="settings-section-title" data-v-3abe0f3c></h3><p class="settings-section-desc" data-v-3abe0f3c></p></div></div>',1)),v("div",ST,[v("div",ET,[E[32]||(E[32]=$e('<div class="card-icon-wrapper" data-v-3abe0f3c><div class="setting-icon email-icon" data-v-3abe0f3c><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-3abe0f3c><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3abe0f3c></path><polyline points="22,6 12,13 2,6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3abe0f3c></polyline></svg></div></div>',1)),v("div",CT,[E[31]||(E[31]=v("span",{class:"setting-label"},"",-1)),(yt=ue(e).user)!=null&&yt.email_verified?(O(),F("span",_T,[...E[29]||(E[29]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),de("  ",-1)])])):(O(),F("span",kT,[...E[30]||(E[30]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),v("path",{d:"M12 8v4M12 16h.01",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),de("  ",-1)])]))]),v("div",TT,[v("div",PT,[v("span",RT,at((wt=ue(e).user)==null?void 0:wt.email),1)]),(Dt=ue(e).user)!=null&&Dt.email_verified?gt("",!0):(O(),F("button",{key:0,class:"settings-action-btn",onClick:B,disabled:M.value},[M.value?(O(),F("span",MT)):gt("",!0),v("span",null,at(M.value?"...":""),1)],8,IT))])]),v("div",LT,[v("div",OT,[(Et=ue(e).user)!=null&&Et.avatar?(O(),F("div",DT,[v("img",{src:ue(e).user.avatar,alt:((re=ue(e).user)==null?void 0:re.name)||""},null,8,NT)])):(O(),F("div",FT,[...E[33]||(E[33]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),v("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor","stroke-width":"2"})],-1)])]))]),E[34]||(E[34]=v("div",{class:"setting-card-header"},[v("span",{class:"setting-label"},"")],-1)),v("div",$T,[v("div",BT,[v("span",jT,at(((is=ue(e).user)==null?void 0:is.name)||""),1)])])]),v("div",HT,[E[35]||(E[35]=$e('<div class="card-icon-wrapper" data-v-3abe0f3c><div class="setting-icon provider-icon" data-v-3abe0f3c><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-3abe0f3c><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3abe0f3c></path></svg></div></div><div class="setting-card-header" data-v-3abe0f3c><span class="setting-label" data-v-3abe0f3c></span></div>',2)),v("div",UT,[v("div",{class:jt(["provider-badge",`provider-${S.value}`])},at(tt.value),3)])])])]),v("div",VT,[E[45]||(E[45]=$e('<div class="section-header" data-v-3abe0f3c><div class="section-icon security-icon" data-v-3abe0f3c><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-3abe0f3c><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3abe0f3c></path></svg></div><div data-v-3abe0f3c><h3 class="settings-section-title" data-v-3abe0f3c></h3><p class="settings-section-desc" data-v-3abe0f3c></p></div></div>',1)),v("div",GT,[v("div",zT,[E[37]||(E[37]=$e('<div class="card-icon-wrapper" data-v-3abe0f3c><div class="setting-icon password-icon" data-v-3abe0f3c><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-3abe0f3c><rect x="3" y="11" width="18" height="11" rx="2" ry="2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3abe0f3c></rect><path d="M7 11V7a5 5 0 0 1 10 0v4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3abe0f3c></path></svg></div></div><div class="setting-card-header" data-v-3abe0f3c><span class="setting-label" data-v-3abe0f3c></span></div>',2)),v("div",WT,[v("button",{class:"settings-action-btn",onClick:E[0]||(E[0]=ft=>s.value=!0),disabled:!Ct.value},"  ",8,KT),Ct.value?gt("",!0):(O(),F("p",XT,"  "))])]),v("div",YT,[E[38]||(E[38]=$e('<div class="card-icon-wrapper" data-v-3abe0f3c><div class="setting-icon history-icon" data-v-3abe0f3c><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-3abe0f3c><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" data-v-3abe0f3c></circle><polyline points="12 6 12 12 16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3abe0f3c></polyline></svg></div></div><div class="setting-card-header" data-v-3abe0f3c><span class="setting-label" data-v-3abe0f3c></span></div>',2)),v("div",JT,[v("button",{class:"settings-action-btn",onClick:E[1]||(E[1]=ft=>i.value=!0)},"  ")])]),v("div",ZT,[E[39]||(E[39]=$e('<div class="card-icon-wrapper" data-v-3abe0f3c><div class="setting-icon session-icon" data-v-3abe0f3c><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-3abe0f3c><rect x="2" y="3" width="20" height="14" rx="2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3abe0f3c></rect><path d="M8 21h8M12 17v4" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-v-3abe0f3c></path></svg></div></div><div class="setting-card-header" data-v-3abe0f3c><span class="setting-label" data-v-3abe0f3c></span></div>',2)),v("div",QT,[v("button",{class:"settings-action-btn",onClick:E[2]||(E[2]=ft=>r.value=!0)},"  ")])]),v("div",qT,[E[42]||(E[42]=$e('<div class="card-icon-wrapper" data-v-3abe0f3c><div class="setting-icon twofa-icon" data-v-3abe0f3c><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-3abe0f3c><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3abe0f3c></path><path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3abe0f3c></path></svg></div></div>',1)),v("div",tP,[E[41]||(E[41]=v("span",{class:"setting-label"},"",-1)),(Ht=N.value)!=null&&Ht.enabled?(O(),F("span",eP,[...E[40]||(E[40]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),de("  ",-1)])])):gt("",!0)]),v("div",sP,[v("button",{class:"settings-action-btn",onClick:E[3]||(E[3]=ft=>o.value=!0)},at((ve=N.value)!=null&&ve.enabled?"2FA":"2FA"),1)])]),v("div",nP,[E[43]||(E[43]=$e('<div class="card-icon-wrapper" data-v-3abe0f3c><div class="setting-icon social-icon" data-v-3abe0f3c><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-3abe0f3c><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3abe0f3c></path></svg></div></div><div class="setting-card-header" data-v-3abe0f3c><span class="setting-label" data-v-3abe0f3c></span></div>',2)),v("div",iP,[v("button",{class:"settings-action-btn",onClick:E[4]||(E[4]=ft=>a.value=!0)},"  ")])]),v("div",rP,[E[44]||(E[44]=$e('<div class="card-icon-wrapper" data-v-3abe0f3c><div class="setting-icon breach-icon" data-v-3abe0f3c><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-3abe0f3c><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3abe0f3c></path><path d="M12 8v4M12 16h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3abe0f3c></path></svg></div></div><div class="setting-card-header" data-v-3abe0f3c><span class="setting-label" data-v-3abe0f3c></span></div>',2)),v("div",oP,[v("button",{class:"settings-action-btn",onClick:E[5]||(E[5]=ft=>l.value=!0)},"  ")])])])])]),(O(),Ye(Ti,{to:"body"},[Nt(Jn,{name:"modal"},{default:ce(()=>[s.value?(O(),F("div",{key:0,class:"modal-overlay",onClick:E[13]||(E[13]=Je(ft=>s.value=!1,["self"])),role:"dialog","aria-labelledby":"change-password-title","aria-modal":"true"},[v("div",aP,[v("div",lP,[E[48]||(E[48]=v("h2",{id:"change-password-title"},"",-1)),v("button",{class:"modal-close",onClick:E[6]||(E[6]=ft=>s.value=!1),"aria-label":""},[...E[47]||(E[47]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),v("div",cP,[v("div",uP,[E[51]||(E[51]=v("label",{class:"form-label",for:"current-password"},"",-1)),v("div",dP,[Re(v("input",{id:"current-password","onUpdate:modelValue":E[7]||(E[7]=ft=>u.value.currentPassword=ft),type:d.value?"text":"password",class:"form-input",placeholder:"",autocomplete:"current-password","aria-required":"true",onKeyup:Ms(ie,["enter"])},null,40,hP),[[au,u.value.currentPassword]]),v("button",{type:"button",class:"password-toggle",onClick:E[8]||(E[8]=ft=>d.value=!d.value),tabindex:"-1"},[d.value?(O(),F("svg",fP,[...E[49]||(E[49]=[v("path",{d:"M1 12S5 4 12 4S23 12 23 12S19 20 12 20S1 12 1 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),v("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2"},null,-1)])])):(O(),F("svg",pP,[...E[50]||(E[50]=[v("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20C7 20 2.73 16.39 1 12C2.73 7.61 7 4 12 4C13.5 4 14.9 4.35 16.12 4.95L17.94 3.13M17.94 17.94L3.13 3.13M17.94 17.94L20.87 20.87M3.13 3.13L1 1M20.87 20.87L23 23",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))])])]),v("div",gP,[E[54]||(E[54]=v("label",{class:"form-label",for:"new-password"},"",-1)),v("div",vP,[Re(v("input",{id:"new-password","onUpdate:modelValue":E[9]||(E[9]=ft=>u.value.newPassword=ft),type:h.value?"text":"password",class:"form-input",placeholder:"8",autocomplete:"new-password","aria-required":"true",minlength:"8",onKeyup:Ms(ie,["enter"])},null,40,mP),[[au,u.value.newPassword]]),v("button",{type:"button",class:"password-toggle",onClick:E[10]||(E[10]=ft=>h.value=!h.value),tabindex:"-1"},[h.value?(O(),F("svg",yP,[...E[52]||(E[52]=[v("path",{d:"M1 12S5 4 12 4S23 12 23 12S19 20 12 20S1 12 1 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),v("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2"},null,-1)])])):(O(),F("svg",bP,[...E[53]||(E[53]=[v("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20C7 20 2.73 16.39 1 12C2.73 7.61 7 4 12 4C13.5 4 14.9 4.35 16.12 4.95L17.94 3.13M17.94 17.94L3.13 3.13M17.94 17.94L20.87 20.87M3.13 3.13L1 1M20.87 20.87L23 23",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))])])]),v("div",wP,[E[57]||(E[57]=v("label",{class:"form-label",for:"confirm-new-password"},"",-1)),v("div",AP,[Re(v("input",{id:"confirm-new-password","onUpdate:modelValue":E[11]||(E[11]=ft=>u.value.confirmPassword=ft),type:f.value?"text":"password",class:"form-input",placeholder:"",autocomplete:"new-password","aria-required":"true",onKeyup:Ms(ie,["enter"])},null,40,xP),[[au,u.value.confirmPassword]]),v("button",{type:"button",class:"password-toggle",onClick:E[12]||(E[12]=ft=>f.value=!f.value),tabindex:"-1"},[f.value?(O(),F("svg",SP,[...E[55]||(E[55]=[v("path",{d:"M1 12S5 4 12 4S23 12 23 12S19 20 12 20S1 12 1 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),v("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2"},null,-1)])])):(O(),F("svg",EP,[...E[56]||(E[56]=[v("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20C7 20 2.73 16.39 1 12C2.73 7.61 7 4 12 4C13.5 4 14.9 4.35 16.12 4.95L17.94 3.13M17.94 17.94L3.13 3.13M17.94 17.94L20.87 20.87M3.13 3.13L1 1M20.87 20.87L23 23",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))])])]),g.value?(O(),F("div",CP,at(g.value),1)):gt("",!0),v("button",{class:"auth-button",onClick:ie,disabled:p.value||!u.value.currentPassword||!u.value.newPassword||!u.value.confirmPassword,style:{width:"100%","margin-top":"20px"}},[p.value?(O(),F("span",kP)):gt("",!0),v("span",null,at(p.value?"...":""),1)],8,_P)])])])):gt("",!0)]),_:1})])),(O(),Ye(Ti,{to:"body"},[Nt(Jn,{name:"modal"},{default:ce(()=>[i.value?(O(),F("div",{key:0,class:"modal-overlay",onClick:E[17]||(E[17]=Je(ft=>i.value=!1,["self"])),role:"dialog","aria-labelledby":"login-history-title","aria-modal":"true"},[v("div",TP,[v("div",PP,[E[59]||(E[59]=v("h2",{id:"login-history-title"},"",-1)),v("button",{class:"modal-close",onClick:E[14]||(E[14]=ft=>i.value=!1),"aria-label":""},[...E[58]||(E[58]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),v("div",RP,[w.value?(O(),F("div",IP,[...E[60]||(E[60]=[v("div",{class:"loading-spinner"},null,-1),v("p",null,"...",-1)])])):m.value.length===0?(O(),F("div",MP,[...E[61]||(E[61]=[v("div",{class:"empty-state-icon"},[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M9 12l2 2 4-4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),v("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"})])],-1),v("p",null,"",-1)])])):(O(),F("div",LP,[v("div",OP,[(O(!0),F(fe,null,dn(L.value,ft=>(O(),F("div",{key:ft.id,class:jt(["history-item",{"history-item-success":ft.success,"history-item-failed":!ft.success}])},[v("div",DP,[ft.success?(O(),F("svg",NP,[...E[62]||(E[62]=[v("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),v("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"},null,-1)])])):(O(),F("svg",FP,[...E[63]||(E[63]=[v("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"},null,-1),v("path",{d:"M12 8v4M12 16h.01",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))]),v("div",$P,[v("div",BP,[v("span",jP,at(ft.success?"":""),1),v("span",HP,at(Mt(ft.created_at)),1)]),v("div",UP,[v("div",VP,[E[64]||(E[64]=v("span",{class:"detail-label"},"",-1)),v("span",GP,at(Vt(ft.login_method)),1)]),v("div",zP,[E[65]||(E[65]=v("span",{class:"detail-label"},"IP",-1)),v("span",WP,at(ft.ip||""),1)]),v("div",KP,[E[66]||(E[66]=v("span",{class:"detail-label"},"",-1)),v("span",XP,at(ft.device_type||""),1)]),v("div",YP,[E[67]||(E[67]=v("span",{class:"detail-label"},"",-1)),v("span",JP,at(ft.browser||""),1)]),v("div",ZP,[E[68]||(E[68]=v("span",{class:"detail-label"},"",-1)),v("span",QP,at(ft.os||""),1)]),ft.reason&&!ft.success?(O(),F("div",qP,[E[69]||(E[69]=v("span",{class:"detail-label"},"",-1)),v("span",t3,at(It(ft.reason)),1)])):gt("",!0)])])],2))),128))]),W.value>1?(O(),F("div",e3,[v("div",s3,[v("span",null," "+at(m.value.length)+" ",1),v("span",null," "+at(b.value)+" / "+at(W.value)+" ",1)]),v("div",n3,[v("button",{class:jt(["pagination-btn",{"pagination-btn-disabled":b.value===1}]),onClick:E[15]||(E[15]=ft=>dt(b.value-1)),disabled:b.value===1},[...E[70]||(E[70]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M15 18l-6-6 6-6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],10,i3),v("div",r3,[(O(!0),F(fe,null,dn(Q.value,ft=>(O(),F("button",{key:ft,class:jt(["pagination-page-btn",{"pagination-page-btn-active":ft===b.value,"pagination-page-btn-ellipsis":ft===-1}]),onClick:Ve=>dt(ft),disabled:ft===-1},at(ft===-1?"...":ft),11,o3))),128))]),v("button",{class:jt(["pagination-btn",{"pagination-btn-disabled":b.value===W.value}]),onClick:E[16]||(E[16]=ft=>dt(b.value+1)),disabled:b.value===W.value},[...E[71]||(E[71]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M9 18l6-6-6-6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],10,a3)])])):gt("",!0)]))])])])):gt("",!0)]),_:1})])),(O(),Ye(Ti,{to:"body"},[Nt(Jn,{name:"modal"},{default:ce(()=>[r.value?(O(),F("div",{key:0,class:"modal-overlay",onClick:E[19]||(E[19]=Je(ft=>r.value=!1,["self"])),role:"dialog","aria-labelledby":"sessions-title","aria-modal":"true"},[v("div",l3,[v("div",c3,[E[73]||(E[73]=v("h2",{id:"sessions-title"},"",-1)),v("button",{class:"modal-close",onClick:E[18]||(E[18]=ft=>r.value=!1),"aria-label":""},[...E[72]||(E[72]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),v("div",u3,[T.value?(O(),F("div",d3,[...E[74]||(E[74]=[v("div",{class:"loading-spinner"},null,-1),v("p",null,"...",-1)])])):C.value.length===0?(O(),F("div",h3,[...E[75]||(E[75]=[v("p",null,"",-1)])])):(O(),F("div",f3,[(O(!0),F(fe,null,dn(C.value,ft=>(O(),F("div",{key:ft.token,class:jt(["session-item",{"session-item-current":ft.is_current}])},[E[80]||(E[80]=v("div",{class:"session-item-icon"},[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",stroke:"currentColor","stroke-width":"2"}),v("path",{d:"M8 21h8M12 17v4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})])],-1)),v("div",p3,[v("div",g3,[v("span",v3,"Token: "+at(ft.token),1),ft.is_current?(O(),F("span",m3,"")):gt("",!0)]),v("div",y3,[v("div",b3,[E[76]||(E[76]=v("span",{class:"detail-label"},"IP",-1)),v("span",w3,at(ft.ip||""),1)]),v("div",A3,[E[77]||(E[77]=v("span",{class:"detail-label"},"",-1)),v("span",x3,at(Rt(ft.user_agent)),1)]),v("div",S3,[E[78]||(E[78]=v("span",{class:"detail-label"},"",-1)),v("span",E3,at(Mt(ft.created_at)),1)]),ft.last_used_at?(O(),F("div",C3,[E[79]||(E[79]=v("span",{class:"detail-label"},"",-1)),v("span",_3,at(Mt(ft.last_used_at)),1)])):gt("",!0)])]),v("div",k3,[ft.is_current?gt("",!0):(O(),F("button",{key:0,class:"session-revoke-btn",onClick:Ve=>k(ft.token),disabled:_.value===ft.token},[_.value===ft.token?(O(),F("span",P3)):gt("",!0),v("span",null,at(_.value===ft.token?"...":""),1)],8,T3))])],2))),128))])),C.value.length>0?(O(),F("div",R3,[v("button",{class:"auth-button auth-button-danger",onClick:P,disabled:R.value},[R.value?(O(),F("span",M3)):gt("",!0),v("span",null,at(R.value?"...":""),1)],8,I3)])):gt("",!0)])])])):gt("",!0)]),_:1})])),(O(),Ye(Ti,{to:"body"},[Nt(Jn,{name:"modal"},{default:ce(()=>{var ft;return[o.value?(O(),F("div",{key:0,class:"modal-overlay",onClick:E[23]||(E[23]=Je(Ve=>o.value=!1,["self"])),role:"dialog","aria-labelledby":"2fa-title","aria-modal":"true"},[v("div",L3,[v("div",O3,[E[82]||(E[82]=v("h2",{id:"2fa-title"}," (2FA)",-1)),v("button",{class:"modal-close",onClick:E[20]||(E[20]=Ve=>o.value=!1),"aria-label":""},[...E[81]||(E[81]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),v("div",D3,[z.value?(O(),F("div",N3,[...E[83]||(E[83]=[v("div",{class:"loading-spinner"},null,-1),v("p",null,"...",-1)])])):(O(),F("div",F3,[(ft=N.value)!=null&&ft.enabled?(O(),F("div",$3,[E[86]||(E[86]=v("div",{class:"status-badge success"},[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),de(" 2FA ")],-1)),E[87]||(E[87]=v("p",{class:"status-description"},"",-1)),v("div",B3,[E[84]||(E[84]=v("label",{class:"form-label"},"2FA",-1)),v("div",j3,[Re(v("input",{"onUpdate:modelValue":E[21]||(E[21]=Ve=>G.value=Ve),type:"text",class:"form-input",placeholder:"6",maxlength:"6"},null,512),[[$s,G.value]])]),v("button",{class:"auth-button auth-button-danger",onClick:ht,disabled:z.value||!G.value,style:{"margin-top":"12px"}},[z.value?(O(),F("span",U3)):gt("",!0),v("span",null,at(z.value?"...":"2FA"),1)],8,H3)]),v("div",V3,[v("button",{class:"auth-button",onClick:rt,disabled:z.value},[z.value?(O(),F("span",z3)):gt("",!0),v("span",null,at(z.value?"...":""),1)],8,G3),X.value.length>0?(O(),F("div",W3,[E[85]||(E[85]=v("p",{style:{"font-weight":"600","margin-bottom":"8px"}},"",-1)),v("div",K3,[(O(!0),F(fe,null,dn(X.value,Ve=>(O(),F("div",{key:Ve,class:"backup-code-item"},at(Ve),1))),128))])])):gt("",!0)])])):(O(),F("div",X3,[I.value?(O(),F("div",Q3,[v("div",q3,[E[90]||(E[90]=v("p",{class:"form-label"},"1. QR",-1)),v("div",tR,[v("p",null,"QR"+at(I.value.qr_code_data),1),E[89]||(E[89]=v("p",{style:{"font-size":"12px",color:"#64748b","margin-top":"8px"}},"QR",-1))]),E[91]||(E[91]=v("p",{class:"form-label",style:{"margin-top":"20px"}},"2. 2FA",-1)),v("div",eR,[Re(v("input",{"onUpdate:modelValue":E[22]||(E[22]=Ve=>G.value=Ve),type:"text",class:"form-input",placeholder:"6",maxlength:"6"},null,512),[[$s,G.value]])]),v("button",{class:"auth-button",onClick:ut,disabled:z.value||!G.value,style:{"margin-top":"12px"}},[z.value?(O(),F("span",nR)):gt("",!0),v("span",null,at(z.value?"...":"2FA"),1)],8,sR)]),X.value.length>0?(O(),F("div",iR,[E[92]||(E[92]=v("p",{style:{"font-weight":"600","margin-bottom":"8px"}},"",-1)),v("div",rR,[(O(!0),F(fe,null,dn(X.value,Ve=>(O(),F("div",{key:Ve,class:"backup-code-item"},at(Ve),1))),128))])])):gt("",!0)])):(O(),F("div",Y3,[E[88]||(E[88]=v("p",{class:"status-description"},"",-1)),v("button",{class:"auth-button",onClick:pt,disabled:z.value,style:{"margin-top":"20px"}},[z.value?(O(),F("span",Z3)):gt("",!0),v("span",null,at(z.value?"...":"2FA"),1)],8,J3)]))]))]))])])])):gt("",!0)]}),_:1})])),(O(),Ye(Ti,{to:"body"},[Nt(Jn,{name:"modal"},{default:ce(()=>[a.value?(O(),F("div",{key:0,class:"modal-overlay",onClick:E[25]||(E[25]=Je(ft=>a.value=!1,["self"])),role:"dialog","aria-labelledby":"social-binding-title","aria-modal":"true"},[v("div",oR,[v("div",aR,[E[94]||(E[94]=v("h2",{id:"social-binding-title"},"",-1)),v("button",{class:"modal-close",onClick:E[24]||(E[24]=ft=>a.value=!1),"aria-label":""},[...E[93]||(E[93]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),v("div",lR,[q.value?(O(),F("div",cR,[...E[95]||(E[95]=[v("div",{class:"loading-spinner"},null,-1),v("p",null,"...",-1)])])):(O(),F("div",uR,[E[100]||(E[100]=v("p",{class:"status-description"},"",-1)),ot.value.length===0?(O(),F("div",dR,[...E[96]||(E[96]=[v("p",null,"",-1)])])):(O(),F("div",hR,[(O(!0),F(fe,null,dn(ot.value,ft=>(O(),F("div",{key:ft.id,class:"binding-item"},[v("div",fR,[v("div",{class:jt(["binding-provider-badge",`provider-${ft.provider}`])},at(ft.provider==="google"?"Google":ft.provider==="github"?"GitHub":ft.provider),3),v("div",pR,[ft.email?(O(),F("div",gR,[E[97]||(E[97]=v("span",{class:"detail-label"},"",-1)),v("span",vR,at(ft.email),1)])):gt("",!0),ft.name?(O(),F("div",mR,[E[98]||(E[98]=v("span",{class:"detail-label"},"",-1)),v("span",yR,at(ft.name),1)])):gt("",!0),v("div",bR,[E[99]||(E[99]=v("span",{class:"detail-label"},"",-1)),v("span",wR,at(Mt(ft.created_at)),1)])])]),v("button",{class:"session-revoke-btn",onClick:Ve=>j(ft.id)},"  ",8,AR)]))),128))])),E[101]||(E[101]=v("p",{class:"settings-hint",style:{"margin-top":"20px"}},"",-1))]))])])])):gt("",!0)]),_:1})])),(O(),Ye(Ti,{to:"body"},[Nt(Jn,{name:"modal"},{default:ce(()=>[l.value?(O(),F("div",{key:0,class:"modal-overlay",onClick:E[28]||(E[28]=Je(ft=>l.value=!1,["self"])),role:"dialog","aria-labelledby":"breach-check-title","aria-modal":"true"},[v("div",xR,[v("div",SR,[E[103]||(E[103]=v("h2",{id:"breach-check-title"},"",-1)),v("button",{class:"modal-close",onClick:E[26]||(E[26]=ft=>l.value=!1),"aria-label":""},[...E[102]||(E[102]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),v("div",ER,[E[107]||(E[107]=v("p",{class:"status-description"}," Have I Been Pwned API 5",-1)),v("div",CR,[E[104]||(E[104]=v("label",{class:"form-label"},"",-1)),v("div",_R,[Re(v("input",{"onUpdate:modelValue":E[27]||(E[27]=ft=>nt.value=ft),type:"password",class:"form-input",placeholder:""},null,512),[[$s,nt.value]])])]),v("button",{class:"auth-button",onClick:H,disabled:K.value||!nt.value,style:{width:"100%","margin-top":"12px"}},[K.value?(O(),F("span",TR)):gt("",!0),v("span",null,at(K.value?"...":""),1)],8,kR),U.value?(O(),F("div",{key:0,class:jt(["breach-result",{"breach-result-danger":U.value.is_breached}])},[v("div",PR,[U.value.is_breached?(O(),F("svg",RR,[...E[105]||(E[105]=[v("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),v("path",{d:"M12 8v4M12 16h.01",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(O(),F("svg",IR,[...E[106]||(E[106]=[v("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),v("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"},null,-1)])]))]),v("div",MR,[v("p",LR,at(U.value.message),1),U.value.is_breached?(O(),F("p",OR,"  "+at(U.value.breach_count)+"  ",1)):gt("",!0)])],2)):gt("",!0)])])])):gt("",!0)]),_:1})]))])}}}),NR=Ln(DR,[["__scopeId","data-v-3abe0f3c"]]),FR={class:"glass-card",style:{padding:"18px"}},$R={style:{display:"flex","justify-content":"space-between","align-items":"center",gap:"12px"}},BR={style:{color:"#9ca3af","font-size":"12px","margin-top":"6px"}},jR={key:0,style:{color:"#9ca3af","margin-top":"14px"}},HR={key:1,style:{color:"#fb7185","margin-top":"14px"}},UR={key:2,style:{"margin-top":"14px"}},VR={style:{display:"grid",gap:"10px"}},GR={style:{"min-width":"0"}},zR={style:{"font-weight":"700","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},WR={style:{color:"#9ca3af","font-size":"12px","margin-top":"4px"}},KR={style:{display:"flex",gap:"10px","align-items":"center"}},XR=fs({__name:"BatchProgressView",setup(n){const t=Qd(),e=Ao(),s=Wt(()=>String(t.params.id||"")),i=et(!0),r=et(null),o=et([]);let a=null;const l=async()=>{i.value=!0,r.value=null;try{const d=await PE({batch_id:s.value});o.value=d.items??[]}catch(d){r.value=(d==null?void 0:d.message)??String(d)}finally{i.value=!1}},u=d=>{e.push(`/project/${d}`)};return Js(async()=>{await l(),a=setInterval(l,1500)}),Ka(()=>{a&&clearInterval(a)}),(d,h)=>(O(),F("section",FR,[v("div",$R,[v("div",null,[h[0]||(h[0]=v("h2",{style:{margin:"0"}},"",-1)),v("div",BR,"batch_id: "+at(s.value),1)]),Nt(_n,{onClick:l},{default:ce(()=>[...h[1]||(h[1]=[de("",-1)])]),_:1})]),i.value?(O(),F("div",jR,"")):r.value?(O(),F("div",HR,at(r.value),1)):(O(),F("div",UR,[v("div",VR,[(O(!0),F(fe,null,dn(o.value,f=>{var p,g;return O(),F("div",{key:f.document_id,class:"glass-card",style:{padding:"12px",display:"flex","justify-content":"space-between","align-items":"center",gap:"12px"}},[v("div",GR,[v("div",zR,at(f.title||f.document_id),1),v("div",WR,at(((p=f.job)==null?void 0:p.stage)||"pending")+"  "+at(Math.round((((g=f.job)==null?void 0:g.progress)||0)*100))+"% ",1)]),v("div",KR,[Nt(_n,{primary:"",onClick:m=>u(f.document_id)},{default:ce(()=>[...h[2]||(h[2]=[de("",-1)])]),_:1},8,["onClick"])])])}),128))])]))]))}}),YR={class:"auth-container"},JR={class:"auth-card glass-card"},ZR={class:"auth-header"},QR={class:"auth-title"},qR={class:"auth-subtitle"},tI={class:"auth-form"},eI={key:0,class:"form-group"},sI={class:"input-wrapper"},nI={key:0,class:"input-status-icon input-status-success"},iI={key:1,class:"input-status-icon input-status-error"},rI={key:0,id:"name-error",class:"field-error",role:"alert"},oI={class:"form-group"},aI={class:"input-wrapper"},lI={key:0,class:"input-status-icon input-status-success"},cI={key:1,class:"input-status-icon input-status-error"},uI={key:0,id:"email-error",class:"field-error",role:"alert"},dI={class:"form-label password-label-row"},hI=["aria-expanded"],fI={class:"password-input-wrapper"},pI=["type","minlength"],gI={key:0,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vI={key:1,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},mI={key:0,id:"password-error",class:"field-error",role:"alert"},yI={class:"password-tips-head"},bI={class:"password-tips-list"},wI={class:"rule-meter","aria-hidden":"true"},AI={class:"rule-meter","aria-hidden":"true"},xI={class:"rule-meter","aria-hidden":"true"},SI={class:"rule-meter","aria-hidden":"true"},EI={key:1,class:"form-group"},CI={class:"password-input-wrapper"},_I=["type"],kI={key:0,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},TI={key:1,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},PI={key:0,id:"confirm-password-error",class:"field-error",role:"alert"},RI={class:"form-group"},II={class:"captcha-wrapper"},MI={class:"input-wrapper",style:{flex:"1"}},LI={key:0,class:"input-status-icon input-status-success"},OI={key:1,class:"input-status-icon input-status-error"},DI={class:"captcha-image-wrapper"},NI=["src"],FI={key:0,class:"captcha-loading",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},$I={key:1},BI=["disabled"],jI={key:0,class:"field-error"},HI={key:2,class:"form-options"},UI={class:"checkbox-label"},VI=["disabled"],GI=["disabled","aria-busy"],zI={key:0,class:"loading-spinner","aria-hidden":"true"},WI={class:"social-login"},KI=["disabled"],XI=["disabled"],YI={class:"auth-footer"},JI=["disabled"],ZI={class:"modal-content glass-card"},QI={class:"modal-body"},qI={key:0},t4={class:"form-group"},e4={class:"input-wrapper"},s4={key:0,class:"input-status-icon input-status-error"},n4={key:0,class:"field-error",role:"alert"},i4=["disabled"],r4={key:0,class:"loading-spinner"},o4={key:1},a4={class:"modal-description"},l4={class:"form-group"},c4={class:"input-wrapper"},u4={key:0,class:"input-status-icon input-status-error"},d4={key:0,class:"field-error",role:"alert"},h4={class:"form-options",style:{"justify-content":"space-between","margin-top":"16px"}},f4=["disabled"],p4=["disabled"],g4=["disabled"],v4={key:0,class:"loading-spinner"},m4={key:2,class:"forgot-password-success"},y4={class:"modal-content glass-card"},b4={class:"modal-header"},w4={class:"modal-body"},A4={class:"form-group"},x4={class:"password-input-wrapper"},S4={class:"form-group"},E4={class:"password-input-wrapper"},C4=["disabled"],_4={key:0,class:"loading-spinner"},k4={class:"modal-content glass-card"},T4={class:"modal-body"},P4={class:"form-group"},R4={class:"input-wrapper"},I4={key:0,class:"input-status-icon input-status-error"},M4={key:0,class:"field-error",role:"alert"},L4={class:"form-group"},O4={class:"input-wrapper"},D4={key:0,class:"input-status-icon input-status-error"},N4={key:0,class:"field-error",role:"alert"},F4={class:"form-options",style:{"justify-content":"space-between","margin-top":"16px"}},$4=["disabled"],B4=["disabled"],j4={key:0,class:"loading-spinner"},H4=fs({__name:"AuthView",setup(n){const t=Ao(),e=Xa(),s=et(!0),i=et(!1),r=et(!1),o=et(!1),a=et(!0),l=et(!1),u=et(""),d=et(""),h=et(!1),f=et(""),p=et(""),g=et(""),m=et(!1),w=et(null),b=et(""),S=et(""),C=et(""),T=et(!1),_=et(!1),R=et("email"),M=et(""),N=et(""),I=et(!1),G=et(""),X=et(""),z=et(""),ot=et(!1),q=et(""),nt=et(!1),U=et({password:"",confirmPassword:""}),K=et(!1),tt=et({name:"",email:"",password:"",confirmPassword:""}),Ct=et(""),vt=et(""),Mt=et(""),Rt=et(""),Vt="432136405317-plillpgq2pvskbfe5o169cdrqmq33q7p.apps.googleusercontent.com",It=(it,D,mt)=>{const On=new CustomEvent("show-toast",{detail:{type:it,title:D,message:mt}});window.dispatchEvent(On)},ie=()=>{if(!s.value){const it=tt.value.name.trim();return it?it.length<2?(Ct.value="2",!1):it.length>50?(Ct.value="50",!1):(Ct.value="",!0):(Ct.value="",!1)}return!0},lt=()=>{const it=tt.value.email.trim();return it?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(it)?(vt.value="",!0):(vt.value="",!1):(vt.value="",!1)},L=()=>{const it=tt.value.password;if(!it)return Mt.value="",!1;if(!s.value){if(it.length<8)return Mt.value="",!1;if(it.length>128)return Mt.value="128",!1}return Mt.value="",!0},W=et(null),Q=et(!1),dt=()=>{Q.value=!Q.value},ct=et("right"),k=Wt(()=>{const it=tt.value.password||"";return s.value?{len8:!1,cases:!1,digit:!1,symbol:!1}:{len8:it.length>=8,cases:/[a-z]/.test(it)&&/[A-Z]/.test(it),digit:/\d/.test(it),symbol:/[^a-zA-Z0-9]/.test(it)}}),P=Wt(()=>{const it=tt.value.password||"";if(s.value)return{len8:0,cases:0,digit:0,symbol:0};const D=/[a-z]/.test(it),mt=/[A-Z]/.test(it),On=/\d/.test(it),Dn=/[^a-zA-Z0-9]/.test(it);return{len8:Math.max(0,Math.min(1,it.length/8)),cases:(D?.5:0)+(mt?.5:0),digit:On?1:0,symbol:Dn?1:0}}),B=async()=>{if(s.value||!Q.value)return;await Jd();const it=W.value;if(!it)return;const D=it.querySelector(".password-input-wrapper input");if(!D)return;const mt=D.getBoundingClientRect(),Dn=window.innerWidth-mt.right,oe=mt.left,Mi=320,So=24;Dn>=Mi+So?ct.value="right":oe>=Mi+So?ct.value="left":ct.value="bottom"},Y=it=>{if(s.value||!Q.value)return;const D=W.value,mt=it.target;!D||!mt||D.contains(mt)||(Q.value=!1)};Js(()=>{document.addEventListener("pointerdown",Y,{capture:!0}),window.addEventListener("resize",B,{passive:!0}),window.addEventListener("scroll",B,{passive:!0,capture:!0})}),Ev(()=>{document.removeEventListener("pointerdown",Y,{capture:!0}),window.removeEventListener("resize",B),window.removeEventListener("scroll",B,{capture:!0})}),hs(Q,it=>{it&&B()}),hs(()=>tt.value.password,()=>{Q.value&&B()});const J=()=>{if(!s.value){const it=tt.value.password,D=tt.value.confirmPassword;return D?it!==D?(Rt.value="",!1):(Rt.value="",!0):(Rt.value="",!1)}return!0},Z=Wt(()=>!Ct.value&&tt.value.name.trim().length>=2),pt=Wt(()=>!vt.value&&tt.value.email.trim().length>0),ut=Wt(()=>s.value?!Mt.value&&tt.value.password.length>0:!Mt.value&&tt.value.password.length>=8),ht=Wt(()=>s.value?!0:!Rt.value&&tt.value.password===tt.value.confirmPassword&&tt.value.confirmPassword.length>0),rt=Wt(()=>{const it=tt.value.password;if(!it||s.value)return{level:0,text:""};let D=0;return it.length>=8&&D++,it.length>=12&&D++,/[a-z]/.test(it)&&/[A-Z]/.test(it)&&D++,/\d/.test(it)&&D++,/[^a-zA-Z0-9]/.test(it)&&D++,D<=2?{level:1,text:""}:D<=3?{level:2,text:""}:{level:3,text:""}}),_t=Wt(()=>{const it=rt.value.level;return it===1?"weak":it===2?"medium":it===3?"strong":""}),j=Wt(()=>rt.value.text),H=Wt(()=>s.value?pt.value&&ut.value:Z.value&&pt.value&&ut.value&&ht.value),$=async()=>{T.value=!0,C.value="";try{const it=await IE();w.value=it.image,b.value=it.session_id,S.value=""}catch(it){C.value=it.message||"",It("error","",it.message)}finally{T.value=!1}},st=async()=>{if(N.value="",!M.value.trim()){N.value="";return}if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(M.value.trim())){N.value="";return}I.value=!0;try{const it=await OE({email:M.value.trim()});G.value=it.session_id,it.code?It("info","",`${it.code}`):It("success","",it.message),R.value="verify",X.value=""}catch(it){N.value=it.message||"",It("error","",it.message)}finally{I.value=!1}},V=async()=>{await st()},E=async()=>{if(z.value="",!X.value.trim()){z.value="";return}if(X.value.length!==6){z.value="6+";return}if(!/^[A-Z0-9]{6}$/.test(X.value)){z.value="6";return}ot.value=!0;try{const it=await DE({email:M.value.trim(),code:X.value.trim(),session_id:G.value});q.value=it.token,R.value="success",It("success","",it.message)}catch(it){z.value=it.message||"",It("error","",it.message)}finally{ot.value=!1}},yt=()=>{R.value="email",M.value="",N.value="",X.value="",z.value="",G.value="",I.value=!1,ot.value=!1,_.value=!0},wt=()=>{_.value=!1,setTimeout(()=>{R.value="email",M.value="",N.value="",X.value="",z.value="",G.value="",I.value=!1,ot.value=!1},300)},Dt=()=>{_.value=!1,nt.value=!0},Et=async()=>{if(!U.value.password){It("error","");return}if(!(U.value.password.length<8)){if(U.value.password!==U.value.confirmPassword){It("error","");return}K.value=!0;try{await NE({token:q.value,new_password:U.value.password}),It("success","",""),nt.value=!1,U.value={password:"",confirmPassword:""},q.value="",R.value="email",M.value="",X.value="",G.value="",s.value=!0}catch(it){It("error","",it.message)}finally{K.value=!1}}},re=()=>{l.value=!1,setTimeout(()=>{u.value="",d.value="",p.value="",g.value="",f.value="",h.value=!1,m.value=!1},300)},is=()=>{g.value="",p.value=p.value.replace(/[^A-Za-z0-9]/g,"").toUpperCase()},Ht=async()=>{d.value="";const it=u.value.trim()||tt.value.email.trim();if(!it){d.value="";return}if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(it)){d.value="";return}u.value=it,h.value=!0;try{const mt=await GE({email:it});f.value=mt.session_id,mt.code?It("info","",`${mt.code}`):It("success","",mt.message)}catch(mt){d.value=mt.message||"",It("error","",mt.message)}finally{h.value=!1}},ve=async()=>{if(g.value="",!p.value.trim()){g.value="";return}if(p.value.length!==6){g.value="6+";return}if(!/^[A-Z0-9]{6}$/.test(p.value)){g.value="6";return}if(!f.value){g.value="";return}m.value=!0;try{const it=u.value.trim();await zE({email:it,code:p.value.trim(),session_id:f.value}),It("success","",""),l.value=!1}catch(it){g.value=it.message||"",It("error","",it.message)}finally{m.value=!1}};Js(()=>{if(typeof window<"u"){const it=new URL(window.location.href),D=it.searchParams.get("token");D&&(q.value=D,nt.value=!0,it.searchParams.delete("token"),window.history.replaceState({},"",it.toString()))}if(typeof window<"u")try{const it=new URL(window.location.href),D=it.searchParams.get("auth_token"),mt=it.searchParams.get("user");if(it.searchParams.get("provider")==="github"&&D&&mt){const Dn=decodeURIComponent(escape(atob(mt))),oe=JSON.parse(Dn),Mi=it.searchParams.get("refresh_token"),So=Mi?atob(Mi):void 0;e.login(oe,D,So),it.searchParams.delete("auth_token"),it.searchParams.delete("refresh_token"),it.searchParams.delete("user"),it.searchParams.delete("provider"),window.history.replaceState({},"",it.toString());const op=it.searchParams.get("redirect")||t.currentRoute.value.query.redirect||"/";It("success","",""),t.push(op);return}}catch(it){console.warn("Failed to parse github auth callback params",it)}if(typeof window<"u"&&window.google)ft();else{const it=setInterval(()=>{window.google&&(clearInterval(it),ft())},100);setTimeout(()=>{clearInterval(it)},1e4)}$()}),Ka(()=>{});const ft=()=>{if(window.google)try{window.google.accounts.id.initialize({client_id:Vt,callback:Ve})}catch(it){console.error("Failed to initialize Google Sign-In:",it)}},Ve=async it=>{i.value=!0;try{const D=await RE(it.credential);e.login(D.user,D.token,D.refresh_token,a.value);const mt=t.currentRoute.value.query.redirect||"/";It("success","",`${D.user.name||D.user.email}`),t.push(mt)}catch(D){console.error("Google login error:",D);let mt="Google";if(D.message)try{mt=JSON.parse(D.message).detail||mt}catch{mt=D.message}mt.includes("")&&(mt.includes("")||mt.includes("")||mt.includes("")||mt.includes(""))?(S.value="",$(),It("warning","","")):mt.includes("")||mt.includes("")?(It("warning","",mt),mt.includes("")&&setTimeout(()=>{It("info","","")},3500)):It("error","",mt)}finally{i.value=!1}},mw=()=>{s.value=!s.value,Ct.value="",vt.value="",Mt.value="",Rt.value="",C.value="",S.value="",tt.value={name:"",email:"",password:"",confirmPassword:""},s.value,$()},Ja=async()=>{const it=s.value||ie(),D=lt(),mt=L(),On=s.value||J();if(!it||!D||!mt||!On){It("warning","","");return}if(!s.value){if(tt.value.password!==tt.value.confirmPassword){It("warning","","");return}if(tt.value.password.length<8)return}i.value=!0;try{if(s.value){const oe=await LE({email:tt.value.email.trim(),password:tt.value.password,captcha_code:S.value.trim(),captcha_session:b.value});if(e.login(oe.user,oe.token,oe.refresh_token,a.value),It("success","",`${oe.user.name||oe.user.email}`),oe.last_login&&oe.last_login.time){const Mi=oe.last_login.time,So=oe.last_login.ip||"",op=So?`${Mi}IP${So}`:Mi;It("info","",`${op}`)}}else{const oe=await ME({name:tt.value.name.trim(),email:tt.value.email.trim(),password:tt.value.password,captcha_code:S.value.trim(),captcha_session:b.value});e.login(oe.user,oe.token,oe.refresh_token,!0),oe.user.email_verified?It("success","",""):(It("warning","",""),setTimeout(()=>{It("info","","")},2e3))}const Dn=t.currentRoute.value.query.redirect||"/";t.push(Dn)}catch(Dn){console.error("Auth error:",Dn);const oe=Dn.message||(s.value?"":"");oe.includes("")&&(oe.includes("")||oe.includes("")||oe.includes("")||oe.includes(""))?(S.value="",$(),It("warning","","")):s.value&&(oe.includes("")||oe.includes(""))?(It("warning","",oe),oe.includes("")&&setTimeout(()=>{It("info","","")},3500)):It("error",s.value?"":"",oe)}finally{i.value=!1}},Jv=async it=>{if(it==="google"){if(!window.google){It("error","","Google");return}i.value=!0;try{const D=document.createElement("div");D.style.position="fixed",D.style.left="-9999px",D.style.top="-9999px",document.body.appendChild(D),window.google.accounts.id.renderButton(D,{theme:"outline",size:"large",type:"standard",text:"signin_with",shape:"rectangular",logo_alignment:"left"}),setTimeout(()=>{const mt=D.querySelector('div[role="button"]');mt?mt.click():setTimeout(()=>{const On=D.querySelector('div[role="button"]');On?On.click():(i.value=!1,It("error","","Google"))},500),setTimeout(()=>{document.body.contains(D)&&document.body.removeChild(D)},2e3)},200)}catch(D){console.error("Google login error:",D),i.value=!1,It("error","","Google")}}else if(it==="github"){const D=t.currentRoute.value.query.redirect||"/",mt=new URL(`${Kt}/auth/github/start`);mt.searchParams.set("redirect",D),window.location.href=mt.toString()}};return(it,D)=>(O(),F("div",YR,[v("div",JR,[v("div",ZR,[D[25]||(D[25]=v("div",{class:"auth-logo"},[v("img",{src:Rv,alt:"AxiomFlow",class:"auth-logo-image"}),v("div",{class:"auth-logo-text"},"AxiomFlow")],-1)),v("h1",QR,at(s.value?"":""),1),v("p",qR,at(s.value?"":""),1)]),v("div",tI,[v("form",{onSubmit:Je(Ja,["prevent"])},[s.value?gt("",!0):(O(),F("div",eI,[D[28]||(D[28]=v("label",{class:"form-label"},"",-1)),v("div",sI,[Re(v("input",{"onUpdate:modelValue":D[0]||(D[0]=mt=>tt.value.name=mt),type:"text",class:jt(["form-input",{"input-error":Ct.value,"input-valid":Z.value}]),placeholder:"",autocomplete:"username","aria-required":"true","aria-invalid":"!!nameError","aria-describedby":"name-error",onBlur:ie,onInput:ie,onKeyup:Ms(Ja,["enter"]),required:""},null,34),[[$s,tt.value.name]]),Z.value&&tt.value.name?(O(),F("div",nI,[...D[26]||(D[26]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):gt("",!0),Ct.value?(O(),F("div",iI,[...D[27]||(D[27]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):gt("",!0)]),Ct.value?(O(),F("div",rI,at(Ct.value),1)):gt("",!0)])),v("div",oI,[D[31]||(D[31]=v("label",{class:"form-label"},"",-1)),v("div",aI,[Re(v("input",{"onUpdate:modelValue":D[1]||(D[1]=mt=>tt.value.email=mt),type:"email",class:jt(["form-input",{"input-error":vt.value,"input-valid":pt.value}]),placeholder:"",autocomplete:"email","aria-required":"true","aria-invalid":"!!emailError","aria-describedby":"email-error",onBlur:lt,onInput:lt,onKeyup:Ms(Ja,["enter"]),required:""},null,34),[[$s,tt.value.email]]),pt.value&&tt.value.email?(O(),F("div",lI,[...D[29]||(D[29]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):gt("",!0),vt.value?(O(),F("div",cI,[...D[30]||(D[30]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):gt("",!0)]),vt.value?(O(),F("div",uI,at(vt.value),1)):gt("",!0)]),v("div",{class:"form-group password-group",ref_key:"passwordGroupRef",ref:W},[v("label",dI,[D[33]||(D[33]=v("span",null,"",-1)),s.value?gt("",!0):(O(),F("button",{key:0,type:"button",class:"password-tips-trigger",onClick:dt,"aria-expanded":Q.value?"true":"false","aria-label":"",title:""},[...D[32]||(D[32]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},[v("path",{d:"M12 17h.01M12 13a3 3 0 1 0-3-3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),v("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10Z",stroke:"currentColor","stroke-width":"2"})],-1)])],8,hI))]),v("div",fI,[Re(v("input",{"onUpdate:modelValue":D[2]||(D[2]=mt=>tt.value.password=mt),type:r.value?"text":"password",class:jt(["form-input",{"input-error":Mt.value,"input-valid":ut.value&&tt.value.password}]),placeholder:"",autocomplete:"current-password","aria-required":"true","aria-invalid":"!!passwordError","aria-describedby":"password-error",onBlur:L,onInput:L,onFocus:D[3]||(D[3]=mt=>!s.value&&(Q.value=!0)),onKeydown:D[4]||(D[4]=Ms(Je(mt=>Q.value=!1,["prevent"]),["esc"])),onKeyup:Ms(Ja,["enter"]),required:"",minlength:s.value?0:8},null,42,pI),[[au,tt.value.password]]),v("button",{type:"button",class:"password-toggle",onClick:D[5]||(D[5]=mt=>r.value=!r.value),tabindex:"-1"},[r.value?(O(),F("svg",gI,[...D[34]||(D[34]=[v("path",{d:"M1 12S5 4 12 4S23 12 23 12S19 20 12 20S1 12 1 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),v("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2"},null,-1)])])):(O(),F("svg",vI,[...D[35]||(D[35]=[v("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20C7 20 2.73 16.39 1 12C2.73 7.61 7 4 12 4C13.5 4 14.9 4.35 16.12 4.95L17.94 3.13M17.94 17.94L3.13 3.13M17.94 17.94L20.87 20.87M3.13 3.13L1 1M20.87 20.87L23 23",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))])]),Mt.value?(O(),F("div",mI,at(Mt.value),1)):gt("",!0),Nt(Jn,{name:"fade-pop"},{default:ce(()=>[!s.value&&Q.value?(O(),F("div",{key:0,ref:"passwordPopoverRef",class:jt(["password-tips-popover",`place-${ct.value}`]),role:"dialog","aria-label":"",onMousedown:D[6]||(D[6]=Je(()=>{},["prevent"]))},[v("div",yI,[D[36]||(D[36]=v("div",{class:"password-tips-title"},"",-1)),tt.value.password?(O(),F("div",{key:0,class:jt(["password-strength-pill",_t.value])}," "+at(j.value||""),3)):gt("",!0)]),v("ul",bI,[v("li",{class:jt({met:k.value.len8})},[D[37]||(D[37]=v("span",{class:"tip-text"},[de(" "),v("strong",null,"8 ")],-1)),v("span",wI,[v("span",{class:jt(["rule-meter-fill",_t.value]),style:Ss({width:`${Math.round(P.value.len8*100)}%`})},null,6)])],2),v("li",{class:jt({met:k.value.cases})},[D[38]||(D[38]=v("span",{class:"tip-text"},[de(" "),v("strong",null,""),de("  "),v("strong",null,"")],-1)),v("span",AI,[v("span",{class:jt(["rule-meter-fill",_t.value]),style:Ss({width:`${Math.round(P.value.cases*100)}%`})},null,6)])],2),v("li",{class:jt({met:k.value.digit})},[D[39]||(D[39]=v("span",{class:"tip-text"},[de(" "),v("strong",null,"")],-1)),v("span",xI,[v("span",{class:jt(["rule-meter-fill",_t.value]),style:Ss({width:`${Math.round(P.value.digit*100)}%`})},null,6)])],2),v("li",{class:jt(["recommended",{met:k.value.symbol}])},[D[40]||(D[40]=v("span",{class:"tip-text"},[de(" "),v("strong",null,""),de("")],-1)),v("span",SI,[v("span",{class:jt(["rule-meter-fill",_t.value]),style:Ss({width:`${Math.round(P.value.symbol*100)}%`})},null,6)])],2)])],34)):gt("",!0)]),_:1})],512),s.value?gt("",!0):(O(),F("div",EI,[D[43]||(D[43]=v("label",{class:"form-label"},"",-1)),v("div",CI,[Re(v("input",{"onUpdate:modelValue":D[7]||(D[7]=mt=>tt.value.confirmPassword=mt),type:o.value?"text":"password",class:jt(["form-input",{"input-error":Rt.value,"input-valid":ht.value&&tt.value.confirmPassword}]),placeholder:"",autocomplete:"new-password","aria-required":"true","aria-invalid":"!!confirmPasswordError","aria-describedby":"confirm-password-error",onBlur:J,onInput:J,onKeyup:Ms(Ja,["enter"]),required:""},null,42,_I),[[au,tt.value.confirmPassword]]),v("button",{type:"button",class:"password-toggle",onClick:D[8]||(D[8]=mt=>o.value=!o.value),tabindex:"-1"},[o.value?(O(),F("svg",kI,[...D[41]||(D[41]=[v("path",{d:"M1 12S5 4 12 4S23 12 23 12S19 20 12 20S1 12 1 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),v("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2"},null,-1)])])):(O(),F("svg",TI,[...D[42]||(D[42]=[v("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20C7 20 2.73 16.39 1 12C2.73 7.61 7 4 12 4C13.5 4 14.9 4.35 16.12 4.95L17.94 3.13M17.94 17.94L3.13 3.13M17.94 17.94L20.87 20.87M3.13 3.13L1 1M20.87 20.87L23 23",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))])]),Rt.value?(O(),F("div",PI,at(Rt.value),1)):gt("",!0)])),v("div",RI,[D[48]||(D[48]=v("label",{class:"form-label"},"",-1)),v("div",II,[v("div",MI,[Re(v("input",{"onUpdate:modelValue":D[9]||(D[9]=mt=>S.value=mt),type:"text",class:jt(["form-input",{"input-error":C.value,"input-valid":S.value&&!C.value}]),placeholder:"",maxlength:"4",autocomplete:"off","aria-label":"",onKeyup:Ms(Ja,["enter"])},null,34),[[$s,S.value]]),S.value&&!C.value?(O(),F("div",LI,[...D[44]||(D[44]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):gt("",!0),C.value?(O(),F("div",OI,[...D[45]||(D[45]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):gt("",!0)]),v("div",DI,[w.value?(O(),F("img",{key:0,src:w.value,alt:"",class:"captcha-image",onClick:$,role:"button",tabindex:"0","aria-label":"",onKeyup:Ms($,["enter"])},null,40,NI)):(O(),F("div",{key:1,class:"captcha-placeholder",onClick:$,role:"button",tabindex:"0","aria-label":""},[T.value?(O(),F("svg",FI,[...D[46]||(D[46]=[v("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2","stroke-dasharray":"31.416","stroke-dashoffset":"31.416"},[v("animate",{attributeName:"stroke-dasharray",dur:"2s",values:"0 31.416;15.708 15.708;0 31.416;0 31.416",repeatCount:"indefinite"}),v("animate",{attributeName:"stroke-dashoffset",dur:"2s",values:"0;-15.708;-31.416;-31.416",repeatCount:"indefinite"})],-1)])])):(O(),F("span",$I,""))])),v("button",{type:"button",class:"captcha-refresh",onClick:$,disabled:T.value,"aria-label":"",title:""},[...D[47]||(D[47]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M3 12C3 7.03 7.03 3 12 3C16.97 3 21 7.03 21 12M21 12L17 8M21 12L17 16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,BI)])]),C.value?(O(),F("div",jI,at(C.value),1)):gt("",!0)]),s.value?(O(),F("div",HI,[v("label",UI,[Re(v("input",{type:"checkbox","onUpdate:modelValue":D[10]||(D[10]=mt=>a.value=mt),class:"checkbox-input","aria-label":""},null,512),[[rf,a.value]]),D[49]||(D[49]=v("span",{class:"checkbox-custom"},null,-1)),D[50]||(D[50]=v("span",{class:"checkbox-text"},"",-1))]),v("button",{type:"button",class:"forgot-password-link",onClick:yt,disabled:i.value,"aria-label":""},"  ",8,VI)])):gt("",!0),v("button",{type:"submit",class:"auth-button",disabled:i.value||!H.value,"aria-busy":i.value,"aria-label":""},[i.value?(O(),F("span",zI)):gt("",!0),v("span",null,at(i.value?s.value?"...":"...":s.value?"":""),1)],8,GI)],32),D[53]||(D[53]=v("div",{class:"auth-divider"},[v("span",null,"")],-1)),v("div",WI,[v("button",{class:"social-button social-github",onClick:D[11]||(D[11]=mt=>Jv("github")),disabled:i.value},[...D[51]||(D[51]=[v("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.01-1.023-.014-1.856-2.782.604-3.369-1.18-3.369-1.18-.455-1.157-1.11-1.466-1.11-1.466-.907-.62.068-.607.068-.607 1.003.07 1.53 1.03 1.53 1.03.892 1.53 2.341 1.088 2.91.832.09-.647.35-1.088.636-1.338-2.22-.252-4.555-1.11-4.555-4.943 0-1.092.39-1.986 1.03-2.685-.103-.253-.446-1.27.098-2.646 0 0 .84-.269 2.75 1.026A9.56 9.56 0 0 1 12 6.844c.85.004 1.705.115 2.505.336 1.909-1.295 2.748-1.026 2.748-1.026.546 1.376.202 2.393.1 2.646.64.699 1.028 1.593 1.028 2.685 0 3.842-2.339 4.688-4.566 4.935.359.309.678.92.678 1.855 0 1.338-.012 2.416-.012 2.744 0 .267.18.578.688.48A10.02 10.02 0 0 0 22 12c0-5.523-4.477-10-10-10z"})],-1),v("span",null,"GitHub",-1)])],8,KI),v("button",{class:"social-button social-google",onClick:D[12]||(D[12]=mt=>Jv("google")),disabled:i.value},[...D[52]||(D[52]=[$e('<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path></svg><span>Google</span>',2)])],8,XI)]),v("div",YI,[v("span",null,at(s.value?"":""),1),v("button",{class:"auth-link",onClick:mw,disabled:i.value,"aria-label":"/"},at(s.value?"":""),9,JI)])])]),(O(),Ye(Ti,{to:"body"},[Nt(Jn,{name:"modal"},{default:ce(()=>[_.value?(O(),F("div",{key:0,class:"modal-overlay",onClick:Je(wt,["self"]),role:"dialog","aria-labelledby":"forgot-password-title","aria-modal":"true"},[v("div",ZI,[v("div",{class:"modal-header"},[D[55]||(D[55]=v("h2",{id:"forgot-password-title"},"",-1)),v("button",{class:"modal-close",onClick:wt,"aria-label":""},[...D[54]||(D[54]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),v("div",QI,[R.value==="email"?(O(),F("div",qI,[D[58]||(D[58]=v("p",{class:"modal-description"},"",-1)),v("div",t4,[D[57]||(D[57]=v("label",{class:"form-label",for:"forgot-email"},"",-1)),v("div",e4,[Re(v("input",{id:"forgot-email","onUpdate:modelValue":D[13]||(D[13]=mt=>M.value=mt),type:"email",class:jt(["form-input",{"input-error":N.value}]),placeholder:"",autocomplete:"email","aria-required":"true","aria-invalid":"!!forgotPasswordEmailError",onKeyup:Ms(st,["enter"]),onInput:D[14]||(D[14]=mt=>N.value="")},null,34),[[$s,M.value]]),N.value?(O(),F("div",s4,[...D[56]||(D[56]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):gt("",!0)]),N.value?(O(),F("div",n4,at(N.value),1)):gt("",!0)]),v("button",{class:"auth-button",onClick:st,disabled:I.value||!M.value.trim(),style:{width:"100%","margin-top":"20px"}},[I.value?(O(),F("span",r4)):gt("",!0),v("span",null,at(I.value?"...":""),1)],8,i4)])):R.value==="verify"?(O(),F("div",o4,[v("p",a4,[D[59]||(D[59]=de(" ",-1)),v("strong",null,at(M.value),1),D[60]||(D[60]=de("6+",-1))]),v("div",l4,[D[62]||(D[62]=v("label",{class:"form-label",for:"verification-code"},"",-1)),v("div",c4,[Re(v("input",{id:"verification-code","onUpdate:modelValue":D[15]||(D[15]=mt=>X.value=mt),type:"text",class:jt(["form-input",{"input-error":z.value}]),placeholder:"6+",maxlength:"6",autocomplete:"off","aria-required":"true","aria-invalid":"!!emailVerificationCodeError",onKeyup:Ms(E,["enter"]),onInput:D[16]||(D[16]=mt=>{z.value="",X.value=X.value.replace(/[^A-Za-z0-9]/g,"").toUpperCase()})},null,34),[[$s,X.value]]),z.value?(O(),F("div",u4,[...D[61]||(D[61]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):gt("",!0)]),z.value?(O(),F("div",d4,at(z.value),1)):gt("",!0)]),v("div",h4,[v("button",{type:"button",class:"forgot-password-link",onClick:D[17]||(D[17]=mt=>R.value="email"),disabled:ot.value},"   ",8,f4),v("button",{type:"button",class:"forgot-password-link",onClick:V,disabled:I.value||ot.value},"  ",8,p4)]),v("button",{class:"auth-button",onClick:E,disabled:ot.value||X.value.length!==6,style:{width:"100%","margin-top":"20px"}},[ot.value?(O(),F("span",v4)):gt("",!0),v("span",null,at(ot.value?"...":""),1)],8,g4)])):R.value==="success"?(O(),F("div",m4,[D[63]||(D[63]=v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"success-icon"},[v("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),v("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"})],-1)),D[64]||(D[64]=v("p",null,"",-1)),D[65]||(D[65]=v("p",{class:"success-hint"},"",-1)),v("button",{class:"auth-button",onClick:Dt,style:{width:"100%","margin-top":"20px"}},"  ")])):gt("",!0)])])])):gt("",!0)]),_:1})])),(O(),Ye(Ti,{to:"body"},[Nt(Jn,{name:"modal"},{default:ce(()=>[nt.value?(O(),F("div",{key:0,class:"modal-overlay",onClick:D[21]||(D[21]=Je(mt=>nt.value=!1,["self"])),role:"dialog","aria-labelledby":"reset-password-title","aria-modal":"true"},[v("div",y4,[v("div",b4,[D[67]||(D[67]=v("h2",{id:"reset-password-title"},"",-1)),v("button",{class:"modal-close",onClick:D[18]||(D[18]=mt=>nt.value=!1),"aria-label":""},[...D[66]||(D[66]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),v("div",w4,[v("div",A4,[D[68]||(D[68]=v("label",{class:"form-label",for:"reset-password"},"",-1)),v("div",x4,[Re(v("input",{id:"reset-password","onUpdate:modelValue":D[19]||(D[19]=mt=>U.value.password=mt),type:"password",class:"form-input",placeholder:"8",autocomplete:"new-password","aria-required":"true",minlength:"8",onKeyup:Ms(Et,["enter"])},null,544),[[$s,U.value.password]])])]),v("div",S4,[D[69]||(D[69]=v("label",{class:"form-label",for:"reset-confirm-password"},"",-1)),v("div",E4,[Re(v("input",{id:"reset-confirm-password","onUpdate:modelValue":D[20]||(D[20]=mt=>U.value.confirmPassword=mt),type:"password",class:"form-input",placeholder:"",autocomplete:"new-password","aria-required":"true",onKeyup:Ms(Et,["enter"])},null,544),[[$s,U.value.confirmPassword]])])]),v("button",{class:"auth-button",onClick:Et,disabled:K.value||!U.value.password||!U.value.confirmPassword,style:{width:"100%","margin-top":"20px"}},[K.value?(O(),F("span",_4)):gt("",!0),v("span",null,at(K.value?"...":""),1)],8,C4)])])])):gt("",!0)]),_:1})])),(O(),Ye(Ti,{to:"body"},[Nt(Jn,{name:"modal"},{default:ce(()=>[l.value?(O(),F("div",{key:0,class:"modal-overlay",onClick:Je(re,["self"]),role:"dialog","aria-labelledby":"login-unlock-title","aria-modal":"true"},[v("div",k4,[v("div",{class:"modal-header"},[D[71]||(D[71]=v("h2",{id:"login-unlock-title"},"",-1)),v("button",{class:"modal-close",onClick:re,"aria-label":""},[...D[70]||(D[70]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),v("div",T4,[D[76]||(D[76]=v("p",{class:"modal-description"},"  ",-1)),v("div",P4,[D[73]||(D[73]=v("label",{class:"form-label",for:"login-unlock-email"},"",-1)),v("div",R4,[Re(v("input",{id:"login-unlock-email","onUpdate:modelValue":D[22]||(D[22]=mt=>u.value=mt),type:"email",class:jt(["form-input",{"input-error":d.value}]),placeholder:"",autocomplete:"email","aria-required":"true","aria-invalid":"!!loginUnlockEmailError",onInput:D[23]||(D[23]=mt=>d.value="")},null,34),[[$s,u.value]]),d.value?(O(),F("div",I4,[...D[72]||(D[72]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):gt("",!0)]),d.value?(O(),F("div",M4,at(d.value),1)):gt("",!0)]),v("div",L4,[D[75]||(D[75]=v("label",{class:"form-label",for:"login-unlock-code"},"",-1)),v("div",O4,[Re(v("input",{id:"login-unlock-code","onUpdate:modelValue":D[24]||(D[24]=mt=>p.value=mt),type:"text",class:jt(["form-input",{"input-error":g.value}]),placeholder:"6+",maxlength:"6",autocomplete:"off","aria-required":"true","aria-invalid":"!!loginUnlockCodeError",onInput:is,onKeyup:Ms(ve,["enter"])},null,34),[[$s,p.value]]),g.value?(O(),F("div",D4,[...D[74]||(D[74]=[v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):gt("",!0)]),g.value?(O(),F("div",N4,at(g.value),1)):gt("",!0)]),v("div",F4,[v("button",{type:"button",class:"forgot-password-link",onClick:Ht,disabled:h.value},at(h.value?"...":" / "),9,$4)]),v("button",{class:"auth-button",onClick:ve,disabled:m.value||p.value.length!==6,style:{width:"100%","margin-top":"20px"}},[m.value?(O(),F("span",j4)):gt("",!0),v("span",null,at(m.value?"...":""),1)],8,B4)])])])):gt("",!0)]),_:1})]))]))}}),U4={class:"verify-email-container"},V4={class:"verify-email-card glass-card"},G4={key:0,class:"verify-email-content"},z4={key:0,class:"verify-email-loading"},W4={key:1,class:"verify-email-error"},K4={class:"verify-email-actions"},X4={key:0,class:"loading-spinner"},Y4={key:1,class:"verify-email-success"},J4=fs({__name:"VerifyEmailView",setup(n){const t=Qd(),e=Ao(),s=Xa(),i=et(!0),r=et(!1),o=et(""),a=et(!1),l=(f,p,g)=>{const m=new CustomEvent("show-toast",{detail:{type:f,title:p,message:g}});window.dispatchEvent(m)},u=async f=>{i.value=!0,o.value="";try{const p=await FE({token:f});r.value=!0,l("success","",p.message),s.user&&(s.user.email_verified=!0,s.user.email_verified_at=new Date().toISOString(),(localStorage.getItem("auth_token")?localStorage:sessionStorage).setItem("user",JSON.stringify(s.user)))}catch(p){o.value=p.message||"",l("error","",p.message)}finally{i.value=!1}},d=async()=>{var f;if(!((f=s.user)!=null&&f.email)){l("error","","");return}a.value=!0;try{const p=await Lv({email:s.user.email});l("success","",p.message),p.verification_url&&l("info","",`${p.verification_url}`)}catch(p){l("error","",p.message)}finally{a.value=!1}},h=()=>{e.push("/")};return Js(()=>{const f=t.query.token;f?u(f):(o.value="",i.value=!1)}),(f,p)=>(O(),F("div",U4,[v("div",V4,[r.value?(O(),F("div",Y4,[p[4]||(p[4]=$e('<div class="success-icon" data-v-4bb7b7ff><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-4bb7b7ff><path d="M20 6L9 17l-5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-4bb7b7ff></path><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" data-v-4bb7b7ff></circle></svg></div><h1 class="verify-email-title" data-v-4bb7b7ff></h1><p class="verify-email-subtitle" data-v-4bb7b7ff></p>',3)),v("button",{class:"auth-button",onClick:h},"")])):(O(),F("div",G4,[p[3]||(p[3]=$e('<div class="verify-email-header" data-v-4bb7b7ff><div class="verify-email-icon" data-v-4bb7b7ff><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-4bb7b7ff><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-4bb7b7ff></path><polyline points="22,6 12,13 2,6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-4bb7b7ff></polyline></svg></div><h1 class="verify-email-title" data-v-4bb7b7ff></h1><p class="verify-email-subtitle" data-v-4bb7b7ff>...</p></div>',1)),i.value?(O(),F("div",z4,[...p[0]||(p[0]=[v("div",{class:"loading-spinner"},null,-1),v("p",null,"...",-1)])])):gt("",!0),o.value?(O(),F("div",W4,[p[1]||(p[1]=v("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[v("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),v("path",{d:"M12 8v4M12 16h.01",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),p[2]||(p[2]=v("h3",null,"",-1)),v("p",null,at(o.value),1),v("div",K4,[v("button",{class:"auth-button",onClick:d},[a.value?(O(),F("span",X4)):gt("",!0),v("span",null,at(a.value?"...":""),1)]),v("button",{class:"auth-link",onClick:h},"")])])):gt("",!0)]))])]))}}),Z4=Ln(J4,[["__scopeId","data-v-4bb7b7ff"]]),Q4=[{path:"/",name:"landing",component:ZS},{path:"/auth",name:"auth",component:H4},{path:"/auth/verify-email",name:"verify-email",component:Z4},{path:"/app",name:"dashboard",component:HC},{path:"/batch/:id",name:"batch",component:XR,props:!0},{path:"/project/:id",name:"project",component:bT},{path:"/settings",name:"settings",component:NR}],q4=fS({history:zx(),routes:Q4}),rp=Q2(BS);rp.config.errorHandler=(n,t,e)=>{console.error("[VueError]",e,n);try{const s=n instanceof Error?n.message:String(n),i=new CustomEvent("show-toast",{detail:{type:"error",title:"",message:s}});window.dispatchEvent(i)}catch{}};rp.use(ex());rp.use(q4);rp.mount("#app");
